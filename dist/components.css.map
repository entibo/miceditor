{
  "version": 3,
  "file": "components.css",
  "sources": [
    "../src/components/ui/Header.svelte",
    "../src/components/ui/MainPanel.svelte",
    "../src/components/scene/Scene.svelte",
    "../src/components/ui/ObjectPalette.svelte",
    "../node_modules/fa-svelte/src/Icon.svelte",
    "../src/components/common/TextInput.svelte",
    "../src/components/common/Button.svelte",
    "../src/components/common/Tooltip.svelte",
    "../src/components/ui/UserSettings.svelte",
    "../src/components/ui/XmlEditor.svelte",
    "../src/components/ui/HelpMenu.svelte",
    "../src/components/ui/LanguageMenu.svelte",
    "../src/components/ui/MapSettingsMenu.svelte",
    "../src/components/ui/SelectionMenu.svelte",
    "../src/components/scene/Decoration.svelte",
    "../src/components/scene/ShamanObject.svelte",
    "../src/components/scene/Joint.svelte",
    "../src/components/scene/Footer.svelte",
    "../src/components/ui/ObjectPaletteMenu.svelte",
    "../src/components/scene/Platform.svelte",
    "../src/components/ui/ImagesSubMenu.svelte",
    "../src/components/ui/MultipleMiceSpawnSubMenu.svelte",
    "../src/components/common/ColorPicker.svelte"
  ],
  "sourcesContent": [
    "\n<script>\n\n  import clipboardCopy from \"clipboard-copy\"\n\n  import { tick, onMount } from \"svelte\"\n  import { fly, slide } from \"svelte/transition\"\n\n  import Icon from \"fa-svelte\"\n  import { faCopy } from \"@fortawesome/free-solid-svg-icons/faCopy\"\n  import { faUndo } from \"@fortawesome/free-solid-svg-icons/faUndo\"\n  import { faRedo } from \"@fortawesome/free-solid-svg-icons/faRedo\"\n  import { faCog } from \"@fortawesome/free-solid-svg-icons/faCog\"\n  import { faEdit } from \"@fortawesome/free-solid-svg-icons/faEdit\"\n  import { faSearchPlus } from \"@fortawesome/free-solid-svg-icons/faSearchPlus\"\n  import { faQuestion } from \"@fortawesome/free-solid-svg-icons/faQuestion\"\n\n  import { debounce } from \"/utils.js\"\n\n  import { \n    xml, settings, \n    undo, redo, canUndo, canRedo,\n    highQuality, parkour, showGameGUI, showMapBorder, zoom, firstVisit,\n    language, _, localeFlag\n  } from \"/stores/stores.js\"\n\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import Button from \"/components/common/Button.svelte\"\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n  import UserSettings from \"/components/ui/UserSettings.svelte\"\n  import XmlEditor from \"/components/ui/XmlEditor.svelte\"\n  import HelpMenu from \"/components/ui/HelpMenu.svelte\"\n  import LanguageMenu from \"/components/ui/LanguageMenu.svelte\"\n\n  let copyIconActive = false\n  function removeCopyIconActive() {\n    copyIconActive = false\n  }\n  async function copyXML() {\n    try {\n      await clipboardCopy($xml)\n      copyIconActive = true\n      debounce(removeCopyIconActive, 500)\n    } catch(e) {}\n  }\n  async function selectXML({target}) {\n    target.select()\n    await tick()\n    target.select()\n  }\n\n  // let currentMenu = firstVisit ? \"help\" : null\n  let currentMenu = null\n  function selectMenu(which) {\n    if(currentMenu === which)\n      currentMenu = null\n    else currentMenu = which\n  }\n\n  function onKeydown({key}) {\n    if(key.toLowerCase() === \"h\") {\n      selectMenu(\"help\")\n    }\n  }\n\n</script>\n\n<svelte:window\n  on:keydown={onKeydown}\n/>\n\n<header class=\"relative flex justify-between items-center px-4 py-2 bg-gray-800 shadow-lg text-white z-10\">\n\n  <div class=\"flex flex-wrap items-center\">\n\n    <Button class=\"text-sm\" on:click={selectMenu.bind(null, \"language\")}>\n      <div class=\"flex justify-center items-center\">\n        <span class=\"icon\" class:active={currentMenu === \"language\"}>\n          <span class=\"m-1 flag flag-{localeFlag[$language]}\"></span>\n      </div>\n    </Button>\n\n    <div class=\"mr-2\"></div>\n\n    <Tooltip inline bottom title=\"H\" >\n      <Button class=\"text-sm\" on:click={selectMenu.bind(null, \"help\")}>\n        <div class=\"flex justify-center items-center\">\n          <span class=\"icon\" class:active={currentMenu === \"help\"}>\n            <Icon icon={faQuestion}/> \n              </span>\n            <span class=\"ml-2 hidden xl:inline\">{$_(\"button-help\")}</span>\n        </div>\n      </Button>\n    </Tooltip>\n\n    <div class=\"mr-2\"></div>\n\n    <Tooltip inline bottom title={$_(\"editor-settings\")} >\n      <Button class=\"text-sm\" on:click={selectMenu.bind(null, \"settings\")}>\n        <div class=\"flex justify-center items-center\">\n          <span class=\"icon\" class:active={currentMenu === \"settings\"}>\n            <Icon icon={faCog}/> \n              </span>\n          <span class=\"ml-2 hidden xl:inline\">{$_(\"button-settings\")}</span>\n        </div>\n      </Button>\n    </Tooltip>\n\n    <div class=\"mr-2\"></div>\n\n    <Tooltip inline bottom title=\"Ctrl+Scroll\" >\n      <Button class=\"text-sm\" on:click={selectMenu.bind(null, \"zoom\")}>\n        <div class=\"flex justify-center items-center\">\n          <span class=\"icon\" class:active={currentMenu === \"zoom\"}>\n            <Icon icon={faSearchPlus}/> \n              </span>\n            <span class=\"ml-2 hidden xl:inline\">{$_(\"button-zoom\")}</span>\n        </div>\n      </Button>\n    </Tooltip>\n\n  </div>\n\n\n  <div class=\"mr-4\"></div>\n\n\n  <div class=\"flex justify-center flex-wrap items-center\">\n    <Tooltip inline bottom title={$_(\"large-xml-editor\")} >\n      <Button class=\"text-sm\" on:click={selectMenu.bind(null, \"xmlEditor\")}>\n        <div class=\"flex justify-center items-center\" >\n          <span class=\"icon\" class:active={currentMenu === \"xmlEditor\"}>\n            <Icon icon={faEdit}/> \n              </span>\n          <span class=\"ml-2 hidden xl:inline\">{$_(\"button-edit\")}</span>\n        </div>\n      </Button>\n    </Tooltip>\n\n    <div class=\"mr-2\"></div>\n\n    <TextInput value={$xml} on:input={e => $xml = e.target.value} on:click={selectXML} />\n\n    <div class=\"mr-2\"></div>\n\n    <Tooltip inline bottom title={$_(\"copy-map-to-clipboard\")} >\n      <Button class=\"text-sm\" on:click={copyXML}>\n        <div class=\"flex justify-center items-center\" >\n          <span class=\"icon\" class:active={copyIconActive}>\n            <Icon icon={faCopy}/> \n          </span>\n          <span class=\"ml-2 hidden xl:inline\">{$_(\"button-copy\")}</span>\n        </div>\n      </Button>\n    </Tooltip>\n  </div>\n\n\n  <div class=\"mr-4\"></div>\n\n\n  <div class=\"flex flex-wrap\">\n    <Tooltip inline bottom title=\"Ctrl+Z\" >\n      <Button class=\"text-sm\" disabled={!$canUndo} on:click={undo}>\n        <div class=\"flex justify-center items-center\">\n          <Icon icon={faUndo}/> <span class=\"ml-2 hidden xl:inline\">{$_(\"button-undo\")}</span>\n        </div>\n      </Button>\n    </Tooltip>\n    <div class=\"mr-2\"></div>\n    <Tooltip inline bottom end title=\"Ctrl+Shift+Z / Ctrl+Y\" >\n      <Button class=\"text-sm\" disabled={!$canRedo} on:click={redo}>\n        <div class=\"flex justify-center items-center\">\n          <Icon icon={faRedo}/> <span class=\"ml-2 hidden xl:inline\">{$_(\"button-redo\")}</span>\n        </div>\n      </Button>\n    </Tooltip>\n  </div>\n\n\n\n  {#if currentMenu === \"settings\"}\n\n  <div class=\"lower-panel p-2 xl:p-4\" transition:slide={{duration: 100}}>\n\n    <UserSettings />\n\n  </div>\n\n  {:else if currentMenu === \"zoom\"}\n\n  <div class=\"lower-panel p-2 xl:p-4\" transition:slide={{duration: 100}}>\n    \n    <section>\n      <label>\n        <span>{$_(\"button-zoom\")}</span>\n        <span class=\"w-12\">\n          <TextInput number bind:value={$zoom} />\n        </span>\n      </label>\n      <input type=range bind:value={$zoom} min=0.1 max=5 step=0.1 />\n    </section>\n\n  </div>\n\n  {:else if currentMenu === \"xmlEditor\"}\n\n  <div class=\"lower-panel xml p-2 xl:p-4\" transition:slide={{duration: 100}}>\n    \n    <XmlEditor />\n\n  </div>\n\n  {:else if currentMenu === \"help\"}\n\n  <div class=\"lower-panel p-2 xl:p-4\" transition:slide={{duration: 100}}>\n    \n    <HelpMenu />\n\n  </div>\n\n  {:else if currentMenu === \"language\"}\n\n  <div class=\"lower-panel p-2 xl:p-4\" transition:slide={{duration: 100}}>\n    \n    <LanguageMenu />\n\n  </div>\n\n  {/if}\n\n\n</header>\n\n\n<style lang=\"text/postcss\">label,section{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}label{-webkit-transition:.2s;transition:.2s;-webkit-box-pack:justify;justify-content:space-between}label+label{margin-left:1rem}label>span,small-text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;margin-right:.75rem;font-size:.875rem;color:#e2e8f0}.lower-panel{-webkit-transform:translateY(100%);transform:translateY(100%);bottom:1px;position:absolute;z-index:20;box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem;color:#e2e8f0;white-space:nowrap;background-color:#2b3e50}.lower-panel.xml{left:0;right:0;width:100%;border-radius:0}.icon{-webkit-transition:50ms;transition:50ms;display:-webkit-box;display:flex}.icon.active{-webkit-transform:scale(1.3);transform:scale(1.3)}\n/*# sourceMappingURL=src/components/ui/Header.svelte.map */</style>",
    "\n<script>\n  import { slide, fly } from \"svelte/transition\"\n\n  import SelectionMenu from \"/components/ui/SelectionMenu.svelte\"\n  import MapSettingsMenu from \"/components/ui/MapSettingsMenu.svelte\"\n\n  import { selection } from \"/stores/stores.js\"\n\n</script>\n\n\n\n<div class=\"relative w-64 text-white z-10 flex-shrink-0\"> \n  <MapSettingsMenu />\n\n  {#if $selection.length}\n\n  <div transition:fly={{ x: 500, duration: 80 }} class=\"flying\">\n    <SelectionMenu /> \n  </div>\n\n  {/if}\n</div>\n\n<style lang=\"test/postcss\">.flying{padding:1rem;background-color:#4a5568;color:#fff;z-index:20;overflow:auto;width:100%;height:100%;position:absolute;top:0;right:0;bottom:0}\n/*# sourceMappingURL=src/components/ui/MainPanel.svelte.map */</style>",
    "<script>\n\n  import { onMount, tick } from \"svelte\"\n  import { fade } from \"svelte/transition\"\n\n  import { randInt } from \"/utils.js\"\n\n  import { encodeObjectData, encodeMapData, rotate } from \"/xml-utils.js\"\n  import { \n    platforms, decorations, shamanObjects, joints, jointPalette,\n    settings, selection, creation, visibility, highlightedObject, buildXML,\n    showGameGUI, showMapBorder, gridSettings, zoom } from \"/stores/stores.js\"\n  import Platform from \"/components/scene/Platform.svelte\"\n  import Decoration from \"/components/scene/Decoration.svelte\"\n  import ShamanObject from \"/components/scene/ShamanObject.svelte\"\n  import Joint from \"/components/scene/Joint.svelte\"\n  import Footer from \"/components/scene/Footer.svelte\"\n\n  import SvgImage from \"/components/common/SvgImage.svelte\"\n\n\n  $: visiblePlatforms = $visibility.grounds ? $platforms : []\n  $: visibleShamanObjects = $visibility.objects ? $shamanObjects : []\n  $: visibleDecorations = computeVisibleDecorations($decorations, $visibility)\n  $: visibleJoints = computeVisibleJoints($joints, $visibility)\n  function computeVisibleDecorations(list, {decorations, basic}) {\n    let r = list\n    if(!decorations) r = r.filter(o => o.name !== \"P\")\n    if(!basic) r = r.filter(o => o.name === \"P\")\n    return r\n  }\n  function computeVisibleJoints(list, {joints}) {\n    if(joints) {\n      return list.filter(o => o._color !== undefined)\n    }\n    return []\n  }\n\n  $: visibleBackgroundImages = $visibility.backgroundImages ? $settings._backgroundImages : []\n  $: visibleForegroundImages = $visibility.foregroundImages ? $settings._foregroundImages : []\n  $: visibleDisappearingImages = $visibility.disappearingImages ? $settings._disappearingImages : []\n\n  $: objects = [...visiblePlatforms, ...visibleDecorations, ...visibleShamanObjects, ...visibleJoints]\n\n  let containerElement\n\n  let svgWidth = 0, svgHeight = 0\n  let pan = { x: 0, y: 0 }\n  let mouse = { x: 0, y: 0 }\n\n  function sceneToGameCoordinates({ x, y }) {\n    return {\n      x: (1/$zoom)*(x - pan.x),\n      y: (1/$zoom)*(y - pan.y),\n    }\n  }\n  $: mouseGame = sceneToGameCoordinates(mouse)\n\n  function resetPan() {\n    pan.x = Math.round( svgWidth/2 - $settings._width/2 )\n    pan.y = Math.round( svgHeight/2 - $settings._height/2 )\n  }\n  function centerPanOnMouse() {\n    pan.x = -(mouseGame.x*$zoom - mouse.x)\n    pan.y = -(mouseGame.y*$zoom - mouse.y)\n  }\n  onMount(async () => {\n    await tick()\n    resetPan()\n  })\n\n  $: playerView = getPlayerView($settings, $zoom, pan, svgWidth, svgHeight)\n  function getPlayerView() {\n    let {x,y} = sceneToGameCoordinates({ x: svgWidth/2, y: svgHeight/2 })\n    return { \n      x: Math.max(0, Math.min($settings._width-800, x-400)),\n      y: Math.max(0, Math.min($settings._height-400, y-200)),\n    }\n  }\n\n  let spaceKeyDown = false\n  let shiftKeyDown = false\n  let ctrlKeyDown = false\n\n  function onWindowKeydown(e) {\n    let {shiftKey, ctrlKey, key} = e\n    \n    if(shiftKey) {\n      shiftKeyDown = true\n    }\n    if(ctrlKey) {\n      ctrlKeyDown = true\n    }\n    if(key === \" \") {\n      spaceKeyDown = true\n      e.preventDefault()\n    }\n    if(key === \"Escape\") {\n      if($creation) {\n        $creation = null\n      }\n      else if ($selection.length) {\n        $selection = []\n      }\n      else if (Math.abs($zoom - 1) >= 0.0001) {\n        $zoom = 1\n        centerPanOnMouse()\n      }\n      else {\n        resetPan()\n      }\n    }\n  }\n\n  function onKeydown(e) {\n    let {shiftKey, ctrlKey, altKey, key} = e\n    key = key.toLowerCase()\n\n    // console.log(\"onKeyDown\", e.key, e)\n    \n    if(key.startsWith(\"arrow\")) {\n      let dx = key === \"arrowleft\" ? -1 : key === \"arrowright\" ? 1 : 0\n      let dy = key === \"arrowup\" ? -1 : key === \"arrowdown\" ? 1 : 0\n      if(shiftKey) {\n        dx *= 10\n        dy *= 10\n      }\n      if(ctrlKey) {\n        dx *= 100\n        dy *= 100\n      }\n      if(altKey) {\n        e.preventDefault()\n        selection.resize(dx, -dy)\n      }\n      else {\n        selection.move(dx, dy)\n      }\n    }\n    else if(key === \"delete\" && $selection.length) {\n      selection.remove()\n    }\n    else if(key === \"d\" && $selection.length) {\n      selection.duplicate()\n    }\n    else if(key === \"a\" && ctrlKey) {\n      $creation = null\n      $selection = shiftKey ? [] : objects\n      e.preventDefault()\n    }\n    else if(key === \"x\" && ctrlKey && $selection.length) {\n      selection.cut()\n      e.preventDefault()\n    }\n    else if(key === \"c\" && ctrlKey && $selection.length) {\n      selection.copy()\n      e.preventDefault()\n    }\n    else if(key === \"v\" && ctrlKey) {\n      selection.paste()\n      e.preventDefault()\n    }\n    else if(key === \"g\" && $selection.length) {\n      selection.snapToGrid()\n    }\n  }\n\n  function onWindowKeyup({key}) {\n    if(key === \"Shift\") {\n      shiftKeyDown = false\n    }\n    if(key === \"Control\") {\n      ctrlKeyDown = false\n    }\n    if(key === \" \") {\n      spaceKeyDown = false\n    } \n  }\n\n  let mousedownInfo = null\n\n  function getSceneCoordinates(e) {\n    return {\n      x: e.clientX - containerElement.offsetLeft,\n      y: e.clientY - containerElement.offsetTop,\n    }\n  }\n\n  function onBackgroundMousedown(e) {\n    if(spaceKeyDown) {\n      mousedownInfo = {}\n      mousedownInfo.start = getSceneCoordinates(e)\n      mousedownInfo.last = mousedownInfo.start\n      mousedownInfo.type = \"pan\"\n    }\n    else if($creation && $creation.objectType !== \"platform\") {\n      if($creation.objectType === \"joint\") {\n        creation.handleJointCreation(mouseGame)\n      }\n      else {\n        creation.create(mouseGame)\n      }\n    }\n    else {\n      if(!e.shiftKey) {\n        $selection = []\n      }\n      mousedownInfo = {}\n      mousedownInfo.start = getSceneCoordinates(e)\n      mousedownInfo.last = mousedownInfo.start\n      mousedownInfo.type = \"select\"\n      mousedownInfo.previousSelection = $selection.slice()\n    }\n  }\n\n  function onObjectMousedown(e, object) {\n    if(spaceKeyDown) return\n\n    e.stopPropagation()\n\n    let isSelected = $selection.includes(object)\n    if(e.shiftKey) {\n      if(isSelected) {\n        $selection = $selection.filter(p => p !== object)\n      }\n      else {\n        $selection = [...$selection, object]\n      }\n    }\n    else {\n      if(!isSelected) {\n        $selection = [object]\n      }\n      mousedownInfo = {}\n      mousedownInfo.start = getSceneCoordinates(e)\n      mousedownInfo.last = mousedownInfo.start\n      mousedownInfo.type = \"move\"\n    }\n    \n  }\n\n  function onImageMousedown(e, imgInfo) {\n    if(spaceKeyDown) return\n\n    e.stopPropagation()\n\n    mousedownInfo = {}\n    mousedownInfo.start = getSceneCoordinates(e)\n    mousedownInfo.last = mousedownInfo.start\n    mousedownInfo.type = \"move\"\n    mousedownInfo.imgInfo = imgInfo\n    \n  }\n\n  function onWindowMousemove(e) {\n    mouse = getSceneCoordinates(e)\n\n    if(!mousedownInfo) return\n\n    if(mousedownInfo.type === \"pan\") {\n      pan.x += mouse.x - mousedownInfo.last.x\n      pan.y += mouse.y - mousedownInfo.last.y\n    }\n    else if(mousedownInfo.type === \"move\") {\n      let dx = (1/$zoom)*(mouse.x - mousedownInfo.last.x)\n      let dy = (1/$zoom)*(mouse.y - mousedownInfo.last.y)\n      if(mousedownInfo.imgInfo) {\n        let img = $settings[mousedownInfo.imgInfo.which][mousedownInfo.imgInfo.index]\n        img.x += dx\n        img.y += dy\n        encodeMapData($settings)\n        buildXML()\n        settings.update(v => v)\n      }\n      else {\n        selection.move(dx, dy)\n      }\n    }\n    else if(mousedownInfo.type === \"select\" && !$creation) {\n      let { x1, y1, x2, y2 } = selectionArea\n      let inSelectionArea = objects.filter(object => {\n        let bb = object._boundingBox\n        return bb.x1+object._x >= x1 && bb.x2+object._x <= x2\n            && bb.y1+object._y >= y1 && bb.y2+object._y <= y2\n      })\n      $selection = [...new Set([...inSelectionArea, ...mousedownInfo.previousSelection])]\n    }\n\n    mousedownInfo.last = mouse\n\n  }\n\n  function onWindowMouseup() {\n    if($creation && $creation.objectType === \"platform\" \n    && mousedownInfo && mousedownInfo.type === \"select\") {\n      let width = selectionArea.x2 - selectionArea.x1\n      let height = selectionArea.y2 - selectionArea.y1\n      creation.create({\n        x: selectionArea.x1 + width/2,\n        y: selectionArea.y1 + height/2,\n        width, height,\n      }, mouse)\n    }\n\n    mousedownInfo = null\n  }\n\n  function onWindowMouseleave() {\n    mousedownInfo = null\n  }\n\n  let selectionArea = null\n  $: if(mousedownInfo && mousedownInfo.type === \"select\") {\n    let [x1, x2] = [mousedownInfo.start.x, mousedownInfo.last.x]\n                    .sort((a,b) => a-b)\n                    .map(v => (1/$zoom)*(v - pan.x))\n    let [y1, y2] = [mousedownInfo.start.y, mousedownInfo.last.y]\n                    .sort((a,b) => a-b)\n                    .map(v => (1/$zoom)*(v - pan.y))\n    selectionArea = { x1, y1, x2, y2 }\n  } else selectionArea = null\n\n\n  function onWheel(e) {\n    e.preventDefault()\n    if(e.ctrlKey) {\n      let dz = - Math.sign(e.deltaY) * 0.1\n      $zoom = $zoom + dz\n      centerPanOnMouse()\n    }\n    else {\n      let factor = e.altKey ? 1 : 10\n      let da = Math.sign(e.deltaY) * factor\n      if($creation && $creation.objectType === \"shamanObject\") {\n        creation.rotate(da)\n      }\n      else if($creation && $creation.objectType === \"joint\") {\n        let brushIdx = $creation.type\n        let thicknessDelta = -Math.sign(e.deltaY)\n        $jointPalette[brushIdx].thickness = Math.max(1, Math.min(260, $jointPalette[brushIdx].thickness + thicknessDelta))\n        creation.setFromType(\"joint\", brushIdx)\n      }\n      else if($selection.length) {\n        if(e.shiftKey) {\n          let {x,y} = mouseGame\n          selection.rotate(da, x, y)\n        }\n        else {\n          selection.rotate(da)\n        }\n      }\n    }\n    \n  }\n\n  function onBlur() {\n    console.log(\"blur\")\n    ctrlKeyDown = false\n    shiftKeyDown = false\n  }\n\n\n</script>\n\n<svelte:window \n  on:keydown={onWindowKeydown}\n  on:keyup={onWindowKeyup} \n  on:mousemove={onWindowMousemove}\n  on:mouseup={onWindowMouseup}\n  on:mouseleave={onWindowMouseleave}\n/>\n\n<div class=\"flex-grow bg-tfm-blue outline-none\" \n  bind:this={containerElement}\n  on:wheel={onWheel}\n  on:mousedown={onBackgroundMousedown}  \n  on:blur={onBlur}\n  on:keydown={onKeydown} tabindex=\"-1\"\n  bind:clientWidth={svgWidth} bind:clientHeight={svgHeight}\n>\n  <svg class=\"w-full h-full\" >\n  \n    <defs>\n      <pattern id=\"grid\" patternUnits=\"userSpaceOnUse\"\n          width={$gridSettings.width*$zoom} height={$gridSettings.height*$zoom} x={pan.x} y={pan.y}\n      >\n        <path d={`M ${$gridSettings.width*$zoom} 0 L 0 0 0 ${$gridSettings.height*$zoom}`} \n          fill=\"none\" stroke={\"#\"+$gridSettings.color} stroke-width=\"1\"\n        />\n      </pattern>\n    </defs>\n    {#if $gridSettings.enabled}\n    <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />\n    {/if}\n\n\n    <g transform=\"translate({pan.x}, {pan.y}) scale({$zoom})\">\n\n      {#each visibleBackgroundImages as {x,y,fullUrl,index}}}\n      <SvgImage class=\"cursor-pointer\"\n        x={x} y={y}\n        href={fullUrl}\n        on:mousedown={e => onImageMousedown(e, { which: \"_backgroundImages\", index })}\n      />\n      {/each}\n\n      {#if $settings._backgroundImageId != -1}\n      <image x=\"0\" y=\"0\" \n            width={$settings._width} height={$settings._height}\n            href=\"dist/backgrounds/{\n              $settings._backgroundImageId == -2 ?\n                [0,1,2,3,7,8][randInt(0,5)] :\n                $settings._backgroundImageId\n            }.svg\"\n            on:mousedown|preventDefault\n      />\n      {/if}\n\n      {#if $showMapBorder}\n      <rect x=\"0\" y=\"0\" \n            width={$settings._width} height={$settings._height}\n            class=\"mapBorder\"\n      />\n      {/if}\n\n\n      {#each visibleDecorations.filter(o => !o._foreground) as decoration}\n        <Decoration decoration={decoration} active={$selection.includes(decoration)}\n          on:mousedown={e => onObjectMousedown(e, decoration)}\n        />\n      {/each}\n\n      {#each visibleJoints.filter(o => !o._foreground) as joint}\n        <Joint joint={joint} active={$selection.includes(joint)}\n          on:mousedown={e => onObjectMousedown(e, joint)}\n        />\n      {/each}\n\n      {#each visiblePlatforms.filter(o => !o._foreground) as platform}\n        <Platform platform={platform} active={$selection.includes(platform)} \n          on:mousedown={e => onObjectMousedown(e, platform)}\n        />\n      {/each}\n\n      {#each visibleShamanObjects.filter(o => !o._isNail) as shamanObject}\n        <ShamanObject shamanObject={shamanObject} active={$selection.includes(shamanObject)}\n          on:mousedown={e => onObjectMousedown(e, shamanObject)}\n        />\n      {/each}\n\n      {#each visibleForegroundImages as {x,y,fullUrl,index}}}\n      <SvgImage class=\"cursor-pointer\"\n        x={x} y={y}\n        href={fullUrl}\n        on:mousedown={e => onImageMousedown(e, { which: \"_foregroundImages\", index })}\n      />\n      {/each}\n\n      {#each visibleDisappearingImages as data}\n      <g>\n        <SvgImage class=\"cursor-pointer\"\n          x={data.x} y={data.y}\n          href={data.fullUrl}\n          on:mousedown={e => onImageMousedown(e, { which: \"_disappearingImages\", index: data.index })}\n        />\n        {#if $highlightedObject === data.index}\n        <rect class=\"selectionArea\" fill=\"none\" \n          x={data.rx} y={data.ry}\n          width={data.rw} height={data.rh}\n        />\n        {/if}\n      </g>\n      {/each}\n\n\n      {#each visibleDecorations.filter(o => o._foreground) as decoration}\n        <Decoration decoration={decoration} active={$selection.includes(decoration)}\n          on:mousedown={e => onObjectMousedown(e, decoration)}\n        />\n      {/each}\n\n      {#each visibleJoints.filter(o => o._foreground) as joint}\n        <Joint joint={joint} active={$selection.includes(joint)}\n          on:mousedown={e => onObjectMousedown(e, joint)}\n        />\n      {/each}\n\n      {#if $settings._miceSpawn.type === \"multiple\" && $visibility.basic}\n      <g class=\"pointer-events-none\">\n        {#each $settings._miceSpawn.positions as {x,y}}\n        <Decoration decoration={{ name: \"DS\", _type: \"DS\", _x:x, _y:y, }} />\n        {/each}\n      </g>\n      {/if}\n\n      {#each visiblePlatforms.filter(o => o._foreground) as platform}\n        <Platform platform={platform} active={$selection.includes(platform)} \n          on:mousedown={e => onObjectMousedown(e, platform)}\n        />\n      {/each}\n\n      {#each visibleShamanObjects.filter(o => o._isNail) as shamanObject}\n        <ShamanObject shamanObject={shamanObject} active={$selection.includes(shamanObject)}\n          on:mousedown={e => onObjectMousedown(e, shamanObject)}\n        />\n      {/each}\n\n\n      {#if $showGameGUI}\n      <g class=\"playerView\" transform=\"translate({playerView.x}, {playerView.y})\">\n        <rect width=\"800\" height=\"20\" />\n        <rect y=\"400\" width=\"800\" height=\"200\" />\n      </g>\n      {/if}\n\n      {#if selectionArea}\n      <g >\n        <rect\n          class=\"selectionArea\"\n          x={selectionArea.x1} y={selectionArea.y1}\n          width={selectionArea.x2 - selectionArea.x1} \n          height={selectionArea.y2 - selectionArea.y1} />\n      </g>\n      {/if}\n\n      {#if $creation}\n      <g class=\"\" transform={`translate(${mouseGame.x}, ${mouseGame.y})`}>\n        {#if $creation.objectType === \"platform\"}\n          <g transform=\"translate(10, 20) scale(0.5)\">\n            <Platform platform={$creation.object}/>\n          </g>\n        {:else if $creation.objectType === \"decoration\"}\n          <Decoration decoration={$creation.object}/>\n        {:else if $creation.objectType === \"shamanObject\"}\n          <ShamanObject shamanObject={$creation.object}/>\n        {:else if $creation.objectType === \"joint\"}\n          <Joint joint={$creation.object}/>\n        {/if}\n      </g>\n      {/if}\n\n      {#if shiftKeyDown}\n      <g class=\"pointer-events-none\"\n        stroke=\"black\"\n        transform={`translate(${mouseGame.x}, ${mouseGame.y})`}\n      >\n        <line x1=\"-20\" y1=\"0\" x2=\"20\" y2=\"0\"/>\n        <line y1=\"-20\" x1=\"0\" y2=\"20\" x2=\"0\"/>\n      </g>\n      {/if}\n      \n      {#if $highlightedObject === \"miceSpawn\" && $settings._miceSpawn.type === \"random\"}          \n      <g class=\"pointer-events-none\"\n        stroke=\"white\" stroke-width=\"4\" stroke-dasharray=\"8\"\n      >\n        {#if $settings._miceSpawn.axis === \"x\"}\n          <line \n            x1={0} y1={$settings._miceSpawn.value}\n            x2={$settings._width} y2={$settings._miceSpawn.value}\n          />\n        {:else}\n          <line \n            x1={$settings._miceSpawn.value} y1={0} \n            x2={$settings._miceSpawn.value} y2={$settings._height} \n          />\n        {/if}\n      </g>\n      {/if}\n\n    </g>\n  </svg>\n\n  {#if $creation}\n  <div class=\"absolute top-0 right-0 bottom-0 left-0 w-full h-full\"></div>\n  {/if}\n\n  <Footer position={mouseGame} {selectionArea} />\n\n</div>\n\n<style lang=\"text/postcss\">.mapBorder{fill:none;outline:4px dashed rgba(0,0,0,.2)}.playerView rect{fill:rgba(0,0,0,.2)}.playerView{pointer-events:none;width:800px;height:600px;fill:none;outline:4px solid rgba(0,0,0,.2)}.selectionArea{fill:none;stroke:none;outline-offset:-4px;outline:4px dashed hsla(0,0%,100%,.95)}\n/*# sourceMappingURL=src/components/scene/Scene.svelte.map */</style>",
    "\n<script>\n\n  import Icon from \"fa-svelte\"\n  import { faChevronUp } from \"@fortawesome/free-solid-svg-icons/faChevronUp\"\n  import { faSquare } from \"@fortawesome/free-solid-svg-icons/faSquare\"\n  import { faEye } from \"@fortawesome/free-solid-svg-icons/faEye\"\n  import { faEyeSlash } from \"@fortawesome/free-solid-svg-icons/faEyeSlash\"\n  import { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\"\n  import { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\"\n  import { faPenNib } from \"@fortawesome/free-solid-svg-icons/faPenNib\"\n\n  import { fly } from \"svelte/transition\"\n\n  import { \n    selection, creation, groundTypePicker, visibility, jointPalette, drawingData,\n    settings, platforms, decorations, shamanObjects, joints,\n    _\n  } from \"/stores/stores.js\"\n\n  import shamanObjectMetadata from \"/shamanObjectMetadata.js\"\n  import { groundTypes } from \"/xml-utils.js\"\n\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n  import ObjectPaletteMenu from \"/components/ui/ObjectPaletteMenu.svelte\"\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import ColorTextInput from \"/components/common/ColorTextInput.svelte\"\n\n  let isThin = false\n\n  let collapsed = {\n    grounds: false,\n    basic: false,\n    decorations: false,\n    objects: false,\n    joints: false,\n  }\n\n  $: tryCancelCreation(collapsed)\n\n  function tryCancelCreation() {\n    if(!$creation) return\n\n    if(collapsed.grounds && $creation.objectType === \"platform\")\n      $creation = null\n    else if(collapsed.objects && $creation.objectType === \"shamanObject\")\n      $creation = null\n    else if(collapsed.joints && $creation.objectType === \"joint\")\n      $creation = null\n    else if($creation.objectType === \"decoration\") {\n      let isCreationBasic = [\"T\",\"F\",\"DS\",\"DC\",\"DC2\"].includes($creation.type)\n      if(collapsed.basic && isCreationBasic)\n        $creation = null\n      else if(collapsed.decorations && !isCreationBasic)\n        $creation = null\n    }\n  }\n\n  $: if($groundTypePicker === true) {\n    collapsed.grounds = false\n  }\n\n\n\n  function onTileClick(objectType, type) {\n    if($groundTypePicker) {\n      groundTypePicker.pick(type)\n    }\n    else if($creation && $creation.objectType === objectType && $creation.type == type) {\n      $creation = null\n    }\n    else {\n      creation.setFromType(objectType, type)\n    }\n  }\n\n  $: dsDisabled = \n    $settings._miceSpawn.type === \"normal\" ? \n      $decorations.filter(({name}) => name === \"DS\").length > 0 \n    :\n    $settings._miceSpawn.type === \"multiple\" ? \n      true\n    :\n    $settings._miceSpawn.type === \"random\" ? \n      true\n    : \n    false\n\n  $: dcCount = $decorations.filter(({name}) => name === \"DC\").length\n  $: dc2Count = $decorations.filter(({name}) => name === \"DC2\").length\n\n  $: objectMaxCount = $settings._defilanteEnabled ? 200 : 30\n\n  $: jointCount = $joints\n                    .map(joint => (joint._type === \"VC\" && !joint._invalid) ? joint._fineness : 1)\n                    .reduce((a,b) => a+b, 0)\n\n  $: currentJointBrushIndex =\n      $creation && $creation.objectType === \"joint\"\n      ? $creation.type\n      : 0\n\n  function removeJointBrush(idx) {\n    if($creation && $creation.objectType === \"joint\") {\n      if(idx == currentJointBrushIndex) {\n        $creation = null\n      }\n      else if(idx < currentJointBrushIndex) {\n        creation.setFromType(\"joint\", currentJointBrushIndex-1)\n      }\n    }\n    $jointPalette.splice(idx,1)\n    $jointPalette = $jointPalette\n  }\n\n  function updateBrushCreation() {\n    if($creation && $creation.objectType === \"joint\") {\n      creation.setFromType(\"joint\", currentJointBrushIndex)\n    }\n  }\n\n</script>\n\n<div class=\"panel relative w-64 p-2 xl:p-4 bg-gray-700 shadow-lg text-white z-10 flex-shrink-0 flex flex-col\"\n    class:thin={isThin}\n> \n\n  <ObjectPaletteMenu which=\"basic\" title={$_(\"mice-stuff\")} bind:collapsed={collapsed.basic} max=\"40\" count={$decorations.length}>\n    <div class=\"flex flex-wrap justify-center py-1\">\n      {#each [\"F\", \"T\"] as type}\n        <div class=\"tile\" class:active={$creation && $creation.objectType === \"decoration\" && $creation.type == type}\n          on:click={() => onTileClick(\"decoration\", type)}\n        >\n          <img class=\"dim-max-40\" src={`dist/decorations/${type}.png`} alt={type}/>\n        </div>\n      {/each}\n\n      <div class=\"tile\" class:active={$creation && $creation.objectType === \"decoration\" && $creation.type == \"DS\"}\n        class:disabled={dsDisabled}\n        on:click={() => onTileClick(\"decoration\", \"DS\")}\n      >\n        <img class=\"dim-max-40\" src=\"dist/decorations/DS.png\" alt=\"DS\"/>\n      </div>\n\n      <div class=\"tile\" class:active={$creation && $creation.objectType === \"decoration\" && $creation.type == \"DC\"}\n        class:disabled={dcCount > 0}\n        on:click={() => onTileClick(\"decoration\", \"DC\")}\n      >\n        <img class=\"dim-max-40\" src=\"dist/decorations/DC.png\" alt=\"DC\"/>\n      </div>\n\n      <div class=\"tile\" class:active={$creation && $creation.objectType === \"decoration\" && $creation.type == \"DC2\"}\n        class:disabled={dcCount < 1 || dc2Count > 0}\n        on:click={() => onTileClick(\"decoration\", \"DC2\")}\n      >\n        <img class=\"dim-max-40\" src=\"dist/decorations/DC2.png\" alt=\"DC2\"/>\n      </div>\n    </div>\n  </ObjectPaletteMenu>\n\n  <ObjectPaletteMenu which=\"grounds\" title={$_(\"category-grounds\")} bind:collapsed={collapsed.grounds} \n    active={$groundTypePicker} max=\"50\" count={$platforms.length}\n  >\n    <div class=\"flex flex-wrap justify-center content-center\">\n    \n      {#each groundTypes as ground, type}\n        <div class=\"tile dim-40\" class:active={$creation && $creation.objectType === \"platform\" && $creation.type == type}\n          \n          on:click={() => onTileClick(\"platform\", type)}\n        >\n          <img class=\"rounded-sm\" src=\"dist/grounds/{ground}.png\" alt={ground}/>\n        </div>\n      {/each}\n    </div>\n  </ObjectPaletteMenu>\n\n  <ObjectPaletteMenu which=\"decorations\" title={$_(\"category-decorations\")} bind:collapsed={collapsed.decorations} grow max=\"40\" count={$decorations.length}>\n    <div class=\"scrollbox-container\">\n      <div class=\"flex flex-wrap justify-center scrollbox\">\n        {#each Array(148) as _, type}\n          <div class=\"tile dim-40\" class:active={$creation && $creation.objectType === \"decoration\" && $creation.type == type}\n            on:click={() => onTileClick(\"decoration\", type)}\n          >\n            <img class=\"dim-max-40\" src={`dist/decorations/${type}.png`} alt={type}/>\n          </div>\n        {/each}\n      </div>\n    </div>\n  </ObjectPaletteMenu>\n\n\n  <ObjectPaletteMenu which=\"objects\" title={$_(\"shaman_objects\")} bind:collapsed={collapsed.objects} grow max={objectMaxCount} count={$shamanObjects.length}>\n    <div class=\"scrollbox-container\">\n      <div class=\"flex flex-wrap justify-center scrollbox\">\n\n        {#if $settings._defilanteEnabled}\n        <div class=\"w-full flex flex-wrap justify-center\">\n          {#each Object.entries(shamanObjectMetadata).filter(([_,data]) => data.defilanteVariant) as [type, data]}\n          <div class=\"tile\" class:active={$creation && $creation.objectType === \"shamanObject\" && $creation.type == type}\n            on:click={() => onTileClick(\"shamanObject\", type)}\n          >\n            <img src=\"dist/shamanObjects/{data.defilanteVariant.sprite}\" alt={data.defilanteVariant.sprite}/>\n          </div>\n          {/each}\n        </div>\n        {/if}\n\n        {#each Object.entries(shamanObjectMetadata).filter(([_,data]) => !data.isVariant) as [type, data]}\n        <div class=\"tile\" class:active={$creation && $creation.objectType === \"shamanObject\" && $creation.type == type}\n          on:click={() => onTileClick(\"shamanObject\", type)}\n        >\n          {#if data.sprite}\n          <img src=\"dist/shamanObjects/{data.sprite}\" alt={data.sprite}/>\n          {:else}\n          <img src=\"dist/shamanObjects/{data.spritesheet}\" alt={data.sprite}\n            style=\" object-fit: none;\n                    object-position:  {-data.offset.x-(data.width-data.boundingWidth)/2 + (data.spritesheet.includes('anvils') ? 10 : 0)}px \n                                      {-data.offset.y-(data.height-data.boundingHeight)/2}px;\n                    width: {data.boundingWidth + (data.spritesheet.includes('anvils') ? 20 : 0)}px; \n                    height: {data.boundingHeight}px;\"\n          />\n          {/if}\n        </div>\n        {/each}\n\n      </div>\n    </div>\n  </ObjectPaletteMenu>\n\n  {#if !collapsed.objects && $creation && $creation.objectType === \"shamanObject\" && shamanObjectMetadata[$creation.type].variants}\n  <!-- <div  class=\"flex flex-grow\"> -->\n    <ObjectPaletteMenu title={$_(\"variants\")} noActions grow>\n      <div transition:fly={{duration:100, y: 50}} class=\"scrollbox-container\">\n        <div class=\"block text-center scrollbox\">\n\n          {#each shamanObjectMetadata[$creation.type].variants.map(type => [type, shamanObjectMetadata[type]]) as [type, data]}\n          <div class=\"tile\" class:active={$creation && $creation.objectType === \"shamanObject\" && $creation.type == type}\n            style=\"display: inline-block\"\n            on:click={() => onTileClick(\"shamanObject\", type)}\n          >\n            {#if data.sprite}\n            <img src=\"dist/shamanObjects/{data.sprite}\" alt={data.sprite}/>\n            {:else}\n            <img src=\"dist/shamanObjects/{data.spritesheet}\" alt={data.sprite}\n              style=\" object-fit: none;\n                      object-position:  {-data.offset.x-(data.width-data.boundingWidth)/2 + (data.spritesheet.includes('anvils') ? 10 : 0)}px \n                                        {-data.offset.y-(data.height-data.boundingHeight)/2}px;\n                      width: {data.boundingWidth + (data.spritesheet.includes('anvils') ? 20 : 0)}px; \n                      height: {data.boundingHeight}px;\"\n            />\n            {/if}\n          </div>\n          {/each}\n          \n        </div>\n      </div>\n    </ObjectPaletteMenu>\n  <!-- </div> -->\n  {/if}\n\n  <ObjectPaletteMenu which=\"joints\" title={$_(\"category-lines\")} bind:collapsed={collapsed.joints} max=\"500\" count={jointCount}>\n    <div class=\"flex flex-wrap justify-center\">\n\n      <div class=\"w-full pt-2\">\n        <div class=\"flex flex-no-wrap\">\n          <label class=\"flex flex-no-wrap justify-between items-center\">\n            <span class=\"pen-nib\" class:pen-nib-active={$drawingData.curveToolEnabled} > \n              <Icon icon={faPenNib} /> \n            </span>\n            <div class=\"hidden\">\n              <input type=\"checkbox\" bind:checked={$drawingData.curveToolEnabled} on:change={updateBrushCreation} />\n            </div>\n          </label>\n          <div class=\"mr-2\"></div>\n          <label class=\"flex flex-no-wrap justify-between items-center\" class:opacity-75={!$drawingData.curveToolEnabled} >\n            <span class=\"whitespace-no-wrap text-xs pr-2\">Fineness</span>\n            <TextInput number bind:value={$drawingData.curveToolFineness} on:input={updateBrushCreation} />\n          </label>\n        </div>\n      </div>\n\n      <div class=\"w-full py-2\">\n        <div class=\"flex flex-no-wrap\">\n          <label class=\"flex flex-no-wrap justify-between items-center\">\n            <span class=\"whitespace-no-wrap text-xs pr-2\">{$_(\"line-width\")}</span>\n            <TextInput number bind:value={$jointPalette[currentJointBrushIndex].thickness} on:input={updateBrushCreation} />\n          </label>\n          <div class=\"mr-2\"></div>\n          <label class=\"flex flex-no-wrap justify-between items-center\">\n            <span class=\"whitespace-no-wrap text-xs pr-2\">{$_(\"color\")}</span>\n            <!--<div class=\"p-2 mr-2 shadow rounded cursor-pointer\" style=\"background: #{$jointPalette[currentJointBrushIndex].color}\"></div>-->\n            <ColorTextInput bind:value={$jointPalette[currentJointBrushIndex].color} on:input={updateBrushCreation} />\n          </label>\n        </div>\n        <div class=\"flex flex-no-wrap\">\n          <label class=\"flex flex-no-wrap items-center\">\n            <span class=\"whitespace-no-wrap text-xs pr-2\">{$_(\"foreground\")}</span>\n            <input type=\"checkbox\" bind:checked={$jointPalette[currentJointBrushIndex].foreground} on:change={updateBrushCreation} />\n          </label>\n          <div class=\"mr-3\"></div>\n          <label class=\"flex flex-no-wrap justify-between items-center\">\n            <span class=\"whitespace-no-wrap text-xs pr-2\">{$_(\"opacity\")}</span>\n            <TextInput number bind:value={$jointPalette[currentJointBrushIndex].opacity} on:input={updateBrushCreation} />\n          </label>\n        </div>\n      </div>\n\n      {#each $jointPalette as jointStyle, idx}\n        <div class=\"tile outline-outside dim-40 checkered rounded-sm overflow-hidden relative\" \n          class:active={$creation && $creation.objectType === \"joint\" && $creation.type == idx}\n          on:click={() => onTileClick(\"joint\", idx)}\n        >\n          <div class=\"brush-preview\" \n            style=\"background: #{jointStyle.color}; opacity: {jointStyle.opacity}; width: {jointStyle.thickness}px; height: {jointStyle.thickness}px;\"\n          ></div>\n          {#if idx > 0}\n          <div class=\"brush-remove\"\n            on:click|preventDefault|stopPropagation={() => removeJointBrush(idx)}\n          ><Icon icon={faTimes} />\n          </div>\n          {/if}\n        </div>\n      {/each}\n      <div class=\"tile dim-40 rounded-sm active opacity-75\"\n        on:click={() => $jointPalette = [...$jointPalette, {...$jointPalette[currentJointBrushIndex]}]}\n      >\n        <Icon icon={faPlus} />\n      </div>\n\n    </div>\n  </ObjectPaletteMenu>\n\n  <div class=\"thinButton\"\n    on:click={() => isThin = !isThin}\n  >\n    <div class=\"chevron\" class:flipped={isThin}>\n      <div>\n        <Icon icon={faChevronUp} />\n      </div>\n    </div>\n  </div>\n\n\n</div>\n\n<style lang=\"text/postcss\">img{pointer-events:none}.thin{width:8rem!important;padding:.5rem!important}.scrollbox-container{-webkit-box-flex:1;flex-grow:1;overflow:hidden;position:relative}.scrollbox{overflow:auto;top:0;left:0;padding-top:.25rem;padding-bottom:.25rem}.object-variants,.scrollbox{position:absolute;bottom:0;right:0}.object-variants{background-color:#4a5568;padding:1rem;box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);max-height:100%;-webkit-transform:translateX(100%);transform:translateX(100%)}.dim-40{width:40px;height:40px}.dim-max-40{max-width:40px;max-height:40px}.tile{margin:.25rem;cursor:pointer;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;-webkit-transition:-webkit-filter 40ms;transition:-webkit-filter 40ms;transition:filter 40ms;transition:filter 40ms,-webkit-filter 40ms}.tile.active{outline-width:4px;outline-offset:-4px;outline-style:dashed;outline-color:#fff}.tile:hover{-webkit-filter:brightness(1.15) drop-shadow(0 3px 5px rgba(0,0,0,.2));filter:brightness(1.15) drop-shadow(0 3px 5px rgba(0,0,0,.2))}.tile.disabled{pointer-events:none;opacity:.5}.tile.outline-outside{outline-offset:-1px}.thinButton{position:absolute;right:0;top:50%;bottom:50%;z-index:-1;opacity:0;-webkit-transition:80ms;transition:80ms;pointer-events:none}.panel:hover .thinButton{opacity:1;-webkit-transform:translate(50%);transform:translate(50%);pointer-events:all;cursor:pointer}.chevron{border-radius:9999px;padding:1rem .5rem 1rem 2rem;background-color:#4a5568;margin-left:-.75rem}.chevron>*{-webkit-transition:-webkit-transform 80ms;transition:-webkit-transform 80ms;transition:transform 80ms;transition:transform 80ms,-webkit-transform 80ms;-webkit-transform-origin:center;transform-origin:center;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.chevron.flipped>*{-webkit-transform:rotate(-90deg) rotateX(180deg);transform:rotate(-90deg) rotateX(180deg)}.checkered{background-color:#6a7495}.brush-preview{border-radius:9999px;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.brush-remove{position:absolute;color:#e53e3e;font-size:.875rem;top:-6px;right:0;-webkit-transition:opacity 70ms;transition:opacity 70ms;opacity:0}.checkered:hover .brush-remove{opacity:1}.pen-nib{font-size:1.125rem;color:#edf2f7;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;opacity:.8;width:30px;height:30px;text-align:center;cursor:pointer}.pen-nib:hover{opacity:1}.pen-nib-active{color:#68d391;outline-color:#fff;outline-style:dashed}\n/*# sourceMappingURL=src/components/ui/ObjectPalette.svelte.map */</style>",
    "<svg\r\n  aria-hidden=\"true\"\r\n  class=\"{classes}\"\r\n  role=\"img\"\r\n  xmlns=\"http://www.w3.org/2000/svg\"\r\n  viewBox=\"{viewBox}\"\r\n>\r\n  <path fill=\"currentColor\" d=\"{path}\" />\r\n</svg>\r\n<script>\r\n  export let icon;\r\n\r\n  let path = [];\r\n  let classes = \"\";\r\n  let viewBox = \"\";\r\n\r\n  $: viewBox = \"0 0 \" + icon.icon[0] + \" \" + icon.icon[1];\r\n\r\n  $: classes = \"fa-svelte \" + ($$props.class ? $$props.class : \"\");\r\n\r\n  $: path = icon.icon[4];\r\n</script>\r\n\r\n<style>.fa-svelte{width:1em;height:1em;overflow:visible;display:inline-block}\n/*# sourceMappingURL=node_modules/fa-svelte/src/Icon.svelte.map */</style>",
    "\n<script>\n  import { tick } from \"svelte\"\n\n  export let value = \"\"\n  export let disabled = false\n  export let center = false\n\n  export let placeholder = \"\"\n  export let sub = \"\"\n\n  export let number = false\n\n\n\n  let currentValue\n\n  let locked = false\n  function lock() {\n    locked = true\n  }\n  function unlock() {\n    locked = false\n  }\n  function pullValue() {\n    if(value !== currentValue)\n      currentValue = value\n  }\n  $: if(!locked) pullValue(value)\n\n  function getCurrentValue() {\n    if(number) {\n      let float = parseFloat(currentValue)\n      return isNaN(float) ? undefined : float\n    }\n    return currentValue\n  }\n\n  $: exportedValue = getCurrentValue(currentValue)\n  $: if(exportedValue !== undefined) value = exportedValue\n\n\n  $: valueIsNumber = !isNaN(parseFloat(currentValue))\n\n\n  let inputElement\n\n  async function onKeydown(e) {\n    if(!number) return\n    if(!valueIsNumber) return\n    if(!(e.key === \"ArrowUp\" || e.key === \"ArrowDown\")) return\n    e.preventDefault()\n    let delta = e.key === \"ArrowUp\" ? 1 : -1\n    let factor = e.ctrlKey ? 100 : e.shiftKey ? 10 : e.altKey ? 0.1 : 1\n    currentValue = parseFloat((parseFloat(currentValue) + delta*factor).toFixed(6))\n    await tick()\n    inputElement.dispatchEvent(new Event(\"input\"))\n  }\n</script>\n\n<div class=\"material-input\" class:disabled={disabled} >\n  <input type=\"text\" disabled={disabled} \n    placeholder={placeholder}\n    class:text-center={center}\n    on:focus={lock} on:blur={unlock} on:change={pullValue} \n    on:focus on:blur on:input on:change on:click on:mousedown on:mouseup\n    bind:this={inputElement} bind:value={currentValue}\n    on:keydown={onKeydown} \n  />\n  {#if sub}\n  <span class=\"absolute top-0 right-0 mr-1 text-xs text-gray-400 italic uptop\">\n    {sub}\n  </span>\n  {/if}\n</div>\n\n<style lang=\"text/postcss\">.uptop{-webkit-transform:translateY(-100%);transform:translateY(-100%);line-height:.8rem}\n/*# sourceMappingURL=src/components/common/TextInput.svelte.map */</style>",
    "<script>\n\n  export let disabled = false\n  // export let className\n  \n</script>\n\n<button on:click\n  disabled={disabled}\n  class=\"text-white space border-none outline-none bg-blue-600 rounded-sm select-none {$$props.class || ''}\"\n>\n  <slot></slot>\n</button>\n\n<style type=\"text/postcss\">.space{padding:.25rem .75rem}button[disabled]{opacity:.6;cursor:not-allowed}button:not([disabled]):hover{background-color:#63b3ed}\n/*# sourceMappingURL=src/components/common/Button.svelte.map */</style>\n",
    "\n<script>\n\n  import { fly } from \"svelte/transition\"\n\n  export let active\n\n  export let title = \"Tooltip\"\n  export let inline = false\n  export let noStyle = false\n  export let noBorder = false\n\n  export let top = false\n  export let bottom = false\n  export let left = false\n  export let right = false\n  export let start = false\n  export let end = false\n\n  left || right || top || (bottom = true)\n\n  let hovering = false\n  \n  $: visible = active === true ? true : active === false ? false : hovering\n\n  $: flyDirectionOptions =\n    left    ? { x:  10 } :\n    right   ? { x: -10 } :\n    top     ? { y:  10 } :\n    bottom  ? { y: -10 } : {}\n  $: flyOptions = {\n    ...flyDirectionOptions,\n    duration: 150,\n  }\n\n  let targetElement\n  let tooltipElement\n\n  $: checkTooltipElement(tooltipElement)\n  function checkTooltipElement(el) {\n    if(!el) return\n    let bbox = el.getBoundingClientRect()\n    if(bbox.top < 0 && top) {\n      top = false\n      bottom = true\n    }\n    if(bbox.bottom > document.body.offsetHeight && bottom) {\n      bottom = false\n      top = true\n    }\n    if(bbox.left < 0 && left) {\n      left = false\n      right = true\n    }\n    if(bbox.right > document.body.offsetWidth && right) {\n      right = false\n      left = true\n    }\n  }\n\n</script>\n\n<div class=\"relative\" class:inline-block={inline} \n  on:mouseenter={() => hovering = true} \n  on:mouseleave={() => hovering = false} \n  bind:this={targetElement}\n>\n  <slot></slot>\n  {#if visible}\n  <div class=\"tooltip\" class:border={!noBorder} class:top class:bottom class:left class:right class:start class:end\n    transition:fly={flyOptions}\n    bind:this={tooltipElement}\n  >\n    <div class:inner={!noStyle}>\n      <slot name=\"tooltip\">\n        <span class=\" pointer-events-all whitespace-no-wrap\">{title}</span>\n      </slot>\n    </div>\n  </div>\n  {/if}\n</div>\n\n\n\n<style lang=\"text/postcss\">.tooltip{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;z-index:30}.tooltip.border{border:5px solid transparent}.inner{border-width:1px;box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);border-radius:.125rem;padding:.25rem .5rem;color:#f7fafc;font-size:.75rem;background:rgba(0,0,0,.8);border-color:#000}.tooltip.bottom{bottom:0;-webkit-transform:translateY(100%);transform:translateY(100%)}.tooltip.top{top:0;-webkit-transform:translateY(-100%);transform:translateY(-100%)}.tooltip.bottom:not(.start):not(.end){left:50%;-webkit-transform:translateY(100%) translateX(-50%);transform:translateY(100%) translateX(-50%)}.tooltip.top:not(.start):not(.end){left:50%;-webkit-transform:translateY(-100%) translateX(-50%);transform:translateY(-100%) translateX(-50%)}.tooltip.bottom.start,.tooltip.top.start{left:0;border-left:none}.tooltip.bottom.end,.tooltip.top.end{right:0;border-right:0}.tooltip.left{left:0;-webkit-transform:translateX(-100%);transform:translateX(-100%)}.tooltip.right{right:0;-webkit-transform:translateX(100%);transform:translateX(100%)}.tooltip.left:not(.start):not(.end){top:50%;-webkit-transform:translateX(-100%) translateY(-50%);transform:translateX(-100%) translateY(-50%)}.tooltip.right:not(.start):not(.end){top:50%;-webkit-transform:translateX(100%) translateY(-50%);transform:translateX(100%) translateY(-50%)}.tooltip.left.start,.tooltip.right.start{top:0;border-top:none}.tooltip.left.end,.tooltip.right.end{bottom:0;border-bottom:none}\n/*# sourceMappingURL=src/components/common/Tooltip.svelte.map */</style>",
    "\n<script>\n\n  import { slide, fly } from \"svelte/transition\"\n\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import ColorTextInput from \"/components/common/ColorTextInput.svelte\"\n\n  import { \n    highQuality, parkour, showGameGUI, showMapBorder, showInvisibleGrounds, gridSettings, _\n  } from \"/stores/stores.js\"\n\n</script>\n\n\n<div class=\"flex\">\n\n  <div class=\"flex-grow flex flex-col\">\n\n    <section>\n      <label class=\"flex items-center\">\n        <input type=\"checkbox\" bind:checked={$highQuality}/>\n        <span class=\"text-sm gray-200 ml-2\">{$_(\"high-resolution\")}</span>\n      </label>\n    </section>\n\n    <div class=\"mb-2\"></div>\n\n    <section>\n      <label class=\"flex items-center\">\n        <input type=\"checkbox\" bind:checked={$showGameGUI}/>\n        <span class=\"text-sm gray-200 ml-2\">{$_(\"show-game-gui\")}</span>\n      </label>\n    </section>\n    <section>\n      <label class=\"flex items-center\">\n        <input type=\"checkbox\" bind:checked={$showMapBorder}/>\n        <span class=\"text-sm gray-200 ml-2\">{$_(\"show-map-border\")}</span>\n      </label>\n    </section>\n    <section>\n      <label class=\"flex items-center\">\n        <input type=\"checkbox\" bind:checked={$showInvisibleGrounds}/>\n        <span class=\"text-sm gray-200 ml-2\">{$_(\"show-invisible-grounds\")}</span>\n      </label>\n    </section>\n\n    <div class=\"mb-2\"></div>\n\n    <section>\n      <label class=\"flex items-center\">\n        <input type=\"checkbox\" bind:checked={$gridSettings.enabled}/>\n        <span class=\"text-sm gray-200 ml-2\">{$_(\"show-grid\")}...</span>\n      </label>\n    </section>\n    {#if $gridSettings.enabled}\n    <div transition:fly={{y:-10, duration: 60}} class=\"border-l-2 pl-3 border-white\">\n      <section>\n        <label>\n          <span>L</span>\n          <span class=\"w-12\">\n            <TextInput number bind:value={$gridSettings.width} />\n          </span>\n        </label>\n        <label>\n          <span>H</span>\n          <span class=\"w-12\">\n            <TextInput number bind:value={$gridSettings.height} />\n          </span>\n        </label>\n      </section>\n      <section>\n        <label class=\"\">\n          <span>{$_(\"grid-color\")}</span>\n          <div class=\"color-tile cursor-pointer\" style=\"background: #{$gridSettings.color}\"></div>\n          <span class=\"w-24\">\n            <ColorTextInput bind:value={$gridSettings.color} />\n          </span>\n        </label>\n      </section>\n    </div>\n    {/if}\n\n    <div class=\"mb-2\"></div>\n\n    <section>\n      <label class=\"flex items-center\">\n        <input type=\"checkbox\" bind:checked={$parkour}/>\n        <span class=\"text-sm gray-200 ml-2\">{$_(\"show-parkour-checkpoints\")}</span>\n      </label>\n    </section>\n\n  </div>\n\n  <!-- <div class=\"ml-2 pl-2 border-l border-gray-200\" >\n    \n  </div> -->\n\n</div>\n\n\n<style>label,section{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}label{-webkit-transition:.2s;transition:.2s;-webkit-box-pack:justify;justify-content:space-between}label+label{margin-left:1rem}label>span,small-text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;margin-right:.75rem;font-size:.875rem;color:#e2e8f0}.color-tile{padding:.5rem;margin-right:.5rem;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);border-radius:.25rem}\n/*# sourceMappingURL=src/components/ui/UserSettings.svelte.map */</style>",
    "\n<script>\n\n  import CodeMirror from \"codemirror\"\n  import \"codemirror/mode/xml/xml.js\"\n\n  import beautify from \"xml-beautifier\"\n\n  import { tick, onMount } from \"svelte\"\n  \n  import { xml } from \"/stores/stores.js\"\n\n  let currentXML = null\n  let prettyXML\n  $: getPrettyXML($xml)\n  function getPrettyXML() {\n    if(currentXML === null || currentXML !== $xml) {\n      prettyXML = beautify($xml, \"  \")\n    }\n  }\n  \n  let textareaElement, cm\n\n  $: if(cm) cm.setValue(prettyXML)\n\n  onMount(() => {\n    cm = CodeMirror.fromTextArea(textareaElement, { \n      lineNumbers: true, \n      mode: \"xml\",\n      theme: \"lucario\",\n    })\n    cm.on(\"change\", cm => {\n      if(cm.getValue() === prettyXML) return\n      $xml = currentXML = cm.getValue().replace(/>[\\t\\n ]+</g, \"><\")\n    })\n  })\n\n</script>\n\n<pre>\n  <code>\n    <textarea \n      bind:this={textareaElement}\n    ></textarea>\n  </code>\n</pre>\n\n<style lang=\"text/postcss\">:global(.CodeMirror){height:70vh}\n/*# sourceMappingURL=src/components/ui/XmlEditor.svelte.map */</style>",
    "\n<script>\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import Button from \"/components/common/Button.svelte\"\n\n  import { _ } from \"/stores/stores.js\"\n\n  let data = [\n    {\n      context: \"Global\",\n      rows: [\n        {\n          inputs: [\"Space\", \"Drag\"],\n          description: $_(\"move-camera\"),\n        },\n        {\n          inputs: [\"Ctrl\", \"Scroll\"],\n          description: $_(\"button-zoom\"),\n        },\n        {\n          inputs: [\"Click/Drag\"],\n          description: $_(\"select-unselect\"),\n        },\n        {\n          inputs: [\"Shift\", \"Click/Drag\"],\n          description: $_(\"select-unselect\"),\n        },\n        {\n          inputs: [\"Ctrl\", \"A\"],\n          description: $_(\"select-all\"),\n        },\n        {\n          inputs: [\"Ctrl\", \"Shift\", \"A\"],\n          description: $_(\"unselect-all\"),\n        },\n        {\n          inputs: [\"Escape\"],\n          description: $_(\"reset-camera\"),\n        },\n        {\n          inputs: [\"Ctrl\", \"Z\"],\n          description: $_(\"button-undo\"),\n        },\n        {\n          inputs: [\"Ctrl\", \"Y\"],\n          description: $_(\"button-redo\"),\n        },\n        {\n          inputs: [\"Ctrl\", \"Shift\", \"Z\"],\n          description: $_(\"button-redo\"),\n        },\n      ],\n    },\n\n    {\n      context: \"Selection\",\n      rows: [\n        {\n          inputs: [\"Drag\"],\n          description: $_(\"move-selection\"),\n        },\n        {\n          inputs: [\"Arrows\"],\n          description: $_(\"move-selection\"),\n        },\n        {\n          inputs: [\"Shift\", \"Arrows\"],\n          description: $_(\"move-selection\") + \" (±10)\",\n        },\n        {\n          inputs: [\"Ctrl\", \"Arrows\"],\n          description: $_(\"move-selection\") + \" (±100)\",\n        },\n        {\n          inputs: [\"Scroll\"],\n          description: $_(\"rotate\"),\n        },\n        {\n          inputs: [\"Shift\", \"Scroll\"],\n          description: $_(\"rotate-around-cursor\"),\n        },\n        {\n          inputs: [\"Alt\", \"Scroll\"],\n          description: $_(\"rotate-slower\"),\n        },\n        {\n          inputs: [\"Delete\"],\n          description: $_(\"button-delete\"),\n        },\n        {\n          inputs: [\"D\"],\n          description: $_(\"button-duplicate\"),\n        },\n        {\n          inputs: [\"Ctrl\", \"C\"],\n          description: $_(\"button-copy\"),\n        },\n        {\n          inputs: [\"Ctrl\", \"X\"],\n          description: $_(\"cut\"),\n        },\n        {\n          inputs: [\"Ctrl\", \"V\"],\n          description: $_(\"paste\"),\n        },\n      ],\n    },\n    {\n      context: \"Numbers\",\n      rows: [\n        {\n          inputs: [\"Up/Down\"],\n          description: \"± 1\",\n        },\n        {\n          inputs: [\"Shift\", \"Up/Down\"],\n          description: \"± 10\",\n        },\n        {\n          inputs: [\"Ctrl\", \"Up/Down\"],\n          description: \"± 100\",\n        },\n        {\n          inputs: [\"Alt\", \"Up/Down\"],\n          description: \"± 0.1\",\n        },\n      ]\n    },\n    // {\n    //   context: \"Buttons\",\n    //   rows: [\n    //     {\n    //       inputs: [\"Click\"],\n    //       description: \"± 1\",\n    //     },\n    //     {\n    //       inputs: [\"Shift\", \"Click\"],\n    //       description: \"± 10\",\n    //     },\n    //     {\n    //       inputs: [\"Ctrl\", \"Click\"],\n    //       description: \"± 100\",\n    //     },\n    //     {\n    //       inputs: [\"Alt\", \"Click\"],\n    //       description: \"± 0.1\",\n    //     },\n    //   ]\n    // }\n\n  ]\n\n  let numberValue = 1\n</script>\n\n\n<div class=\"container\">\n  {#each data as {context, rows}}\n  <label class=\"context\">\n    <span class=\"mr-2\">{context}</span>\n    {#if context === \"Numbers\"}\n    <TextInput number bind:value={numberValue} />\n    {:else if context === \"Buttons\"}\n    <Button class=\"text-sm\" on:click={() => numberValue++}>+</Button>\n    {/if}\n  </label>\n  <table class=\"table\">\n    {#each rows as {inputs, description}}\n    <tr class=\"row\">\n      <td class=\"inputs\">\n        {#each inputs as input}\n        <div class=\"input\">{input}</div> \n        {/each}\n      </td>\n      <td class=\"description\">{description}</td>\n    </tr>\n    {/each}\n  </table>\n  {/each}\n</div>\n\n\n\n<style lang=\"text/postcss\">.container{overflow:auto;max-height:70vh}.context:not(:last-child){margin-top:.5rem}.context{font-size:1.125rem;color:#f7fafc;margin-bottom:.5rem;margin-left:.5rem;margin-right:.5rem;display:-webkit-box;display:flex}.row{font-size:.875rem;margin-bottom:.25rem}.inputs{display:-webkit-box;display:flex;-webkit-box-pack:end;justify-content:flex-end}.input{background-color:#edf2f7;border-color:#000;color:#2d3748;border-radius:.125rem;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);padding-left:.5rem;padding-right:.5rem;font-size:.75rem;margin-left:.25rem;margin-right:.25rem}.description{padding-left:1rem;text-align:left}\n/*# sourceMappingURL=src/components/ui/HelpMenu.svelte.map */</style>",
    "\n<script>\n  import { language, _, localeFlag, localeTranslators } from \"/stores/stores.js\"\n\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n\n  function formatTranslatorsTooltipTitle(list) {\n    if(!list || !list.length) return \"\"\n    return `By ${list.join(\", \")}`\n  }\n\n</script>\n\n<div class=\"container\">\n  {#each Object.entries(localeFlag) as [locale, flag]}\n  <Tooltip bottom inline\n    active={ localeTranslators[locale] !== undefined ? null : false }\n    title={ formatTranslatorsTooltipTitle(localeTranslators[locale]) }\n  >\n    <div class=\"m-1 cursor-pointer flag flag-{flag}\"\n      on:click={() => $language = locale}\n    ></div>\n  </Tooltip>\n  {/each}\n  <div class=\"mt-2 text-sm\">\n    <Tooltip bottom title=\"Send me an email with the language(s) you want to translate!\">\n      <a href=\"mailto:thibautguenedal@gmail.com\">\n        Help translate!\n      </a>\n    </Tooltip>\n  </div>\n</div>\n\n\n<style lang=\"text/postcss\">.container{max-height:70vh;text-align:center}.row{font-size:.875rem;margin-bottom:.25rem}.description{padding-left:1rem;text-align:left}a{-webkit-appearance:none;-moz-appearance:none;appearance:none;color:#fff;font-weight:700}\n/*# sourceMappingURL=src/components/ui/LanguageMenu.svelte.map */</style>",
    "\n<script>\n  import { tick } from \"svelte\"\n  import { slide, fly } from \"svelte/transition\"\n\n  import Icon from \"fa-svelte\"\n  import { faUndo } from \"@fortawesome/free-solid-svg-icons/faUndo\"\n  import { faEye } from \"@fortawesome/free-solid-svg-icons/faEye\"\n  import { faEyeSlash } from \"@fortawesome/free-solid-svg-icons/faEyeSlash\"\n  import { faTrashAlt as faTrash } from \"@fortawesome/free-solid-svg-icons/faTrashAlt\"\n  import { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\"\n  import { faCircle } from \"@fortawesome/free-solid-svg-icons/faCircle\"\n  import { faCheckCircle } from \"@fortawesome/free-solid-svg-icons/faCheckCircle\"\n\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n  import ColorTextInput from \"/components/common/ColorTextInput.svelte\"\n  import Button from \"/components/common/Button.svelte\"\n\n  import ImagesSubMenu from \"/components/ui/ImagesSubMenu.svelte\"\n  import MultipleMiceSpawnSubMenu from \"/components/ui/MultipleMiceSpawnSubMenu.svelte\"\n\n  import { \n    platforms, decorations, shamanObjects, settings, \n    visibility, selection, creation, highlightedObject, buildXML, _ } from \"/stores/stores.js\"\n  import { encodeMapData, mapBooleanProps } from \"/xml-utils.js\"\n\n  $: data = $settings\n\n  async function updateSettings() {\n    await tick()\n    encodeMapData(data)\n    buildXML()\n    settings.update(v => v)\n  }\n\n  function updateMiceSpawn() {\n    console.log(data._miceSpawn.type, data._miceSpawn)\n    if(data._miceSpawn.type === \"multiple\") {\n      data._miceSpawn.positions = \n        $decorations.filter(({name}) => name === \"DS\")\n        .map(({_x,_y}) => ({x:_x, y:_y}))\n    }\n    else if(data._miceSpawn.type === \"random\") {\n      data._miceSpawn.axis = \"x\"\n      data._miceSpawn.value = 350\n    }\n    else if(data._miceSpawn.type === \"normal\") {\n      if(data._miceSpawn.positions && data._miceSpawn.positions.length) {\n        creation.setFromType(\"decoration\", \"DS\")\n        creation.create(data._miceSpawn.positions[0])\n        $creation = null\n      }\n    }\n\n    encodeMapData(data)\n    buildXML()\n    settings.update(v => v)\n  }\n  \n  function updateDecorations() {\n  console.log(\"updateDecorations()\")\n\tdecorations.update(v => v)\n  }\n\n</script>\n\n<div class=\"p-4 bg-gray-700 shadow-lg absolute right-o h-full w-full overflow-y-auto overflow-x-hidden\">\n\n  <div class=\"mb-2\"></div>\n\n  <section>\n    <label>\n      <span>L</span>\n      <TextInput number sub=\"max: {data._width_max}\" bind:value={data._width} on:input={updateSettings} />\n    </label>\n    <label>\n      <span>H</span>\n      <TextInput number sub=\"max: {data._height_max}\" bind:value={data._height} on:input={updateSettings} />\n    </label>\n  </section>\n\n  <div class=\"mb-2\"></div>\n\n  <section>\n    <label>\n      <span>{$_(\"gravity\")}</span>\n      <TextInput number bind:value={data._gravity} on:input={updateSettings} />\n    </label>\n  </section>\n  <div class=\"mb-1\"></div>\n  <section>\n    <label>\n      <span>{$_(\"wind\")}</span>\n      <TextInput number bind:value={data._wind} on:input={updateSettings} />\n    </label>\n  </section>\n\n  <div class=\"mb-2\"></div>\n\n  <section>\n    <label>\n      <span>{$_(\"background\")}</span>\n      <div class=\"material-input\">\n        <select bind:value={data._backgroundImageId} on:change={updateSettings}>\n          <option value=\"-1\">{$_(\"none\")}</option>\n          <option value=\"-2\">{$_(\"random\")}</option>\n          <option value=\"0\">{$_(\"background0\")}</option>\n          <option value=\"1\">{$_(\"background1\")}</option>\n          <option value=\"2\">{$_(\"background2\")}</option>\n          <option value=\"3\">{$_(\"background3\")}</option>\n          <option value=\"4\">{$_(\"background4\")}</option>\n          <option value=\"5\">{$_(\"background5\")}</option>\n          <option value=\"6\">{$_(\"background6\")}</option>\n          <option value=\"7\">{$_(\"background7\")}</option>\n          <option value=\"8\">{$_(\"background8\")}</option>\n        </select>\n      </div>\n    </label>\n  </section>\n\n  <div class=\"mb-2\"></div>\n\n  <section>\n    <label>\n      <span>{$_(\"theme\")}</span>\n      <div class=\"material-input\">\n        <select bind:value={data._theme} \n\t\t  on:change={() => {\n\t\t    updateSettings()\n\t\t\tupdateDecorations()\n\t      }}>\n          <option value=\"\"> </option>\n          <option value=\"halloween\">{$_(\"background4\")}</option>\n        </select>\n      </div>\n    </label>\n  </section>\n\n  <div class=\"mb-2\"></div>\n\n  <section>\n    <label style=\"display: block;\">\n      <span class=\"block\">{$_(\"shaman_objects\")}: {$_(\"mass\")}</span>\n      <TextInput number bind:value={data._shamanObjectsMass} on:input={updateSettings} />\n    </label>\n  </section>\n\n  <div class=\"mb-2\"></div>\n\n  {#each mapBooleanProps as prop}\n  <section>\n    <label>\n      <span>{$_(prop.titleKey)}</span>\n      <input class=\"\" type=\"checkbox\" checked={data[prop.name]} \n        on:change={e => { \n\t\t  data[prop.name] = !!e.target.checked\n\t\t  updateSettings()\n\t\t  if(prop.updateDecorations) updateDecorations()\n\t\t }} />\n    </label>\n  </section>\n  {/each}\n\n  <div class=\"mb-2\"></div>\n\n  <section>\n    <label>\n      <span>{$_(\"defilante-mode\")}...</span>\n      <input class=\"\" type=\"checkbox\" checked={data._defilanteEnabled} \n        on:change={e => { data._defilanteEnabled = !!e.target.checked, updateSettings()}} />\n    </label>\n  </section>\n  {#if data._defilanteEnabled}\n  <div class=\"mt-1\"></div>\n  <div transition:fly={{duration: 80, x:50}} class=\"border-l-2 pl-3 border-white\">\n    <section>\n      <label>\n        <span>{$_(\"defilante-start-speed\")}</span>\n        <span class=\"w-1/3\">\n          <TextInput number bind:value={data._defilanteStartSpeed} on:input={updateSettings} />\n        </span>\n      </label>\n    </section>\n    <section>\n      <label>\n        <span>{$_(\"defilante-acceleration\")}</span>\n        <span class=\"w-1/3\">\n          <TextInput number bind:value={data._defilanteAcceleration} on:input={updateSettings} />\n        </span>\n      </label>\n    </section>\n    <section>\n      <label>\n        <span>{$_(\"defilante-maximum-speed\")}</span>\n        <span class=\"w-1/3\">\n          <TextInput number bind:value={data._defilanteMaxSpeed} on:input={updateSettings} />\n        </span>\n      </label>\n    </section>\n    <section>\n      <label>\n        <span>{$_(\"defilante-free-scroll\")}</span>\n        <input class=\"\" type=\"checkbox\" checked={data._defilanteFreeScroll} \n          on:change={e => { data._defilanteFreeScroll = !!e.target.checked, updateSettings()}} />\n      </label>\n    </section>\n  </div>\n  {/if}\n\n  <div class=\"mb-2\"></div>\n\n  <div\n    on:mouseenter={() => $highlightedObject = \"miceSpawn\"}\n    on:mouseleave={() => $highlightedObject = null}\n  >\n    <section>\n      <label>\n        <span>{$_(\"mice-spawn\")}</span>\n        <div class=\"material-input\">\n          <select bind:value={data._miceSpawn.type} on:change={updateMiceSpawn}>\n            <option value=\"normal\">{$_(\"mice-spawn-normal\")}</option>\n            <option value=\"multiple\">{$_(\"mice-spawn-multiple\")}</option>\n            <option value=\"random\">{$_(\"random-spawn\")}</option>\n          </select>\n        </div>\n      </label>\n    </section>\n    {#if data._miceSpawn.type === \"multiple\"}\n    <section class=\"flex-col border-l-2 pl-3 border-white mt-1\" transition:fly={{duration: 80, x:50}}>\n      <MultipleMiceSpawnSubMenu />\n    </section>\n\n    {:else if data._miceSpawn.type === \"random\"}\n    <section class=\"flex-col border-l-2 pl-3 border-white mt-1\" transition:fly={{duration: 80, x:50}}>\n      <div class=\"flex w-full\">\n        <label class=\"w-1/2\">\n          <span>{$_(\"axis\")}</span>\n        </label>\n        <label class=\"w-1/2\">\n          <span>{$_(\"random-spawn\")}</span>\n        </label>\n      </div>\n      <div class=\"flex w-full\">\n        <label class=\"w-1/2\">\n          <span>X</span>\n          {#if data._miceSpawn.axis !== \"x\"}\n          <TextInput number bind:value={data._miceSpawn.value} on:input={updateSettings} />\n          {/if}\n        </label>\n        <label class=\"w-1/2 cursor-pointer\" on:click={() => { data._miceSpawn.axis = \"x\"; updateSettings()}}>\n          <Icon icon={data._miceSpawn.axis === \"x\" ? faCheckCircle : faCircle}/>\n        </label>\n      </div>\n      <div class=\"flex w-full\">\n        <label class=\"w-1/2\">\n          <span>Y</span>\n          {#if data._miceSpawn.axis !== \"y\"}\n          <TextInput number bind:value={data._miceSpawn.value} on:input={updateSettings} />\n          {/if}\n        </label>\n        <label class=\"w-1/2 cursor-pointer\" on:click={() => { data._miceSpawn.axis = \"y\"; updateSettings()}}>\n          <Icon icon={data._miceSpawn.axis === \"y\" ? faCheckCircle : faCircle}/>\n        </label>\n      </div>\n    </section>\n    {/if}\n  </div>\n\n  <div class=\"mb-4\"></div>\n\n  <ImagesSubMenu which=\"backgroundImages\" title={$_(\"background\")}/>\n  <ImagesSubMenu which=\"foregroundImages\" title={$_(\"foreground\")}/>\n  <ImagesSubMenu which=\"disappearingImages\" title={$_(\"disappearing-images\")}/>\n\n</div>\n\n\n<style lang=\"text/postcss\">.rtl-input{direction:rtl}.rtl-input[focus-within]{direction:ltr}.rtl-input:focus-within{direction:ltr}.image-list{border-left:2px solid #fff;padding-left:.75rem;margin-bottom:.5rem}label,section{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}label{-webkit-transition:.2s;transition:.2s;-webkit-box-pack:justify;justify-content:space-between}label:not(:last-child){margin-right:1rem}label>span,small-text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;margin-right:.75rem}.icon,label>span,small-text{font-size:.875rem;color:#e2e8f0}.icon{cursor:pointer}.icon.disabled{pointer-events:none;opacity:.4}\n/*# sourceMappingURL=src/components/ui/MapSettingsMenu.svelte.map */</style>",
    "\n<script>\n  import { tick } from \"svelte\"\n  import { slide, fly } from \"svelte/transition\"\n\n  import Icon from \"fa-svelte\"\n  import { faUndo } from \"@fortawesome/free-solid-svg-icons/faUndo\"\n  import { faExchangeAlt } from \"@fortawesome/free-solid-svg-icons/faExchangeAlt\"\n  import { faCrosshairs } from \"@fortawesome/free-solid-svg-icons/faCrosshairs\"\n\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import ColorTextInput from \"/components/common/ColorTextInput.svelte\"\n  import Button from \"/components/common/Button.svelte\"\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n\n  import { platforms, decorations, shamanObjects, joints, settings, selection, creation, groundTypePicker, buildXML, _} from \"/stores/stores.js\"\n  import { encodeObjectData } from \"/xml-utils.js\"\n\n  let stores = [platforms, decorations, shamanObjects, joints]\n\n\n  $: objectTypes = [...new Set($selection.map(o => o._objectType))]\n\n  let multi = {}\n  $: computeMulti($selection)\n\n  function getComputedProperties(object) {\n    return Object.keys(object).filter(key => key[0] === \"_\")\n  }\n\n  function computeMulti() {\n    if(!$selection.length) {\n      return multi = {}\n    }\n\n    if($selection.length === 1) {\n      return multi = $selection[0]\n    }\n\n    multi = {}\n    for(let object of $selection) {\n      for(let prop of getComputedProperties(object)) {\n        if(multi[prop] === undefined) {\n          multi[prop] = object[prop]\n        }\n        else if(multi[prop] !== object[prop]) {\n          multi[prop] = \"\"\n        }\n      }\n    }\n    multi._z = $selection.map(p => p._z).sort((a,b) => a-b).join(\", \")\n    return multi\n  }\n\n  // $: console.log(multi)\n\n\n  async function updateObjects() {\n    await tick()\n    for(let object of $selection) {\n      for(let prop in multi) {\n        if(object[prop] !== undefined && multi[prop] !== \"\") {\n          object[prop] = multi[prop]\n        }\n      }\n      encodeObjectData(object)\n    }\n    buildXML()\n    for(let store of stores) {\n      store.update(v => v)\n    }\n    $selection = $selection\n  }\n\n  function resetProperty(prop) {\n    if(multi[`_${prop}_default`] === undefined) {\n      throw `Prop ${prop} has no default value`\n    }\n    multi[`_${prop}`] = multi[`_${prop}_default`]\n    updateObjects()\n  }\n\n  function invertLH() {\n    for(let platform of $selection.filter(o => o._objectType === \"platform\")) {\n      let w = platform._width\n      platform._width = platform._height\n      platform._height = w\n    }\n    updateObjects()\n  }\n\n  function adjustZ({shiftKey,ctrlKey}, sign) {\n    let factor = shiftKey ? 10 : ctrlKey ? 100 : 1\n    let deltaZ = sign*factor\n\n    for(let [store,storeList,objectType] of [\n      [platforms,$platforms,\"platform\"],\n      [decorations,$decorations,\"decoration\"],\n      [shamanObjects,$shamanObjects,\"shamanObject\"],\n      [joints,$joints,\"joint\"],\n    ]) {\n      if(!objectTypes.includes(objectType)) continue\n      let objects = $selection.filter(({_objectType}) => _objectType === objectType)\n      let newOrder = storeList\n      if(deltaZ < 0) {\n        let pp = objects.sort((a,b) => a._z - b._z)\n        let currentZ = -1\n        for(let object of pp) {\n          currentZ = Math.max(currentZ+1, object._z + deltaZ)\n          newOrder.splice(object._z, 1)\n          newOrder = [...newOrder.slice(0,currentZ), object, ...newOrder.slice(currentZ)]\n        }\n      }\n      else {\n        let pp = objects.sort((a,b) => b._z - a._z)\n        let currentZ = storeList.length\n        for(let object of pp) {\n          currentZ = Math.min(currentZ-1, object._z + deltaZ)\n          newOrder.splice(object._z, 1)\n          newOrder = [...newOrder.slice(0,currentZ), object, ...newOrder.slice(currentZ)]\n        }\n      }\n      store.set(newOrder)\n    }\n    \n    buildXML()\n    $selection = $selection\n  }\n\n  function requestGroundType() {\n    groundTypePicker.request(type => {\n      clearGroundTypeRequestTimeout()\n      multi._type = type\n      updateObjects()\n    })\n  }\n  let groundTypeRequestTimeout\n  function cancelGroundTypeRequest() {\n    groundTypeRequestTimeout = setTimeout(() => {\n      groundTypePicker.cancelRequest()\n      groundTypeRequestTimeout = null\n    }, 1000)\n  }\n  function clearGroundTypeRequestTimeout() {\n    if(groundTypeRequestTimeout !== null) {\n      clearTimeout(groundTypeRequestTimeout)\n    }\n  }\n\n  let flyRight = { duration: 50, x: 100 }\n  \n</script>\n\n\n{#if $selection.length} <!-- Global if -->\n\n\n<section class=\"text-sm flex justify-between action-buttons\">\n  <Tooltip inline title=\"Delete\" bottom>\n    <Button on:click={selection.remove}>{$_(\"button-delete\")}</Button></Tooltip>\n  <Tooltip inline title=\"D\" bottom>\n    <Button on:click={selection.duplicate}>{$_(\"button-duplicate\")}</Button></Tooltip>\n  <Tooltip inline title=\"Ctrl+C\" bottom>\n    <Button on:click={selection.copy}>{$_(\"button-copy\")}</Button></Tooltip>\n</section>\n\n<section>\n  <label for=\"\" class=\"w-1/2\">\n    <div class=\"flex\">\n      <Button on:click={e => adjustZ(e, -1)}>-</Button>\n      <div class=\"flex\">\n        <TextInput number disabled={true} center value={multi._z} />\n      </div>\n      <Button on:click={e => adjustZ(e, +1)}>+</Button>\n    </div>\n  </label>\n  {#if multi._foreground !== undefined}\n  <label transition:fly={flyRight}>\n    <span>{$_(\"foreground\")}</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._foreground} on:change={updateObjects} />\n  </label>\n  {/if}\n</section>\n\n<div class=\"mb-2\"></div>\n\n\n\n\n<section>\n  <label>\n    <span>X</span>\n    <TextInput number bind:value={multi._x} on:input={updateObjects} />\n  </label>\n  <label>\n    <span>Y</span>\n    <TextInput number bind:value={multi._y} on:input={updateObjects} />\n  </label>\n</section>\n\n{#if objectTypes.includes(\"platform\")}\n<section>\n  <label>\n    <span>L</span>\n    <TextInput number bind:value={multi._width} on:input={updateObjects} />\n  </label>\n  <label class=\"icon\" on:click={invertLH} >\n    <Icon icon={faExchangeAlt} /></label>\n  <label>\n    <span>H</span>\n    <TextInput number bind:value={multi._height} on:input={updateObjects} />\n  </label>\n</section>\n\n<div class=\"mb-2\"></div>\n\n{#if objectTypes.length === 1 && objectTypes[0] === \"platform\"}\n<section>\n  <label>\n    <span class=\"input-text text-sm\">{$_(\"ground-type\")}</span>\n    <TextInput number bind:value={multi._type} on:input={updateObjects} \n      on:blur={cancelGroundTypeRequest} on:focus={clearGroundTypeRequestTimeout}\n    />\n    <div class=\"icon ml-3\" on:click={requestGroundType} >\n      <Icon icon={faCrosshairs} />\n    </div>\n  </label>\n</section>\n{/if}\n\n{/if}\n\n{#if multi._color !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label class=\"\">\n    <span>{$_(\"ground-color\")}</span>\n    <div class=\"color-tile cursor-pointer\" style=\"background: {multi._displayColor}\"></div>\n    <ColorTextInput bind:value={multi._color} on:input={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if objectTypes.includes(\"platform\")}\n\n<div class=\"mb-2\"></div>\n\n{#if multi._friction !== undefined}\n<section>\n  <label>\n    <span>{$_(\"friction\")}</span>\n    <TextInput number bind:value={multi._friction} on:input={updateObjects} />\n    <div class=\"icon ml-3\" \n      class:disabled={multi._friction_default === \"\" || multi._friction === multi._friction_default}\n      on:click={() => resetProperty(\"friction\")}\n    ><Icon icon={faUndo} /></div>\n  </label>\n</section>\n<section>\n  <label>\n    <span>{$_(\"restitution\")}</span>\n    <TextInput number bind:value={multi._restitution} on:input={updateObjects} />\n    <div class=\"icon ml-3\" \n      class:disabled={multi._restitution_default === \"\" || multi._restitution === multi._restitution_default}\n      on:click={() => resetProperty(\"restitution\")}\n    ><Icon icon={faUndo} /></div>\n  </label>\n</section>\n{/if}\n{/if}\n\n{#if multi._rotation !== undefined}\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">{$_(\"rotation\")}</span>\n    <TextInput number bind:value={multi._rotation} on:input={updateObjects} />\n    <div class=\"icon ml-3\" \n      class:disabled={multi._rotation_default === \"\" || multi._rotation === multi._rotation_default}\n      on:click={() => resetProperty(\"rotation\")}\n    ><Icon icon={faUndo} /></div>\n  </label>\n</section>\n{#if multi._dynamic}\n<section transition:fly={flyRight}>\n  <label transition:fly={flyRight}>\n    <span class=\"input-text text-sm\">{$_(\"fixed-rotation\")}</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._fixedRotation} on:change={updateObjects} />\n  </label>\n</section>\n{/if}\n{/if}\n\n{#if multi._friction !== undefined}\n<div class=\"mb-2\"></div>\n\n<section>\n  <label>\n    <span>{$_(\"mice-collision\")}</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._miceCollision} on:change={updateObjects} />\n  </label>\n</section>\n<section>\n  <label>\n    <span>{$_(\"ground-collision\")}</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._groundCollision} on:change={updateObjects} />\n  </label>\n</section>\n\n<div class=\"mb-2\"></div>\n\n<section>\n  <label>\n    <span>{$_(\"dynamic\")}...</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._dynamic} on:change={updateObjects} />\n  </label>\n</section>\n{#if multi._dynamic}\n<div transition:fly={flyRight} class=\"border-l-2 pl-3 border-white\">\n  <section>\n    <label>\n      <span>{$_(\"mass\")}</span>\n      <TextInput number bind:value={multi._mass} on:input={updateObjects} />\n    </label>\n  </section>\n  <section>\n    <label>\n      <span>{$_(\"linear-damping\")}</span>\n      <TextInput number bind:value={multi._linearDamping} on:input={updateObjects} />\n    </label>\n  </section>\n  <section>\n    <label>\n      <span>{$_(\"angular-damping\")}</span>\n      <TextInput number bind:value={multi._angularDamping} on:input={updateObjects} />\n    </label>\n  </section>\n</div>\n{/if}\n{/if}\n\n{#if multi._invisible !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">{$_(\"invisible\")}</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._invisible} on:change={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._vanish !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label>\n    <span>{$_(\"vanish\")}</span>\n    <TextInput number bind:value={multi._vanish} on:input={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._nosync !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label>\n    <span>nosync</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._nosync} on:change={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._lua !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">Lua ID</span>\n    <TextInput bind:value={multi._lua} on:input={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._groundImageEnabled !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">{$_(\"ground-image\")}...</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._groundImageEnabled} on:change={updateObjects} />\n  </label>\n</section>\n{#if multi._groundImageEnabled}\n<div transition:fly={flyRight} class=\"border-l-2 pl-3 border-white\">\n  <div class=\"mb-1\"></div>\n  <section>\n    <label>\n      <span class=\"input-text text-sm\">Url</span>\n      <div class=\"rtl-input\">\n        <TextInput placeholder=\"1651b30c284.png\"\n          bind:value={multi._groundImageUrl} on:input={updateObjects} />\n      </div>\n    </label>\n  </section>\n  <section>\n    <label>\n      <span>X</span>\n      <TextInput number bind:value={multi._groundImageX} on:input={updateObjects} />\n    </label>\n    <label>\n      <span>Y</span>\n      <TextInput number bind:value={multi._groundImageY} on:input={updateObjects} />\n    </label>\n  </section>\n</div>\n{/if}\n{/if}\n\n{#if multi._holeColor !== undefined}\n<div class=\"mb-2\"></div>\n\n<section transition:fly={flyRight}>\n  <label>\n    <span>{$_(\"hole\")}</span>\n    <div class=\"material-input\">\n      <select bind:value={multi._holeColor} on:change={updateObjects} >\n        <option value=\"\"> </option>\n        <option value=\"1\" style=\"color:#7DB8BF;\">1</option>\n        <option value=\"2\" style=\"color:#DDA3E5;\">2</option>\n      </select>\n    </div>\n  </label>\n</section>\n{/if}\n\n{#if multi._reverse !== undefined}\n<div class=\"mb-2\"></div>\n\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">{$_(\"flip-horizontally\")}</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._reverse} on:change={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._numColors !== undefined && multi._numColors !== 0}\n<div class=\"mb-2\"></div>\n\n<section transition:fly={flyRight} class=\"flex-wrap\">\n  <label>\n    <span>{$_(\"decoration-colors\")}</span>\n  </label>\n  {#each [0,1,2,3,4,5] as i}\n  {#if multi[\"_color\"+i] !== undefined}\n  <section class=\"mt-1\">\n    <label>\n      <div class=\"color-tile cursor-pointer\" style=\"background: {multi[\"_displayColor\"+i]}\"></div>\n      <ColorTextInput bind:value={multi[\"_color\"+i]} on:input={updateObjects} />\n    </label>\n  </section>\n  {/if}\n  {/each}\n</section>\n{/if}\n\n{#if multi._ghost !== undefined}\n<div class=\"mb-2\"></div>\n\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">{$_(\"ghost\")}</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._ghost} on:change={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._nailPower !== undefined}\n<div class=\"mb-2\"></div>\n\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">{$_(\"power\")}</span>\n    <TextInput number bind:value={multi._nailPower} on:input={updateObjects} />\n  </label>\n</section>\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">{$_(\"speed\")}</span>\n    <TextInput number bind:value={multi._nailSpeed} on:input={updateObjects} />\n  </label>\n</section>\n{/if}\n\n\n{#if multi._thickness !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label>\n    <span>{$_(\"line-width\")}</span>\n    <TextInput number bind:value={multi._thickness} on:input={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._opacity !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label>\n    <span>{$_(\"opacity\")}</span>\n    <TextInput number bind:value={multi._opacity} on:input={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._points instanceof Array}\n<div class=\"mb-2\"></div>\n{#each multi._points as p, pointIndex}\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">{p.name}</span>\n  </label>\n  <label>\n    <span>X</span>\n    <TextInput number bind:value={multi._points[pointIndex].x} on:input={updateObjects} />\n  </label>\n  <label>\n    <span>Y</span>\n    <TextInput number bind:value={multi._points[pointIndex].y} on:input={updateObjects} />\n  </label>\n</section>\n{/each}\n{/if}\n{#if multi._controlPoints instanceof Array}\n{#each multi._controlPoints as p, pointIndex}\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">{p.name}</span>\n  </label>\n  <label>\n    <span>X</span>\n    <TextInput number bind:value={multi._controlPoints[pointIndex].x} on:input={updateObjects} />\n  </label>\n  <label>\n    <span>Y</span>\n    <TextInput number bind:value={multi._controlPoints[pointIndex].y} on:input={updateObjects} />\n  </label>\n</section>\n{/each}\n{/if}\n{#if multi._fineness}\n<section transition:fly={flyRight}>\n  <label>\n    <span>Fineness</span>\n    <TextInput number bind:value={multi._fineness} on:input={updateObjects} />\n  </label>\n</section>\n{/if}\n\n\n{/if} <!-- Global if-->\n\n\n<style lang=\"text/postcss\">:global(.action-buttons>div){display:-webkit-box;display:flex;-webkit-box-flex:1;flex-grow:1}:global(.action-buttons>div>button){-webkit-box-flex:1;flex-grow:1;padding:.25rem 0!important;margin:0 .1rem!important}.rtl-input{direction:rtl}.rtl-input[focus-within]{direction:ltr}.rtl-input:focus-within{direction:ltr}section{margin-bottom:.25rem}label,section{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}label{-webkit-transition:.2s;transition:.2s;-webkit-box-pack:justify;justify-content:space-between}label:not(:last-child){margin-right:1rem}label>span{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;margin-right:.75rem}.icon,label>span{font-size:.875rem;color:#e2e8f0}.icon{cursor:pointer}.icon.disabled{pointer-events:none;opacity:.4}.color-tile{padding:.75rem;margin-right:.5rem;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);border-radius:.25rem}\n/*# sourceMappingURL=src/components/ui/SelectionMenu.svelte.map */</style>\n",
    "\n<script>\n  import cc from \"color-convert\"\n  import { onMount } from \"svelte\"\n  import { getUniqueId } from \"/utils.js\"\n  import decorationMetadata from \"/decorationMetadata.js\"\n\n  import SvgImage from \"/components/common/SvgImage.svelte\"\n  \n  import { settings } from \"/stores/stores.js\"\n\n  export let decoration\n  export let active\n\n  let instanceId = getUniqueId()\n\n  $: metadata = getDecorationMetadata(decoration)\n  const specialMetadataOffset = {\n    T: { x: 21, y: 31 },\n    \"T-1\": { x: 25, y: 35 },\n    \"T-2\": { x: 25, y: 35 },\n    F: { x: 23, y: 21 },\n    \"F-triple\": { x: 23+12, y: 21+7 },\n    \"F-candy\": { x: 23+12, y: 21+7 },\n    DS: { x: 26, y: 43 },\n    DC: { x: 26, y: 43 },\n    DC2: { x: 26, y: 43 },\n  }\n  function getDecorationMetadata(decoration) {\n  \tlet type = decoration._type\n    if(decoration.name === \"P\") {\n      return decorationMetadata[type]\n    }\n    else if(decoration.name === \"F\") {\n      if($settings._dodue) {\n        type = \"F-triple\"\n        if($settings._theme === \"halloween\") {\n          type = \"F-candy\"\n        }\n      }\n    }\n    else if(decoration.name === \"T\") {\n      if(decoration._holeColor) {\n        let newType = \"T-\" + decoration._holeColor\n        if(specialMetadataOffset[newType]) {\n          type = newType\n        }\n      }\n    }\n    return { \n      type, \n      filters: [],\n      offset: specialMetadataOffset[type],\n    }\n  }\n\n  $: filters = getFilters(decoration)\n  function getFilters() {\n    return metadata.filters.map(({name,defaultColor}, index) => {\n      let color = decoration[\"_displayColor\"+index]\n      let matrix = getColorMatrix(color)\n      return { name, matrix }\n    })\n  }\n\n  function withInstancedFilterIds(xml) {\n    for(let {name} of filters) {\n      xml = xml.replace(new RegExp(name, \"g\"), name+\"-\"+instanceId)\n    }\n    return xml\n  }\n\n  $: filtersLength = filters.length\n  \n  let promise\n  $: if(filtersLength)\n      promise = fetch(`dist/decorations/${decoration._type}.svg`).then(r => r.text()).then(withInstancedFilterIds)\n\n  function getColorMatrix(hex) {\n    let [r,g,b] = cc.hex.rgb(hex).map(x => x/255)\n    return `\n      1 0 0 0 ${r-0.5}\n      0 1 0 0 ${g-0.5}\n      0 0 1 0 ${b-0.5}\n      0 0 0 1 0`.trim()\n  }\n\n</script>\n\n\n\n\n<g on:mousedown \n  class=\"decoration\" class:active={active} \n  transform=\"translate({decoration._x}, {decoration._y}) {decoration._reverse ? 'scale(-1, 1)' : ''}\"\n>\n  <g transform=\"translate(-{metadata.offset.x}, -{metadata.offset.y})\">\n\n    {#if filters.length}\n\n      {#each filters as filter}\n      <filter id=\"{filter.name}-{instanceId}\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\" filterUnits=\"objectBoundingBox\" primitiveUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\">\n        <feColorMatrix type=\"matrix\" values={filter.matrix} x=\"0%\" y=\"0%\" width=\"100%\" height=\"100%\" in=\"colormatrix\" result=\"colormatrix1\"/>\n      </filter>\n      {/each}\n\n      {#await promise then svg}\n        {@html svg}\n      {/await}\n\n    {:else}\n\n      <SvgImage href=\"dist/decorations/{metadata.type}.png\"/>\n\n    {/if}\n\n  </g>\n</g>\n\n<style lang=\"text/postcss\">:global(.decoration>g>*){-webkit-transition:fill .1s,outline-color 50ms;transition:fill .1s,outline-color 50ms;outline-width:4px;outline-offset:-4px;outline-style:dashed;outline-color:hsla(0,0%,100%,0)}:global(.decoration>g>:hover){cursor:pointer;outline-color:hsla(0,0%,100%,.5)}:global(.decoration.active>g>*){outline-color:hsla(0,0%,100%,.95)}\n/*# sourceMappingURL=src/components/scene/Decoration.svelte.map */</style>",
    "\n<script>\n\n  import { parkour, shamanObjects, settings } from \"/stores/stores.js\"\n\n  export let shamanObject\n  export let active\n\n  $: spriteData = getSpriteData(shamanObject, $settings)\n  function getSpriteData() {\n    if(!shamanObject._spriteData) return\n    if($settings._defilanteEnabled && shamanObject._spriteData.defilanteVariant) {\n      return shamanObject._spriteData.defilanteVariant\n    }\n    return shamanObject._spriteData\n  }\n\n  function getParkourCheckpointIndex() {\n    return $shamanObjects.filter(o => o._type == \"22\").indexOf(shamanObject) + 1\n  }\n\n</script>\n\n\n<g on:mousedown\n  class=\"platform\" class:active={active} \n  transform=\"translate({shamanObject._x}, {shamanObject._y}) \n             rotate({shamanObject._rotation || 0})\"\n>\n\n  {#if spriteData && spriteData.spritesheet}\n\n  <foreignObject class=\"pointer-events-none\" class:opacity50={shamanObject._ghost}\n    x={-spriteData.width/2} y={-spriteData.height/2}\n    width={spriteData.width} height={spriteData.height}\n  >\n    <div style=\"background-image: url(dist/shamanObjects/{spriteData.spritesheet}); \n                background-position: {-spriteData.offset.x}px {-spriteData.offset.y}px;\n                background-repeat: no-repeat;\"\n      class=\"w-full h-full\"\n    ></div>\n  </foreignObject>\n\n  <rect fill=\"transparent\" class=\"selectable\" \n    x={-spriteData.boundingWidth/2} y={-spriteData.boundingHeight/2}\n    width={spriteData.boundingWidth} height={spriteData.boundingHeight}\n  />\n\n  {:else if spriteData && spriteData.sprite}\n\n  <image class=\"selectable\" class:opacity50={shamanObject._ghost}\n    x={-spriteData.width/2} y={-spriteData.height/2}\n    width={spriteData.width} height={spriteData.height}\n    href=\"dist/shamanObjects/{spriteData.sprite}\"\n    on:mousedown|preventDefault\n  />\n\n  {:else}\n\n  <rect class=\"selectable\" class:opacity50={shamanObject._ghost}\n    x={-20} y={-20}\n    width={40} height={40}\n    fill=\"red\"\n  />\n\n  {/if}\n\n  {#if $parkour && shamanObject._type == \"22\"}\n  <text class=\"pointer-events-none\" y=\"-8\">{getParkourCheckpointIndex()}</text>\n  {/if}\n\n</g>\n\n\n<style lang=\"text/postcss\">.opacity50{opacity:.5}.selectable{-webkit-transition:fill .1s,outline-color 50ms;transition:fill .1s,outline-color 50ms;outline-width:4px;outline-offset:-4px;outline-style:dashed;outline-color:hsla(0,0%,100%,0)}.selectable:hover{cursor:pointer;outline-color:hsla(0,0%,100%,.5)}.active .selectable{outline-color:hsla(0,0%,100%,.95)}text{fill:#000;font:14px sans-serif;text-anchor:middle}\n/*# sourceMappingURL=src/components/scene/ShamanObject.svelte.map */</style>",
    "\n<script context=\"module\">\n\n  import { get as storeGet } from \"svelte/store\"\n  import { zoom, drawingData } from \"/stores/stores.js\"\n\n  let resizeInfo = null\n\n  window.addEventListener(\"mousemove\", onMouseMove)\n  window.addEventListener(\"mouseup\", onMouseRelease)\n  window.addEventListener(\"mouseleave\", onMouseRelease)\n\n\n  let __mouse = { x: 0, y: 0 }\n  function onMouseMove(e) {\n    if(resizeInfo && !resizeInfo.start) {\n      resizeInfo.start = __mouse\n    }\n    __mouse = { x: e.clientX, y: e.clientY }\n\n    if(!resizeInfo) return\n\n    let {joint, listKey, pointIndex, originalPoint, start} = resizeInfo\n\n    let scale = 1 / storeGet(zoom)\n    let dx = scale * (e.clientX - start.x)\n    let dy = scale * (e.clientY - start.y)\n\n    joint[listKey][pointIndex].x = originalPoint.x + dx\n    joint[listKey][pointIndex].y = originalPoint.y + dy\n\n    encodeJointData(joint)\n    joints.update(v => v)\n    selection.update(v => v)\n    buildXML()\n  }\n\n  function onMouseRelease() {\n    resizeInfo = null\n  }\n\n</script>\n\n<script>\n\n  import { encodeJointData } from \"/xml-utils.js\"\n  import {\n    joints, selection, buildXML, creation, bezier\n  } from \"/stores/stores.js\"\n\n  export let joint\n  export let active = false\n\n  $: isHardToSee = ( joint._opacity < 0.1 ) || \n                   ( isNaN(parseInt(joint._color, 16)) ) ||\n                   [joint._color.substring(0,2), joint._color.substring(2,4), joint._color.substring(4,6)]\n                      .map(s => parseInt(s, 16))\n                      .every((x,i) => Math.abs([0x6a,0x74,0x95][i] - x) < 10)\n\n  $: polylinePoints = \n      ( joint.name === \"VC\" \n        ? Array(joint._fineness+1).fill()\n            .map((_,i) => bezier(i/joint._fineness, joint._points[0], joint._points[1], joint._controlPoints[0], joint._controlPoints[1]))\n        : joint._points )\n      .map(p => [p.x,p.y].join(\",\")).join(\" \")\n\n  function rotate(x, y, angle, cx=0, cy=0) {\n    var radians = (Math.PI / 180) * angle,\n        cos = Math.cos(radians),\n        sin = -Math.sin(radians),\n        nx = (cos * (x - cx)) + (sin * (y - cy)) + cx,\n        ny = (cos * (y - cy)) - (sin * (x - cx)) + cy;\n    return [nx, ny];\n  }\n\n  $: if(joint.__delegateAction) {\n        if(joint.name === \"VC\") {\n          let cp = joint._points[0].x == joint._points[1].x\n                && joint._points[0].y == joint._points[1].y ? 0 : 1\n          resizeInfo = { \n            joint,\n            listKey: \"_controlPoints\",\n            pointIndex: cp,\n            originalPoint: {...joint._controlPoints[cp]},\n          }\n        }\n        else {\n          resizeInfo = { \n            joint,\n            listKey: \"_points\",\n            pointIndex: 1,\n            originalPoint: {...joint._points[1]},\n          }\n        }\n        joint.__delegateAction = false\n  }\n  function pointMoveStart(e, listKey, pointIndex) {\n    resizeInfo = { \n      joint,\n      listKey,\n      pointIndex,\n      originalPoint: {...joint[listKey][pointIndex]},\n      start: { x: e.clientX, y: e.clientY },\n    }\n  }\n\n  let crosshairRadius = 6\n  let crosshairThickness = 2\n\n</script>\n\n<g>\n  <g class=\"joint\" \n    on:mousedown on:mousemove on:mouseleave\n  >\n    <g class=\"selectable\" class:active class:hard-to-see={isHardToSee} >\n      <polyline points={polylinePoints}\n        stroke-width=\"{joint._thickness}\" \n        stroke=\"{joint._displayColor}\" \n        fill=\"none\"\n        opacity=\"{joint._opacity}\"\n      >\n    </g>\n  </g>\n  {#if !$creation || $creation.objectType !== \"joint\" || $drawingData.curveToolEnabled  }\n  <g class=\"point-crosshairs\" class:active >\n\n    {#each joint._points as p, pointIndex}\n    <g fill=\"none\" stroke=\"yellow\" opacity=\"0.8\" stroke-width={crosshairThickness} stroke-linecap=\"butt\" \n      transform=\"translate({p.x},{p.y})\"\n    >\n      <line x1={0-crosshairRadius} x2={0+crosshairRadius}\n            y1={0} y2={0}  />\n      <line x1={0} x2={0}\n            y1={0-crosshairRadius} y2={0+crosshairRadius}  />\n      <circle fill=\"transparent\" stroke=\"none\"\n        x={0} y={0}\n        r={crosshairRadius}\n        on:mousedown|stopPropagation|preventDefault={e => pointMoveStart(e, \"_points\", pointIndex)}\n      />\n    </g>\n    {/each}\n\n    {#if joint._controlPoints}\n    <line fill=\"none\" stroke=\"yellow\" opacity=\"0.8\" stroke-width=\"0.5\"\n          x1={joint._points[0].x} x2={joint._points[1].x}\n          y1={joint._points[0].y} y2={joint._points[1].y}  />\n    {#each joint._controlPoints as p, pointIndex}\n    <g fill=\"none\" stroke=\"#33ff44\" opacity=\"0.8\" stroke-width={crosshairThickness} stroke-linecap=\"butt\" \n      transform=\"translate({p.x},{p.y})\"\n    >\n      <line x1={0-crosshairRadius} x2={0+crosshairRadius}\n            y1={0} y2={0}  />\n      <line x1={0} x2={0}\n            y1={0-crosshairRadius} y2={0+crosshairRadius}  />\n      <circle fill=\"transparent\" stroke=\"none\"\n        x={0} y={0}\n        r={crosshairRadius}\n        on:mousedown|stopPropagation|preventDefault={e => pointMoveStart(e, \"_controlPoints\", pointIndex)}\n      />\n    </g>\n    <line fill=\"none\" stroke=\"#33ff44\" opacity=\"0.8\" stroke-width=\"0.5\"\n          x1={p.x} x2={joint._points[pointIndex].x}\n          y1={p.y} y2={joint._points[pointIndex].y}  />\n    {/each}\n    {/if}\n\n  </g>\n  {/if}\n</g>\n\n\n\n<style lang=\"text/postcss\">.point-crosshairs{visibility:hidden;cursor:crosshair}.point-crosshairs.active{visibility:visible}.joint{-webkit-transition:fill .1s;transition:fill .1s;stroke-linecap:round;stroke-linejoin:round}.selectable.hard-to-see{-webkit-transition:outline-color 50ms;transition:outline-color 50ms;outline-width:4px;outline-offset:-4px;outline-style:dashed;outline-color:hsla(0,0%,100%,0)}.selectable:hover{cursor:pointer;outline-color:hsla(0,0%,100%,.5)}.selectable.active{outline-color:hsla(0,0%,100%,.95)}\n/*# sourceMappingURL=src/components/scene/Joint.svelte.map */</style>",
    "\n<script>\n  import { fly } from \"svelte/transition\"\n\n  import { selection } from \"/stores/stores.js\"\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n\n  export let position\n  export let selectionArea\n\n  $: [x,y] = [position.x, position.y].map(v => Math.round(v))\n  let sw, sh\n  $: if(selectionArea) {\n    sw = Math.round(selectionArea.x2-selectionArea.x1)\n    sh = Math.round(selectionArea.y2-selectionArea.y1)\n  }\n\n</script>\n\n<div class=\"absolute z-40 bottom-0 px-4 pointer-events-none flex\">\n\n  <div class=\"section\">\n    <span class=\"text-gray-500 text-xs\">X</span>\n    <span class=\"text-gray-100 w-8 text-right inline-block\">{x}</span>\n    <span class=\"text-gray-500 text-xs ml-2\">Y</span>\n    <span class=\"text-gray-100 w-8 text-right inline-block\">{y}</span>\n  </div>\n\n  {#if $selection.length}\n  <div class=\"ml-4 section\" >\n    <span class=\"text-gray-100\">{$selection.length}</span>\n    <span class=\"text-gray-500 text-xs ml-1\">selected</span>\n  </div>\n  {/if}\n\n  {#if selectionArea}\n  <div class=\"ml-4 section\" >\n    <span class=\"text-gray-500 text-xs\">L</span>\n    <span class=\"text-gray-100 w-8 text-right inline-block\">{sw}</span>\n    <span class=\"text-gray-500 text-xs ml-2\">H</span>\n    <span class=\"text-gray-100 w-8 text-right inline-block\">{sh}</span>\n  </div>\n  {/if}\n\n</div>\n\n<div class=\"right-0 absolute z-30 bottom-0 px-4 flex\">\n\n  <div class=\"section\">\n    <span class=\"text-gray-100\">Miceditor</span>\n    <span class=\"text-gray-500 text-xs ml-1\">v1.3.1</span>\n    <span class=\"text-gray-500 text-xs ml-2\">by</span>\n    <span class=\"text-gray-100 ml-1\">entibo</span>\n  </div>\n\n  <div class=\"ml-2 section\">\n    <Tooltip top title=\"Github\">\n      <a href=\"https://github.com/entibo/miceditor\" target=\"_blank\">\n        <img src=\"dist/github.png\" alt=\"Github\" style=\"width: 24px\" />\n      </a>\n    </Tooltip>\n  </div>\n\n  <div class=\"ml-2 section flex items-center\">\n    <Tooltip top title=\"Atelier801\">\n      <a href=\"https://atelier801.com/topic?f=6&t=884238\" target=\"_blank\">\n          <img src=\"dist/atelier801.png\" alt=\"Atelier801\" />\n      </a>  \n    </Tooltip>\n  </div>\n\n</div>\n\n<style lang=\"text/postcss\">.section{background-color:#2d3748;border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding:.25rem .75rem}a{text-decoration:none}\n/*# sourceMappingURL=src/components/scene/Footer.svelte.map */</style>",
    "\n<script>\n  import Icon from \"fa-svelte\"\n  import { faEye } from \"@fortawesome/free-solid-svg-icons/faEye\"\n  import { faEyeSlash } from \"@fortawesome/free-solid-svg-icons/faEyeSlash\"\n  import { faChevronUp } from \"@fortawesome/free-solid-svg-icons/faChevronUp\"\n  import { faSquare } from \"@fortawesome/free-solid-svg-icons/faSquare\"\n  import { faSquare as faSquareOutline } from \"@fortawesome/free-regular-svg-icons/faSquare\"\n\n  import { \n    selection, visibility,\n    platforms, decorations, shamanObjects,\n    _\n  } from \"/stores/stores.js\"\n\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n\n  export let which\n  export let title\n  export let collapsed\n  export let grow = false\n  export let quarter = false\n  export let noActions = false\n  export let active\n\n  export let count\n  export let max\n\n  let countClass = \"\"\n  $: if(count !== undefined && max !== undefined) {\n    let ratio = parseInt(count)/parseInt(max)\n    countClass = \n      ratio > 1 ? \"text-red-400 very-bold\" :\n      ratio > 0.75 ? \"text-orange-400\" :\n      ratio > 0.5 ? \"text-yellow-400\" :\n      \"text-green-300\"\n  }\n\n</script>\n\n<div class=\"menu flex flex-col my-1\" \n  class:flex-grow={grow && !collapsed} \n  class:active={active}\n  class:quarter={quarter}\n>\n  <div class=\"flex justify-between items-center cursor-pointer border-b border-white-100\"\n    on:click={() => collapsed = !collapsed}\n  >\n    <div class=\"flex-grow flex justify-between px-1 flex-wrap\">\n      <div class=\"flex text-sm\">\n        <Tooltip bottom start title={collapsed ? $_(\"expand\") : $_(\"collapse\")}>\n          <div class=\"icon mr-3\" class:flipped={collapsed}>\n            <Icon icon={faChevronUp} />\n          </div>\n        </Tooltip>\n        <div>{title}</div>\n      </div>\n      {#if !noActions}\n      <div class=\"flex text-sm items-center\">\n        <div class=\"text-xs {countClass}\">\n          {count}/{max}\n        </div>\n        <div class=\"mr-3\"></div>\n        <Tooltip title={$_(\"unselect-all\")}>\n          <div class=\"icon\" on:click|stopPropagation={() => selection.unselectGroup(which)}>\n            <Icon icon={faSquareOutline} />\n          </div>\n        </Tooltip>\n        <div class=\"mr-1\"></div>\n        <Tooltip title={$_(\"select-all\")}>\n          <div class=\"icon\" on:click|stopPropagation={() => selection.selectGroup(which)}>\n            <Icon icon={faSquare} />\n          </div>\n        </Tooltip>\n        <div class=\"mr-3\"></div>\n        <Tooltip title={$_(\"toggle-visibility\")}>\n          <div class=\"icon\" class:text-red-500={!$visibility[which]}\n            on:click|stopPropagation={() => visibility.toggle(which)}\n          >\n            <Icon icon={$visibility[which] ? faEye : faEyeSlash} />\n          </div>\n        </Tooltip>\n      </div>\n      {/if}\n    </div>\n  </div>\n  {#if !collapsed}\n  <slot></slot>\n  {/if}\n</div>\n\n<style lang=\"text/postcss\">.quarter{max-height:25%}.very-bold{font-weight:700;text-shadow:0 0 3px #000}.menu.active{outline:4px dashed #fff}.icon{-webkit-transition:-webkit-transform 80ms;transition:-webkit-transform 80ms;transition:transform 80ms;transition:transform 80ms,-webkit-transform 80ms}.flipped{-webkit-transform-origin:center;transform-origin:center;-webkit-transform:rotateX(180deg);transform:rotateX(180deg)}\n/*# sourceMappingURL=src/components/ui/ObjectPaletteMenu.svelte.map */</style>",
    "\n<script context=\"module\">\n\n  import { get as storeGet } from \"svelte/store\"\n  import { zoom } from \"/stores/stores.js\"\n\n  let resizeInfo = null\n\n  window.addEventListener(\"mousemove\", resizeMove)\n  window.addEventListener(\"mouseup\", resizeStop)\n  window.addEventListener(\"mouseleave\", resizeStop)\n\n  // 0 1 2\n  // 7   3\n  // 6 5 4\n  function resizeMove(e) {\n    if(!resizeInfo) return\n    let {k, start, platform, platformStart} = resizeInfo\n\n    let rotation = platform._rotation || 0\n\n    let isCircle = platform._typeName === \"circle\"\n\n    let scale = 1 / storeGet(zoom)\n    let dx = scale * (e.clientX - start.x)\n    let dy = scale * (e.clientY - start.y)\n\n    let [rdx,rdy] = rotate(dx, dy, -rotation)\n    if([1,5].includes(k)) rdx = 0\n    if([3,7].includes(k)) rdy = 0\n\n    let sign = { x: 1, y: 1 }\n    if([4,5,6].includes(k)) sign.y = -1\n    if([6,7,0].includes(k)) sign.x = -1\n    if(isCircle) {\n      sign.x /= 2\n      sign.y /= 2\n    }\n\n    let newWidth = platformStart._width   + sign.x*(+rdx)\n    let newHeight = platformStart._height + sign.y*(-rdy)\n    let extraWidth = newWidth < 10 ? 10 - newWidth : 0\n    let extraHeight = newHeight < 10 ? 10 - newHeight : 0\n    platform._width = Math.max(10, newWidth)\n    platform._height = Math.max(10, newHeight)\n\n    let [a,b] = rotate(rdx + sign.x*extraWidth, rdy - sign.y*extraHeight, rotation||0)\n    platform._x = Math.round(platformStart._x + a/2)\n    platform._y = Math.round(platformStart._y + b/2)\n\n    encodePlatformData(platform)\n    platforms.update(v => v)\n    selection.update(v => v)\n    buildXML()\n  }\n\n  function resizeStop() {\n    resizeInfo = null\n  }\n\n</script>\n\n<script>\n\n  import { encodePlatformData } from \"/xml-utils.js\"\n  import { \n    highQuality, showInvisibleGrounds,\n    platforms, selection, buildXML \n  } from \"/stores/stores.js\"\n\n  import SvgImage from \"/components/common/SvgImage.svelte\"\n\n  export let platform\n  export let active = false\n\n  $: isCircle = platform._typeName === \"circle\"\n\n  function rotate(x, y, angle, cx=0, cy=0) {\n    var radians = (Math.PI / 180) * angle,\n        cos = Math.cos(radians),\n        sin = -Math.sin(radians),\n        nx = (cos * (x - cx)) + (sin * (y - cy)) + cx,\n        ny = (cos * (y - cy)) - (sin * (x - cx)) + cy;\n    return [nx, ny];\n  }\n\n  $: rs = 6\n  $: rw = rs/2 + (isCircle ? platform._width : platform._width/2)\n  $: rh = rs/2 + (isCircle ? platform._width : platform._height/2)\n\n  function resizeStart(e, k) {\n    resizeInfo = { \n      k,\n      start: { x: e.clientX, y: e.clientY },\n      platformStart: Object.assign({}, platform),\n      platform,\n    }\n  }\n\n  $: isInvisible = platform._invisible || platform._typeName === \"invisible\"\n  $: invisibilityClass = isInvisible ?\n    ($showInvisibleGrounds ? \"half-opacity\" : \"zero-opacity\") :\n    \"\"\n\n</script>\n\n<g \n  transform=\"translate({platform._x}, {platform._y}) \n             rotate({platform._rotation || 0})\"\n>\n  <g class=\"platform\"\n    on:mousedown on:mousemove on:mouseleave\n  >\n\n    {#if platform._groundImageEnabled}\n    <SvgImage class=\"pointer-events-none\"\n      x={-platform._width/2 + platform._groundImageX} \n      y={-platform._height/2 + platform._groundImageY}\n      href={platform._groundImageFullUrl}\n    />}\n    <rect\n      x={-platform._width/2} y={-platform._height/2}\n      width={platform._width} height={platform._height}\n      fill=\"transparent\"\n      class=\"selectable\"\n      class:active\n    />\n    {:else}\n\n    <g class=\"selectable\" class:active >\n      <g class={invisibilityClass} >\n\n        {#if platform._typeName === \"circle\"}\n          <circle\n            r={platform._radius}\n            fill={platform._displayColor}\n          />\n        {:else if platform._typeName === \"rectangle\"}\n          <rect\n            x={-platform._width/2} y={-platform._height/2}\n            width={platform._width} height={platform._height}\n            fill={platform._displayColor}\n          />\n        {:else if [\"wood\", \"ice\", \"trampoline\", \"chocolate\", \"cloud\"].includes(platform._typeName)}\n          <image \n            x={-platform._width/2} y={-platform._height/2}\n            width={platform._width} height={platform._height} \n            preserveAspectRatio=\"none\" \n            href=\"dist/grounds/{ platform._typeName }{ $highQuality? \"-high\" : \"\" }.png\"\n            on:mousedown|preventDefault\n          />\n        {:else if platform._typeName === \"invisible\"}\n          <rect\n            x={-platform._width/2} y={-platform._height/2}\n            width={platform._width} height={platform._height}\n            fill=\"white\"\n          />\n        {:else}\n          <foreignObject\n            x={-platform._width/2} y={-platform._height/2}\n            width={platform._width} height={platform._height} \n          >\n            <div\n              class=\"w-full h-full {platform._typeName !== 'invisible' ? platform._typeName : ''}\"\n              class:sides={platform._width%40===0}\n              class:highQuality={$highQuality}\n            >\n            </div>\n          </foreignObject>\n        {/if}\n\n      </g>\n    </g>\n\n    {/if}\n\n  </g>\n\n  <g transform=\"translate({-rs/2}, {-rs/2})\" \n    class=\"resize-knobs\" class:active\n  >\n    {#each \n    isCircle ? [[+rw,0,3],[-rw,0,7]] : [\n      [-rw,-rh], [0,-rh], [+rw,-rh], [+rw,0],\n      [+rw,+rh], [0,+rh], [-rw,+rh], [-rw,0],\n    ].map(([x,y], k) => [x,y,k])\n    as [x,y,k]}\n    <rect fill=\"white\" width={rs} height={rs} {x} {y}\n      on:mousedown|stopPropagation|preventDefault={e => resizeStart(e, k)}\n    />\n    {/each}\n  </g>\n\n</g>\n\n\n\n<style lang=\"text/postcss\">.half-opacity{opacity:.4}.zero-opacity{opacity:0}.resize-knobs{visibility:hidden;cursor:crosshair}.resize-knobs.active{visibility:visible}.platform circle,.platform rect{-webkit-transition:fill .1s;transition:fill .1s}.selectable{outline-width:4px;outline-offset:-4px;outline-style:dashed;outline-color:hsla(0,0%,100%,0)}.selectable:hover{cursor:pointer;outline-color:hsla(0,0%,100%,.5)}.selectable.active{outline-color:hsla(0,0%,100%,.95)}.cobweb{background:url(grounds/cobweb.png)}.sand{background:url(grounds/sand.png)}.water{background:url(grounds/water.png)}.highQuality.water{background:url(grounds/water-high.png)}.lava{background:url(grounds/lava.png)}.highQuality.lava{background:url(grounds/lava-high.png)}.earth{background:url(grounds/earth.png)}.highQuality.earth{background:url(grounds/earth-high.png)}.grass2{background:url(grounds/grass2-top.png) repeat-x,url(grounds/earth.png)}.grass2.sides{background:url(grounds/grass2-corner.png) no-repeat,url(grounds/grass2-corner-flipped.png) no-repeat 100% 0,url(grounds/grass2-top.png) repeat-x,url(grounds/earth.png)}.highQuality.grass2{background:url(grounds/grass2-top.png) repeat-x,url(grounds/earth-high.png)}.highQuality.grass2.sides{background:url(grounds/grass2-corner.png) no-repeat,url(grounds/grass2-corner-flipped.png) no-repeat 100% 0,url(grounds/grass2-top.png) repeat-x,url(grounds/earth-high.png)}.grass2.sides:before{content:\"\";position:absolute;width:100%;height:100%;top:0;right:0;bottom:0;left:0;top:8px;background:url(grounds/grass2-side.png) repeat-y,url(grounds/grass2-side-flipped.png) repeat-y 100% 0}.grass{background:url(grounds/grass-top.png) repeat-x,url(grounds/earth.png)}.grass.sides{background:url(grounds/grass-corner.png) no-repeat,url(grounds/grass-corner-flipped.png) no-repeat 100% 0,url(grounds/grass-top.png) repeat-x,url(grounds/earth.png)}.highQuality.grass{background:url(grounds/grass-top.png) repeat-x,url(grounds/earth-high.png)}.highQuality.grass.sides{background:url(grounds/grass-corner.png) no-repeat,url(grounds/grass-corner-flipped.png) no-repeat 100% 0,url(grounds/grass-top.png) repeat-x,url(grounds/earth-high.png)}.grass.sides:before{content:\"\";position:absolute;width:100%;height:100%;top:0;right:0;bottom:0;left:0;top:8px;background:url(grounds/grass-side.png) repeat-y,url(grounds/grass-side-flipped.png) repeat-y 100% 0}.snow{background:url(grounds/snow-top.png) repeat-x,url(grounds/earth.png)}.snow.sides{background:url(grounds/snow-top.png) repeat-x,url(grounds/grass-side.png) repeat-y,url(grounds/grass-side-flipped.png) repeat-y 100% 0,url(grounds/earth.png)}.highQuality.snow{background:url(grounds/snow-top.png) repeat-x,url(grounds/earth-high.png)}.highQuality.snow.sides{background:url(grounds/snow-top.png) repeat-x,url(grounds/grass-side.png) repeat-y,url(grounds/grass-side-flipped.png) repeat-y 100% 0,url(grounds/earth-high.png)}.stone{background:url(grounds/stone-top.png) repeat-x,url(grounds/stone.png)}.stone.sides{background:url(grounds/stone-side.png) repeat-y,url(grounds/stone-side.png) repeat-y 100% 0,url(grounds/stone-top.png) repeat-x,url(grounds/stone.png)}.highQuality.stone{background:url(grounds/stone-top.png) repeat-x,url(grounds/stone-high.png)}.highQuality.stone.sides{background:url(grounds/stone-side.png) repeat-y,url(grounds/stone-side.png) repeat-y 100% 0,url(grounds/stone-top.png) repeat-x,url(grounds/stone-high.png)}\n/*# sourceMappingURL=src/components/scene/Platform.svelte.map */</style>",
    "<script>\n  import { slide, fly } from \"svelte/transition\"\n\n  import Icon from \"fa-svelte\"\n  import { faEye } from \"@fortawesome/free-solid-svg-icons/faEye\"\n  import { faEyeSlash } from \"@fortawesome/free-solid-svg-icons/faEyeSlash\"\n  import { faTrashAlt as faTrash } from \"@fortawesome/free-solid-svg-icons/faTrashAlt\"\n  import { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\"\n\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n\n  import { settings, visibility, buildXML, highlightedObject, _ } from \"/stores/stores.js\"\n  import { encodeMapData } from \"/xml-utils.js\"\n\n  export let which\n  export let title\n\n  $: data = $settings\n\n  function updateSettings() {\n    encodeMapData(data)\n    buildXML()\n    settings.update(v => v)\n  }\n  \n  let imageIndexToBeMoved = -1\n  const defaultImageTargetPosition = { index: -1, after: true }\n  let imageTargetPosition = defaultImageTargetPosition\n\n  function mouseMove(e, index) {\n    if(imageIndexToBeMoved < 0) return\n    \n    imageTargetPosition.index = index\n    \n    let elem = e.target\n    while(!elem.classList.contains(\"indented\") && elem.parentElement) {\n      elem = elem.parentElement\n    }\n    if(!elem) return\n    \n    let {y,height} = elem.getBoundingClientRect()\n    let dy = (e.y-y)/height\n    if(dy >= 0.5) imageTargetPosition.after = true\n    else imageTargetPosition.after = false\n  }\n\n  window.addEventListener(\"mouseup\", () => {\n    if(imageIndexToBeMoved < 0) return\n    \n    let list = data[\"_\"+which]\n    \n    let src = list[imageIndexToBeMoved]\n    \n    let offset = imageTargetPosition.after ? 1 : 0\n    let k = imageTargetPosition.index + offset\n    \n    list.splice(k, 0, Object.assign({}, src))\n    list.splice(list.indexOf(src), 1)\n\n    updateSettings()\n    \n    imageTargetPosition = defaultImageTargetPosition\n    imageIndexToBeMoved = -1\n  })\n  window.addEventListener(\"mouseleave\", () => {\n    imageTargetPosition = defaultImageTargetPosition\n\timageIndexToBeMoved = -1\n  })\n\n\n</script>\n\n\n<section class=\"flex-col\">\n  <div class=\"text-sm text-gray-100 w-full flex justify-between\">\n    <span>{title}</span>\n    <div class=\"flex\">\n      <Tooltip inline title={$_(\"button-add\")}>\n        <div class=\"cursor-pointer text-green-500\"\n          on:click={() => {\n            $settings[\"_\"+which].push({url:\"\",x:0,y:0})\n            updateSettings()\n          }}\n        >\n          <Icon icon={faPlus} /></div></Tooltip>\n      <div class=\"mr-2\"></div>\n      <Tooltip inline bottom end title={$_(\"toggle-visibility\")}>\n        <div class=\"cursor-pointer\" class:text-red-500={!$visibility[which]}\n          on:click={() => visibility.toggle(which)}\n        >\n          <Icon icon={$visibility[which] ? faEye : faEyeSlash} /></div></Tooltip>\n    </div>\n  </div>\n  <div class=\"flex flex-col\">\n    {#each data[\"_\"+which] as image, index}\n\t\n\t{#if imageTargetPosition.index === index && !imageTargetPosition.after} \n\t\t<div class=\"rect-target-separator\"></div> \n\t{/if}\n    <div class=\"indented\"\n\t\ton:mousemove={e => mouseMove(e, index)}\n\t>\n\t\n\t  <div class=\"\n\t\t\t{ \"move-rect\" }\n\t\t\t{ imageIndexToBeMoved < 0 || imageIndexToBeMoved == index ? \"blue-rect\" : \"bg-gray-600\" }\n\t\t   \"\n\t\ton:mousedown={() => {\n\t\t  imageIndexToBeMoved = index\n\t\t  imageTargetPosition = { index, after: true }\n\t\t}}\n\t  >\n\t  </div>\n\n      <div class=\"flex my-1\">\n        <label>\n          <span>X</span>\n          <TextInput number value={image.x} on:input={e => { image.x = e.target.value, updateSettings()}} />\n        </label>\n        <label>\n          <span>Y</span>\n          <TextInput number value={image.y} on:input={e => { image.y = e.target.value, updateSettings()}} />\n        </label>\n        <Tooltip inline bottom end title={$_(\"button-delete\")}>\n          <div class=\"cursor-pointer text-red-500 text-sm\"\n            on:click|stopPropagation={() => {\n              $settings[\"_\"+which].splice(index, 1)\n              updateSettings()\n            }}\n          >\n            <Icon icon={faTrash} />\n          </div>\n        </Tooltip>\n      </div>\n\n      <div class=\"flex\">\n        <label>\n          <span>Url</span>\n          <div class=\"rtl-input\">\n            <TextInput placeholder=\"x_transformice/x_evt/x_evt_19/svtrixcv/bateau.png\"\n              value={image.url} on:input={e => { image.url = e.target.value, updateSettings()}} />\n          </div>\n        </label>\n      </div>\n\n      {#if which === \"disappearingImages\"}\n      <div class=\"indented mt-1\"\n        on:mouseenter={() => $highlightedObject = image.index}\n        on:mouseleave={() => $highlightedObject = null}\n      >\n        <div class=\"text-xs text-gray-300\">{$_(\"disappearing-rectangle\")}</div>\n        <div class=\"flex\">\n          <label>\n            <span class=\"text-xs\">{$_(\"left\")}</span>\n            <TextInput number value={image.rx} on:input={e => { image.rx = e.target.value, updateSettings()}} />\n          </label>\n          <label>\n            <span class=\"text-xs\">{$_(\"top\")}</span>\n            <TextInput number value={image.ry} on:input={e => { image.ry = e.target.value, updateSettings()}} />\n          </label>\n        </div>\n        <div class=\"flex\">\n          <label>\n            <span>L</span>\n            <TextInput number value={image.rw} on:input={e => { image.rw = e.target.value, updateSettings()}} />\n          </label>\n          <label>\n            <span>H</span>\n            <TextInput number value={image.rh} on:input={e => { image.rh = e.target.value, updateSettings()}} />\n          </label>\n        </div>\n      </div>\n      {/if}\n\n    </div>\n\t{#if imageTargetPosition.index === index && imageTargetPosition.after} \n\t\t<div class=\"rect-target-separator\"></div> \n\t{/if}\n\t\n    {/each}\n  </div>\n</section>\n\n<style lang=\"text/postcss\">.rtl-input{direction:rtl}.rtl-input[focus-within]{direction:ltr}.rtl-input:focus-within{direction:ltr}.indented{background:hsla(0,0%,100%,.1);border-left-width:2px;border-color:#fff;padding-left:1.25rem;padding-right:.75rem;margin-bottom:.5rem;position:relative}.move-rect{position:absolute;left:0;top:0;width:.75rem;height:100%;cursor:pointer}.blue-rect{background-color:#3182ce}.blue-rect:hover{background-color:#63b3ed}.rect-target-separator{background-color:#3182ce;margin-bottom:.5rem;height:.5rem}section{margin-bottom:.25rem}label,section{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}label{-webkit-transition:.2s;transition:.2s;-webkit-box-pack:justify;justify-content:space-between}label:not(:last-child){margin-right:1rem}label>span{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;margin-right:.75rem;font-size:.875rem;color:#e2e8f0}\n/*# sourceMappingURL=src/components/ui/ImagesSubMenu.svelte.map */</style>",
    "<script>\n  import { slide, fly } from \"svelte/transition\"\n\n  import Icon from \"fa-svelte\"\n  import { faEye } from \"@fortawesome/free-solid-svg-icons/faEye\"\n  import { faEyeSlash } from \"@fortawesome/free-solid-svg-icons/faEyeSlash\"\n  import { faTrashAlt as faTrash } from \"@fortawesome/free-solid-svg-icons/faTrashAlt\"\n  import { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\"\n\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n\n  import { settings, visibility, buildXML, _ } from \"/stores/stores.js\"\n  import { encodeMapData } from \"/xml-utils.js\"\n\n  function updateSettings() {\n    encodeMapData($settings)\n    buildXML()\n    settings.update(v => v)\n  }\n\n</script>\n\n{#if $settings._miceSpawn.type === \"multiple\" && $settings._miceSpawn.positions !== undefined}\n\n<section class=\"flex-col\">\n  <div class=\"text-sm text-gray-100 w-full flex justify-between\">\n    <span>{$_(\"positions\")}</span>\n    <div class=\"flex\">\n      <Tooltip inline title={$_(\"button-add\")}>\n        <div class=\"cursor-pointer text-green-500\"\n          on:click={() => {\n            $settings._miceSpawn.positions.push({x:400,y:200})\n            updateSettings()\n          }}\n        >\n          <Icon icon={faPlus} /></div></Tooltip>\n      <div class=\"mr-2\"></div>\n      <Tooltip inline bottom end title={$_(\"toggle-visibility\")}>\n        <div class=\"cursor-pointer\" class:text-red-500={!$visibility.basic}\n          on:click={() => visibility.toggle(\"basic\")}\n        >\n          <Icon icon={$visibility.basic ? faEye : faEyeSlash} /></div></Tooltip>\n    </div>\n  </div>\n  <div class=\"flex flex-col\">\n    {#each $settings._miceSpawn.positions as pos, index}\n    <div class=\"indented flex my-1\">\n      <label>\n        <span>X</span>\n        <TextInput number value={pos.x} on:input={e => { pos.x = e.target.value, updateSettings()}} />\n      </label>\n      <label>\n        <span>Y</span>\n        <TextInput number value={pos.y} on:input={e => { pos.y = e.target.value, updateSettings()}} />\n      </label>\n      <Tooltip inline bottom end title={$_(\"button-delete\")}>\n        <div class=\"cursor-pointer text-red-500 text-sm\"\n          on:click|stopPropagation={() => {\n            $settings._miceSpawn.positions.splice(index, 1)\n            updateSettings()\n          }}\n        >\n          <Icon icon={faTrash} />\n        </div>\n      </Tooltip>\n    </div>\n    {/each}\n  </div>\n</section>\n\n{/if}\n\n\n<style lang=\"text/postcss\">.indented{border-left-width:2px;border-color:#fff;padding-left:.75rem;margin-bottom:.5rem}section{margin-bottom:.25rem}label,section{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}label{-webkit-transition:.2s;transition:.2s;-webkit-box-pack:justify;justify-content:space-between}label:not(:last-child){margin-right:1rem}label>span{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;margin-right:.75rem;font-size:.875rem;color:#e2e8f0}\n/*# sourceMappingURL=src/components/ui/MultipleMiceSpawnSubMenu.svelte.map */</style>",
    "\n<script>\n\n  import cc from \"color-convert\"\n\n  export let value\n\n  let hsv\n  let lastSetValue\n  function setValue(h, s, v) {\n    hsv = [h, s, v]\n    lastSetValue = value = cc.hsv.hex(h, s, v)\n  }\n  $: if(value !== lastSetValue) hsv = cc.hex.hsv(value)\n\n  $: onlyHue = `hsl(${hsv[0]}, 100%, 50%)`\n  $: hStyle = `\n    background: ${onlyHue};\n    left: 50%; \n    transform: translate(-50%, -50%) \n               translateY(${hueHeight*(1-hsv[0]/360)}px);`\n  $: svStyle = `\n    background: #${value}; \n    transform: translate(-50%, -50%) \n               translate(${svWidth*hsv[1]/100}px, ${svHeight*(1-hsv[2]/100)}px);`\n\n  let hueElement, svElement\n  let hueWidth, hueHeight, svWidth, svHeight\n  let movingHue = false, movingSV = false\n  function onHueMousedown(e) {\n    movingHue = true\n    onMousemove(e)\n  }\n  function onSVMousedown(e) {\n    movingSV = true\n    onMousemove(e)\n  }\n  function onMousemove({x,y}) {\n    if(!movingHue && !movingSV) return\n    let [h,s,v] = hsv\n    if(movingHue) {\n      let { top, right, bottom, left, width, height } = hueElement.getBoundingClientRect()\n      let dy = Math.min(1, Math.max(0, (y - top) / height))\n      let h = (1-dy) * 360\n      setValue(h, s, v)\n    }\n    if(movingSV) {\n      let { top, right, bottom, left, width, height } = svElement.getBoundingClientRect()\n      let dx = Math.min(1, Math.max(0, (x - left) / width))\n      let dy = Math.min(1, Math.max(0, (y - top) / height))\n      let s = dx * 100\n      let v = (1-dy) * 100\n      setValue(h, s, v)\n    }\n    hueElement.dispatchEvent(new Event(\"input\", { bubbles: true }))\n  }\n  function onMouseup(e) {\n    movingHue = movingSV = false\n  }\n  \n</script>\n\n<svelte:window\n  on:mousemove={onMousemove}\n  on:mouseup={onMouseup}\n  on:mouseleave={onMouseup}\n/>\n\n<div class=\"flex p-4 h-64\" style=\"width: 14rem;\" on:input >\n  <div class=\"hue-select w-4 mr-4 rounded-sm relative\"\n    on:mousedown={onHueMousedown}\n    bind:this={hueElement}\n    bind:clientWidth={hueWidth}\n    bind:clientHeight={hueHeight}\n  >\n    <div class=\"selector\" style={hStyle} ></div>\n  </div>\n  <div class=\"value-saturation-select relative flex-grow rounded-sm\"\n    style=\"background: {onlyHue};\"\n    on:mousedown={onSVMousedown}\n    bind:this={svElement}\n    bind:clientWidth={svWidth}\n    bind:clientHeight={svHeight}\n  >\n    <div class=\"selector\" style={svStyle} ></div>\n  </div>\n</div>\n\n\n<style lang=\"text/postcss\">.hue-select{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAEWCAYAAACnsf0eAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcPEgMV7xXP/AAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAFTSURBVDjLfZFdksMgDIM/q0D35x57/+NtgMb7kMZAN9MXjyRLwpngP8UFQvCF4IbgjiAhKOewjGCMO8LK6TtQbAcN5FaQDe3oC/RKyzvN3vvyui1ot4SqgxrMaHNQD60G6oDaqjX+F0wxQD3opfmiagP0iFsm30vLxXBArGNfqUc9nJ/1GJqBvJyDDPIMsgLaM0jl1IZFQX21sGp7aBaJlJcFgV60WwE9LnxKQakIGkregm4IOqqxxSvKtDnhY7su8Io+6agfWkV+lLZ/iUZFmf5EU7P3uKXNV0FDOZrnx1/e+I3f2FGOP/gdKMcogD4mmtCNHRUcpWO7oFvECqBs6YnSEQPd2Z+JjBYzHg9ZII+FUDlahIotidl8Xpp5PDUBooJoAwnRdkS1WBiieVgcUYdP4XNEM+TVkTXWgn2JbUL0eHegLehI1KDt4mZAeCCzA/0BoHfNUPyhWYUAAAAASUVORK5CYII=\");background-repeat:repeat-x;background-size:contain}.value-saturation-select:before{content:\"\";width:100%;height:100%;position:absolute;border-radius:.125rem;background:-webkit-gradient(linear,left bottom,left top,from(#000),to(transparent)),-webkit-gradient(linear,left top,right top,from(#fff),to(transparent));background:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,transparent)}.selector{position:absolute;width:1rem;height:1rem;border-radius:9999px;border-width:2px;border-color:#fff;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}\n/*# sourceMappingURL=src/components/common/ColorPicker.svelte.map */</style>"
  ],
  "names": [],
  "mappings": "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"
}
{
  "version": 3,
  "file": "components.css",
  "sources": [
    "../src/components/ui/Header.svelte",
    "../node_modules/fa-svelte/src/Icon.html",
    "../src/components/ui/ObjectPalette.svelte",
    "../src/components/ui/MainPanel.svelte",
    "../src/components/scene/Scene.svelte",
    "../src/components/common/TextInput.svelte",
    "../src/components/common/Button.svelte",
    "../src/components/common/Tooltip.svelte",
    "../src/components/ui/UserSettings.svelte",
    "../src/components/ui/XmlEditor.svelte",
    "../src/components/ui/HelpMenu.svelte",
    "../src/components/ui/ObjectPaletteMenu.svelte",
    "../src/components/ui/SelectionMenu.svelte",
    "../src/components/ui/MapSettingsMenu.svelte",
    "../src/components/scene/Platform.svelte",
    "../src/components/scene/Decoration.svelte",
    "../src/components/scene/ShamanObject.svelte",
    "../src/components/scene/Footer.svelte",
    "../src/components/ui/ImagesSubMenu.svelte",
    "../src/components/ui/MultipleMiceSpawnSubMenu.svelte",
    "../src/components/common/ColorPicker.svelte"
  ],
  "sourcesContent": [
    "\n<script>\n\n  import clipboardCopy from \"clipboard-copy\"\n\n  import { tick, onMount } from \"svelte\"\n  import { fly, slide } from \"svelte/transition\"\n\n  import Icon from \"fa-svelte\"\n  import { faCopy } from \"@fortawesome/free-solid-svg-icons/faCopy\"\n  import { faUndo } from \"@fortawesome/free-solid-svg-icons/faUndo\"\n  import { faRedo } from \"@fortawesome/free-solid-svg-icons/faRedo\"\n  import { faCog } from \"@fortawesome/free-solid-svg-icons/faCog\"\n  import { faEdit } from \"@fortawesome/free-solid-svg-icons/faEdit\"\n  import { faSearchPlus } from \"@fortawesome/free-solid-svg-icons/faSearchPlus\"\n  import { faQuestion } from \"@fortawesome/free-solid-svg-icons/faQuestion\"\n\n  import { debounce } from \"/utils.js\"\n\n  import { \n    xml, settings, \n    undo, redo, canUndo, canRedo,\n    highQuality, parkour, showGameGUI, showMapBorder, zoom, firstVisit\n  } from \"/stores/stores.js\"\n\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import Button from \"/components/common/Button.svelte\"\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n  import UserSettings from \"/components/ui/UserSettings.svelte\"\n  import XmlEditor from \"/components/ui/XmlEditor.svelte\"\n  import HelpMenu from \"/components/ui/HelpMenu.svelte\"\n\n  let copyIconActive = false\n  function removeCopyIconActive() {\n    copyIconActive = false\n  }\n  async function copyXML() {\n    try {\n      await clipboardCopy($xml)\n      copyIconActive = true\n      debounce(removeCopyIconActive, 500)\n    } catch(e) {}\n  }\n  async function selectXML({target}) {\n    target.select()\n    await tick()\n    target.select()\n  }\n\n  // let currentMenu = firstVisit ? \"help\" : null\n  let currentMenu = null\n  function selectMenu(which) {\n    if(currentMenu === which)\n      currentMenu = null\n    else currentMenu = which\n  }\n\n  function onKeydown({key}) {\n    if(key.toLowerCase() === \"h\") {\n      selectMenu(\"help\")\n    }\n  }\n\n</script>\n\n<svelte:window\n  on:keydown={onKeydown}\n/>\n\n<header class=\"relative flex justify-between items-center px-4 py-2 bg-gray-800 shadow-lg text-white z-10\">\n\n  <div class=\"flex items-center\">\n    <Tooltip inline bottom title=\"H\" >\n      <Button class=\"text-sm\" on:click={selectMenu.bind(null, \"help\")}>\n        <div class=\"flex justify-center items-center\">\n          <span class=\"icon\" class:active={currentMenu === \"help\"}>\n            <Icon icon={faQuestion}/> \n              </span>\n            <span class=\"ml-2 hidden xl:inline\">Help</span>\n        </div>\n      </Button>\n    </Tooltip>\n\n    <div class=\"mr-2\"></div>\n\n    <Tooltip inline bottom title=\"Editor settings\" >\n      <Button class=\"text-sm\" on:click={selectMenu.bind(null, \"settings\")}>\n        <div class=\"flex justify-center items-center\">\n          <span class=\"icon\" class:active={currentMenu === \"settings\"}>\n            <Icon icon={faCog}/> \n              </span>\n          <span class=\"ml-2 hidden xl:inline\">Settings</span>\n        </div>\n      </Button>\n    </Tooltip>\n\n    <div class=\"mr-2\"></div>\n\n    <Tooltip inline bottom title=\"Ctrl+Scroll\" >\n      <Button class=\"text-sm\" on:click={selectMenu.bind(null, \"zoom\")}>\n        <div class=\"flex justify-center items-center\">\n          <span class=\"icon\" class:active={currentMenu === \"zoom\"}>\n            <Icon icon={faSearchPlus}/> \n              </span>\n            <span class=\"ml-2 hidden xl:inline\">Zoom</span>\n        </div>\n      </Button>\n    </Tooltip>\n\n  </div>\n\n\n  <div class=\"mr-4\"></div>\n\n\n  <div class=\"flex items-center\">\n    <Tooltip inline bottom title=\"Large XML editor\" >\n      <Button class=\"text-sm\" on:click={selectMenu.bind(null, \"xmlEditor\")}>\n        <div class=\"flex justify-center items-center\" >\n          <span class=\"icon\" class:active={currentMenu === \"xmlEditor\"}>\n            <Icon icon={faEdit}/> \n              </span>\n          <span class=\"ml-2 hidden xl:inline\">Edit</span>\n        </div>\n      </Button>\n    </Tooltip>\n\n    <div class=\"mr-2\"></div>\n\n    <TextInput value={$xml} on:input={e => $xml = e.target.value} on:click={selectXML} />\n\n    <div class=\"mr-2\"></div>\n\n    <Tooltip inline bottom title=\"Copy XML to clipboard\" >\n      <Button class=\"text-sm\" on:click={copyXML}>\n        <div class=\"flex justify-center items-center\" >\n          <span class=\"icon\" class:active={copyIconActive}>\n            <Icon icon={faCopy}/> \n          </span>\n          <span class=\"ml-2 hidden xl:inline\">Copy</span>\n        </div>\n      </Button>\n    </Tooltip>\n  </div>\n\n\n  <div class=\"mr-4\"></div>\n\n\n  <div class=\"flex\">\n    <Tooltip inline bottom title=\"Ctrl+Z\" >\n      <Button class=\"text-sm\" disabled={!$canUndo} on:click={undo}>\n        <div class=\"flex justify-center items-center\">\n          <Icon icon={faUndo}/> <span class=\"ml-2 hidden xl:inline\">Undo</span>\n        </div>\n      </Button>\n    </Tooltip>\n    <div class=\"mr-2\"></div>\n    <Tooltip inline bottom end title=\"Ctrl+Shift+Z / Ctrl+Y\" >\n      <Button class=\"text-sm\" disabled={!$canRedo} on:click={redo}>\n        <div class=\"flex justify-center items-center\">\n          <Icon icon={faRedo}/> <span class=\"ml-2 hidden xl:inline\">Redo</span>\n        </div>\n      </Button>\n    </Tooltip>\n  </div>\n\n\n\n  {#if currentMenu === \"settings\"}\n\n  <div class=\"lower-panel w-64 p-2 xl:p-4\" transition:slide={{duration: 100}}>\n\n    <UserSettings />\n\n  </div>\n\n  {:else if currentMenu === \"zoom\"}\n\n  <div class=\"lower-panel w-64 p-2 xl:p-4\" transition:slide={{duration: 100}}>\n    \n    <section>\n      <label>\n        <span>Zoom</span>\n        <TextInput number bind:value={$zoom} />\n      </label>\n      <input type=range bind:value={$zoom} min=0.1 max=5 step=0.1 />\n    </section>\n\n  </div>\n\n  {:else if currentMenu === \"xmlEditor\"}\n\n  <div class=\"lower-panel xml p-2 xl:p-4\" transition:slide={{duration: 100}}>\n    \n    <XmlEditor />\n\n  </div>\n\n  {:else if currentMenu === \"help\"}\n\n  <div class=\"lower-panel p-2 xl:p-4\" transition:slide={{duration: 100}}>\n    \n    <HelpMenu />\n\n  </div>\n\n  {/if}\n\n\n</header>\n\n\n<style lang=\"text/postcss\">label,section{display:flex;align-items:center}label{transition:.2s;justify-content:space-between}label+label{margin-left:1rem}label>span,small-text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;margin-right:.75rem;font-size:.875rem;color:#e2e8f0}.lower-panel{-webkit-transform:translateY(100%);transform:translateY(100%);bottom:1px;position:absolute;z-index:20;box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05);border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem;color:#e2e8f0;white-space:nowrap;background-color:#2b3e50}.lower-panel.xml{left:0;right:0;width:100%;border-radius:0}.icon{transition:50ms;display:flex}.icon.active{-webkit-transform:scale(1.3);transform:scale(1.3)}</style>",
    "<svg\r\n  aria-hidden=\"true\"\r\n  class=\"{classes}\"\r\n  role=\"img\"\r\n  xmlns=\"http://www.w3.org/2000/svg\"\r\n  viewBox=\"{viewBox}\"\r\n>\r\n  <path fill=\"currentColor\" d=\"{path}\" />\r\n</svg>\r\n<script>\r\n  export let icon;\r\n\r\n  let path = [];\r\n  let classes = \"\";\r\n  let viewBox = \"\";\r\n\r\n  $: viewBox = \"0 0 \" + icon.icon[0] + \" \" + icon.icon[1];\r\n\r\n  $: classes = \"fa-svelte \" + ($$props.class ? $$props.class : \"\");\r\n\r\n  $: path = icon.icon[4];\r\n</script>\r\n\r\n<style>.fa-svelte{width:1em;height:1em;overflow:visible;display:inline-block}</style>",
    "\n<script>\n\n  import Icon from \"fa-svelte\"\n  import { faChevronUp } from \"@fortawesome/free-solid-svg-icons/faChevronUp\"\n  import { faSquare } from \"@fortawesome/free-solid-svg-icons/faSquare\"\n  import { faEye } from \"@fortawesome/free-solid-svg-icons/faEye\"\n  import { faEyeSlash } from \"@fortawesome/free-solid-svg-icons/faEyeSlash\"\n\n  import { fly } from \"svelte/transition\"\n\n  import { \n    selection, creation, groundTypePicker, visibility,\n    settings, platforms, decorations, shamanObjects,\n  } from \"/stores/stores.js\"\n\n  import shamanObjectMetadata from \"/shamanObjectMetadata.js\"\n  import { groundTypes } from \"/xml-utils.js\"\n\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n  import ObjectPaletteMenu from \"/components/ui/ObjectPaletteMenu.svelte\"\n\n  let isThin = false\n\n  let collapsed = {\n    grounds: false,\n    basic: false,\n    decorations: false,\n    objects: false,\n  }\n\n  $: tryCancelCreation(collapsed)\n\n  function tryCancelCreation() {\n    if(!$creation) return\n\n    if(collapsed.grounds && $creation.objectType === \"platform\")\n      $creation = null\n    else if(collapsed.objects && $creation.objectType === \"shamanObject\")\n      $creation = null\n    else if($creation.objectType === \"decoration\") {\n      let isCreationBasic = [\"T\",\"F\",\"DS\",\"DC\",\"DC2\"].includes($creation.type)\n      if(collapsed.basic && isCreationBasic)\n        $creation = null\n      else if(collapsed.decorations && !isCreationBasic)\n        $creation = null\n    }\n  }\n\n  $: if($groundTypePicker === true) {\n    collapsed.grounds = false\n  }\n\n\n\n  function onTileClick(objectType, type) {\n    if($groundTypePicker) {\n      groundTypePicker.pick(type)\n    }\n    else if($creation && $creation.objectType === objectType && $creation.type == type) {\n      $creation = null\n    }\n    else {\n      creation.setFromType(objectType, type)\n    }\n  }\n\n  $: dsDisabled = \n    $settings._miceSpawn.type === \"normal\" ? \n      $decorations.filter(({name}) => name === \"DS\").length > 0 \n    :\n    $settings._miceSpawn.type === \"multiple\" ? \n      true\n    :\n    $settings._miceSpawn.type === \"random\" ? \n      true\n    : \n    false\n\n  $: dcCount = $decorations.filter(({name}) => name === \"DC\").length\n  $: dc2Count = $decorations.filter(({name}) => name === \"DC2\").length\n\n  $: objectMaxCount = $settings._defilanteEnabled ? 200 : 30\n\n</script>\n\n<div class=\"panel relative w-64 p-2 xl:p-4 bg-gray-700 shadow-lg text-white z-10 flex-shrink-0 flex flex-col\"\n    class:thin={isThin}\n> \n\n  <ObjectPaletteMenu which=\"basic\" title=\"Basic\" bind:collapsed={collapsed.basic} max=\"40\" count={$decorations.length}>\n    <div class=\"flex flex-wrap justify-center py-1\">\n      {#each [\"F\", \"T\"] as type}\n        <div class=\"tile\" class:active={$creation && $creation.objectType === \"decoration\" && $creation.type == type}\n          on:click={() => onTileClick(\"decoration\", type)}\n        >\n          <img class=\"dim-max-40\" src={`decorations/${type}.png`} alt={type}/>\n        </div>\n      {/each}\n\n      <div class=\"tile\" class:active={$creation && $creation.objectType === \"decoration\" && $creation.type == \"DS\"}\n        class:disabled={dsDisabled}\n        on:click={() => onTileClick(\"decoration\", \"DS\")}\n      >\n        <img class=\"dim-max-40\" src=\"decorations/DS.png\" alt=\"DS\"/>\n      </div>\n\n      <div class=\"tile\" class:active={$creation && $creation.objectType === \"decoration\" && $creation.type == \"DC\"}\n        class:disabled={dcCount > 0}\n        on:click={() => onTileClick(\"decoration\", \"DC\")}\n      >\n        <img class=\"dim-max-40\" src=\"decorations/DC.png\" alt=\"DC\"/>\n      </div>\n\n      <div class=\"tile\" class:active={$creation && $creation.objectType === \"decoration\" && $creation.type == \"DC2\"}\n        class:disabled={dcCount < 1 || dc2Count > 0}\n        on:click={() => onTileClick(\"decoration\", \"DC2\")}\n      >\n        <img class=\"dim-max-40\" src=\"decorations/DC2.png\" alt=\"DC2\"/>\n      </div>\n    </div>\n  </ObjectPaletteMenu>\n\n  <ObjectPaletteMenu which=\"grounds\" title=\"Grounds\" bind:collapsed={collapsed.grounds} \n    active={$groundTypePicker} max=\"50\" count={$platforms.length}\n  >\n    <div class=\"flex flex-wrap justify-center content-center\">\n    \n      {#each groundTypes as ground, type}\n        <div class=\"tile dim-40\" class:active={$creation && $creation.objectType === \"platform\" && $creation.type == type}\n          \n          on:click={() => onTileClick(\"platform\", type)}\n        >\n          <img class=\"rounded-sm\" src=\"grounds/{ground}.png\" alt={ground}/>\n        </div>\n      {/each}\n    </div>\n  </ObjectPaletteMenu>\n\n  <ObjectPaletteMenu which=\"decorations\" title=\"Decorations\" bind:collapsed={collapsed.decorations} grow max=\"40\" count={$decorations.length}>\n    <div class=\"scrollbox-container\">\n      <div class=\"flex flex-wrap justify-center scrollbox\">\n        {#each Array(133) as _, type}\n          <div class=\"tile dim-40\" class:active={$creation && $creation.objectType === \"decoration\" && $creation.type == type}\n            on:click={() => onTileClick(\"decoration\", type)}\n          >\n            <img class=\"dim-max-40\" src={`decorations/${type}.png`} alt={type}/>\n          </div>\n        {/each}\n      </div>\n    </div>\n  </ObjectPaletteMenu>\n\n\n  <ObjectPaletteMenu which=\"objects\" title=\"Objects\" bind:collapsed={collapsed.objects} grow max={objectMaxCount} count={$shamanObjects.length}>\n    <div class=\"scrollbox-container\">\n      <div class=\"flex flex-wrap justify-center scrollbox\">\n\n        {#if $settings._defilanteEnabled}\n        <div class=\"w-full flex flex-wrap justify-center\">\n          {#each Object.entries(shamanObjectMetadata).filter(([_,data]) => data.defilanteVariant) as [type, data]}\n          <div class=\"tile\" class:active={$creation && $creation.objectType === \"shamanObject\" && $creation.type == type}\n            on:click={() => onTileClick(\"shamanObject\", type)}\n          >\n            <img src=\"shamanObjects/{data.defilanteVariant.sprite}\" alt={data.defilanteVariant.sprite}/>\n          </div>\n          {/each}\n        </div>\n        {/if}\n\n        {#each Object.entries(shamanObjectMetadata).filter(([_,data]) => !data.isVariant) as [type, data]}\n        <div class=\"tile\" class:active={$creation && $creation.objectType === \"shamanObject\" && $creation.type == type}\n          on:click={() => onTileClick(\"shamanObject\", type)}\n        >\n          {#if data.sprite}\n          <img src=\"shamanObjects/{data.sprite}\" alt={data.sprite}/>\n          {:else}\n          <img src=\"shamanObjects/{data.spritesheet}\" alt={data.sprite}\n            style=\" object-fit: none;\n                    object-position:  {-data.offset.x-(data.width-data.boundingWidth)/2 + (data.spritesheet.includes('anvils') ? 10 : 0)}px \n                                      {-data.offset.y-(data.height-data.boundingHeight)/2}px;\n                    width: {data.boundingWidth + (data.spritesheet.includes('anvils') ? 20 : 0)}px; \n                    height: {data.boundingHeight}px;\"\n          />\n          {/if}\n        </div>\n        {/each}\n\n      </div>\n    </div>\n  </ObjectPaletteMenu>\n\n  {#if !collapsed.objects && $creation && $creation.objectType === \"shamanObject\" && shamanObjectMetadata[$creation.type].variants}\n  <!-- <div  class=\"flex flex-grow\"> -->\n    <ObjectPaletteMenu title=\"Variants\" noActions grow>\n      <div transition:fly={{duration:100, y: 50}} class=\"scrollbox-container\">\n        <div class=\"block text-center scrollbox\">\n\n          {#each shamanObjectMetadata[$creation.type].variants.map(type => [type, shamanObjectMetadata[type]]) as [type, data]}\n          <div class=\"tile\" class:active={$creation && $creation.objectType === \"shamanObject\" && $creation.type == type}\n            style=\"display: inline-block\"\n            on:click={() => onTileClick(\"shamanObject\", type)}\n          >\n            {#if data.sprite}\n            <img src=\"shamanObjects/{data.sprite}\" alt={data.sprite}/>\n            {:else}\n            <img src=\"shamanObjects/{data.spritesheet}\" alt={data.sprite}\n              style=\" object-fit: none;\n                      object-position:  {-data.offset.x-(data.width-data.boundingWidth)/2 + (data.spritesheet.includes('anvils') ? 10 : 0)}px \n                                        {-data.offset.y-(data.height-data.boundingHeight)/2}px;\n                      width: {data.boundingWidth + (data.spritesheet.includes('anvils') ? 20 : 0)}px; \n                      height: {data.boundingHeight}px;\"\n            />\n            {/if}\n          </div>\n          {/each}\n          \n        </div>\n      </div>\n    </ObjectPaletteMenu>\n  <!-- </div> -->\n  {/if}\n\n  <div class=\"thinButton\"\n    on:click={() => isThin = !isThin}\n  >\n    <div class=\"chevron\" class:flipped={isThin}>\n      <div>\n        <Icon icon={faChevronUp} />\n      </div>\n    </div>\n  </div>\n\n\n</div>\n\n<style lang=\"text/postcss\">.thin{width:8rem!important;padding:.5rem!important}.scrollbox-container{flex-grow:1;overflow:hidden;position:relative}.scrollbox{overflow:auto;top:0;left:0;padding-top:.25rem;padding-bottom:.25rem}.object-variants,.scrollbox{position:absolute;bottom:0;right:0}.object-variants{background-color:#4a5568;padding:1rem;box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);max-height:100%;-webkit-transform:translateX(100%);transform:translateX(100%)}.dim-40{width:40px;height:40px}.dim-max-40{max-width:40px;max-height:40px}.tile{margin:.25rem;cursor:pointer;display:flex;justify-content:center;align-items:center;transition:-webkit-filter 40ms;transition:filter 40ms;transition:filter 40ms,-webkit-filter 40ms}.tile.active{outline-width:4px;outline-offset:-4px;outline-style:dashed;outline-color:#fff}.tile:hover{-webkit-filter:brightness(1.15) drop-shadow(0 3px 5px rgba(0,0,0,.2));filter:brightness(1.15) drop-shadow(0 3px 5px rgba(0,0,0,.2))}.tile.disabled{pointer-events:none;opacity:.5}.thinButton{position:absolute;right:0;top:50%;bottom:50%;z-index:-1;opacity:0;transition:80ms;pointer-events:none}.panel:hover .thinButton{opacity:1;-webkit-transform:translate(50%);transform:translate(50%);pointer-events:all;cursor:pointer}.chevron{border-radius:9999px;padding:1rem .5rem 1rem 2rem;background-color:#4a5568;margin-left:-.75rem}.chevron>*{transition:-webkit-transform 80ms;transition:transform 80ms;transition:transform 80ms,-webkit-transform 80ms;-webkit-transform-origin:center;transform-origin:center;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.chevron.flipped>*{-webkit-transform:rotate(-90deg) rotateX(180deg);transform:rotate(-90deg) rotateX(180deg)}</style>",
    "\n<script>\n  import { slide, fly } from \"svelte/transition\"\n\n  import SelectionMenu from \"/components/ui/SelectionMenu.svelte\"\n  import MapSettingsMenu from \"/components/ui/MapSettingsMenu.svelte\"\n\n  import { selection } from \"/stores/stores.js\"\n\n</script>\n\n\n\n<div class=\"relative w-64 text-white z-10 flex-shrink-0\"> \n  <MapSettingsMenu />\n\n  {#if $selection.length}\n\n  <div transition:fly={{ x: 500, duration: 80 }} class=\"flying\">\n    <SelectionMenu /> \n  </div>\n\n  {/if}\n</div>\n\n<style lang=\"test/postcss\">.flying{padding:1rem;background-color:#4a5568;color:#fff;z-index:20;overflow:auto;width:100%;height:100%;position:absolute;top:0;right:0;bottom:0}</style>",
    "<script>\n\n  import { onMount, tick } from \"svelte\"\n  import { fade } from \"svelte/transition\"\n\n  import { encodeObjectData, rotate } from \"/xml-utils.js\"\n  import { \n    platforms, decorations, shamanObjects, \n    settings, selection, creation, visibility, highlightedObject, buildXML,\n    showGameGUI, showMapBorder, gridSettings, zoom } from \"/stores/stores.js\"\n  import Platform from \"/components/scene/Platform.svelte\"\n  import Decoration from \"/components/scene/Decoration.svelte\"\n  import ShamanObject from \"/components/scene/ShamanObject.svelte\"\n  import Footer from \"/components/scene/Footer.svelte\"\n\n\n  $: visiblePlatforms = $visibility.grounds ? $platforms : []\n  $: visibleShamanObjects = $visibility.objects ? $shamanObjects : []\n  $: visibleDecorations = computeVisibleDecorations($decorations, $visibility)\n  function computeVisibleDecorations(list, {decorations, basic}) {\n    let r = list\n    if(!decorations) r = r.filter(o => o.name !== \"P\")\n    if(!basic) r = r.filter(o => o.name === \"P\")\n    return r\n  }\n\n  $: visibleBackgroundImages = $visibility.backgroundImages ? $settings._backgroundImages : []\n  $: visibleForegroundImages = $visibility.foregroundImages ? $settings._foregroundImages : []\n  $: visibleDisappearingImages = $visibility.disappearingImages ? $settings._disappearingImages : []\n\n  $: objects = [...visiblePlatforms, ...visibleDecorations, ...visibleShamanObjects]\n\n  let containerElement\n\n  let svgWidth = 0, svgHeight = 0\n  let pan = { x: 0, y: 0 }\n  let mouse = { x: 0, y: 0 }\n\n  function sceneToGameCoordinates({ x, y }) {\n    return {\n      x: (1/$zoom)*(x - pan.x),\n      y: (1/$zoom)*(y - pan.y),\n    }\n  }\n  $: mouseGame = sceneToGameCoordinates(mouse)\n\n  function resetPan() {\n    pan.x = Math.round( svgWidth/2 - $settings._width/2 )\n    pan.y = Math.round( svgHeight/2 - $settings._height/2 )\n  }\n  function centerPanOnMouse() {\n    pan.x = -(mouseGame.x*$zoom - mouse.x)\n    pan.y = -(mouseGame.y*$zoom - mouse.y)\n  }\n  onMount(async () => {\n    await tick()\n    resetPan()\n  })\n\n  $: playerView = getPlayerView($settings, $zoom, pan, svgWidth, svgHeight)\n  function getPlayerView() {\n    let {x,y} = sceneToGameCoordinates({ x: svgWidth/2, y: svgHeight/2 })\n    return { \n      x: Math.max(0, Math.min($settings._width-800, x-400)),\n      y: Math.max(0, Math.min($settings._height-400, y-200)),\n    }\n  }\n\n  let spaceKeyDown = false\n  let shiftKeyDown = false\n  let ctrlKeyDown = false\n\n  function onWindowKeydown(e) {\n    let {shiftKey, ctrlKey, key} = e\n    \n    if(shiftKey) {\n      shiftKeyDown = true\n    }\n    if(ctrlKey) {\n      ctrlKeyDown = true\n    }\n    if(key === \" \") {\n      spaceKeyDown = true\n      e.preventDefault()\n    }\n    if(key === \"Escape\") {\n      if($creation) {\n        $creation = null\n      }\n      else if ($selection.length) {\n        $selection = []\n      }\n      else if (Math.abs($zoom - 1) >= 0.0001) {\n        $zoom = 1\n        centerPanOnMouse()\n      }\n      else {\n        resetPan()\n      }\n    }\n  }\n\n  function onKeydown(e) {\n    let {shiftKey, ctrlKey, key} = e\n    key = key.toLowerCase()\n\n    // console.log(\"onKeyDown\", e.key, e)\n    \n    if(key.startsWith(\"arrow\")) {\n      let dx = key === \"arrowleft\" ? -1 : key === \"arrowright\" ? 1 : 0\n      let dy = key === \"arrowup\" ? -1 : key === \"arrowdown\" ? 1 : 0\n      if(shiftKey) {\n        dx *= 10\n        dy *= 10\n      }\n      if(ctrlKey) {\n        dx *= 100\n        dy *= 100\n      }\n      selection.move(dx, dy)\n    }\n    else if(key === \"delete\" && $selection.length) {\n      selection.remove()\n    }\n    else if(key === \"d\" && $selection.length) {\n      selection.duplicate()\n    }\n    else if(key === \"a\" && ctrlKey) {\n      $creation = null\n      $selection = shiftKey ? [] : objects\n      e.preventDefault()\n    }\n    else if(key === \"x\" && ctrlKey && $selection.length) {\n      selection.cut()\n      e.preventDefault()\n    }\n    else if(key === \"c\" && ctrlKey && $selection.length) {\n      selection.copy()\n      e.preventDefault()\n    }\n    else if(key === \"v\" && ctrlKey) {\n      selection.paste()\n      e.preventDefault()\n    }\n  }\n\n  function onWindowKeyup({key}) {\n    if(key === \"Shift\") {\n      shiftKeyDown = false\n    }\n    if(key === \"Control\") {\n      ctrlKeyDown = false\n    }\n    if(key === \" \") {\n      spaceKeyDown = false\n    } \n  }\n\n  let mousedownInfo = null\n\n  function getSceneCoordinates(e) {\n    return {\n      x: e.clientX - containerElement.offsetLeft,\n      y: e.clientY - containerElement.offsetTop,\n    }\n  }\n\n  function onBackgroundMousedown(e) {\n    if(spaceKeyDown) {\n      mousedownInfo = {}\n      mousedownInfo.start = getSceneCoordinates(e)\n      mousedownInfo.last = mousedownInfo.start\n      mousedownInfo.type = \"pan\"\n    }\n    else if($creation && $creation.objectType !== \"platform\") {\n      creation.create(mouseGame)\n    }\n    else {\n      if(!e.shiftKey) {\n        $selection = []\n      }\n      mousedownInfo = {}\n      mousedownInfo.start = getSceneCoordinates(e)\n      mousedownInfo.last = mousedownInfo.start\n      mousedownInfo.type = \"select\"\n      mousedownInfo.previousSelection = $selection.slice()\n    }\n  }\n\n  function onObjectMousedown(e, object) {\n    if(spaceKeyDown) return\n\n    e.stopPropagation()\n\n    let isSelected = $selection.includes(object)\n    if(e.shiftKey) {\n      if(isSelected) {\n        $selection = $selection.filter(p => p !== object)\n      }\n      else {\n        $selection = [...$selection, object]\n      }\n    }\n    else {\n      if(!isSelected) {\n        $selection = [object]\n      }\n      mousedownInfo = {}\n      mousedownInfo.start = getSceneCoordinates(e)\n      mousedownInfo.last = mousedownInfo.start\n      mousedownInfo.type = \"move\"\n    }\n    \n  }\n\n  function onWindowMousemove(e) {\n    mouse = getSceneCoordinates(e)\n\n    if(!mousedownInfo) return\n\n    if(mousedownInfo.type === \"pan\") {\n      pan.x += mouse.x - mousedownInfo.last.x\n      pan.y += mouse.y - mousedownInfo.last.y\n    }\n    else if(mousedownInfo.type === \"move\") {\n      let dx = (1/$zoom)*(mouse.x - mousedownInfo.last.x)\n      let dy = (1/$zoom)*(mouse.y - mousedownInfo.last.y)\n      selection.move(dx, dy)\n    }\n    else if(mousedownInfo.type === \"select\" && !$creation) {\n      let { x1, y1, x2, y2 } = selectionArea\n      let inSelectionArea = objects.filter(object => {\n        let bb = object._boundingBox\n        return bb.x1+object._x >= x1 && bb.x2+object._x <= x2\n            && bb.y1+object._y >= y1 && bb.y2+object._y <= y2\n      })\n      $selection = [...new Set([...inSelectionArea, ...mousedownInfo.previousSelection])]\n    }\n\n    mousedownInfo.last = mouse\n\n  }\n\n  function onWindowMouseup() {\n    if($creation && $creation.objectType === \"platform\" \n    && mousedownInfo && mousedownInfo.type === \"select\") {\n      let width = selectionArea.x2 - selectionArea.x1\n      let height = selectionArea.y2 - selectionArea.y1\n      creation.create({\n        x: selectionArea.x1 + width/2,\n        y: selectionArea.y1 + height/2,\n        width, height,\n      })\n    }\n\n    mousedownInfo = null\n  }\n\n  function onWindowMouseleave() {\n    mousedownInfo = null\n  }\n\n  let selectionArea = null\n  $: if(mousedownInfo && mousedownInfo.type === \"select\") {\n    let [x1, x2] = [mousedownInfo.start.x, mousedownInfo.last.x]\n                    .sort((a,b) => a-b)\n                    .map(v => (1/$zoom)*(v - pan.x))\n    let [y1, y2] = [mousedownInfo.start.y, mousedownInfo.last.y]\n                    .sort((a,b) => a-b)\n                    .map(v => (1/$zoom)*(v - pan.y))\n    selectionArea = { x1, y1, x2, y2 }\n  } else selectionArea = null\n\n\n  function onWheel(e) {\n    e.preventDefault()\n    if(e.ctrlKey) {\n      let dz = - Math.sign(e.deltaY) * 0.1\n      $zoom = $zoom + dz\n      centerPanOnMouse()\n    }\n    else {\n      let factor = e.altKey ? 1 : 10\n      let da = Math.sign(e.deltaY) * factor\n      if($creation && $creation.objectType === \"shamanObject\") {\n        creation.rotate(da)\n      }\n      else if($selection.length) {\n        if(e.shiftKey) {\n          let {x,y} = mouseGame\n          selection.rotate(da, x, y)\n        }\n        else {\n          selection.rotate(da)\n        }\n      }\n    }\n    \n  }\n\n  function onBlur() {\n    console.log(\"blur\")\n    ctrlKeyDown = false\n    shiftKeyDown = false\n  }\n\n\n</script>\n\n<svelte:window \n  on:keydown={onWindowKeydown}\n  on:keyup={onWindowKeyup} \n  on:mousemove={onWindowMousemove}\n  on:mouseup={onWindowMouseup}\n  on:mouseleave={onWindowMouseleave}\n/>\n\n<div class=\"flex-grow bg-tfm-blue outline-none\" \n  bind:this={containerElement}\n  on:wheel={onWheel}\n  on:mousedown={onBackgroundMousedown}  \n  on:blur={onBlur}\n  on:keydown={onKeydown} tabindex=\"-1\"\n  bind:clientWidth={svgWidth} bind:clientHeight={svgHeight}\n>\n  <svg class=\"w-full h-full\" >\n  \n    <defs>\n      <pattern id=\"grid\" patternUnits=\"userSpaceOnUse\"\n          width={$gridSettings.width*$zoom} height={$gridSettings.height*$zoom} x={pan.x} y={pan.y}\n      >\n        <path d={`M ${$gridSettings.width*$zoom} 0 L 0 0 0 ${$gridSettings.height*$zoom}`} \n          fill=\"none\" stroke={\"#\"+$gridSettings.color} stroke-width=\"1\"\n        />\n      </pattern>\n    </defs>\n    {#if $gridSettings.enabled}\n    <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />\n    {/if}\n\n\n    <g transform=\"translate({pan.x}, {pan.y}) scale({$zoom})\">\n      \n      {#each visibleBackgroundImages as {fullUrl,x,y}}\n      <image x={x} y={y}\n            href={fullUrl}\n      />\n      {/each}\n\n      {#if $settings._backgroundImageId >= 0}\n      <image x=\"0\" y=\"0\" \n            width={$settings._width} height={$settings._height}\n            href=\"backgrounds/{$settings._backgroundImageId}.svg\"\n      />\n      {/if}\n\n      {#if $showMapBorder}\n      <rect x=\"0\" y=\"0\" \n            width={$settings._width} height={$settings._height}\n            class=\"mapBorder\"\n      />\n      {/if}\n\n\n      {#each visibleDecorations.filter(o => !o._foreground) as decoration}\n        <Decoration decoration={decoration} active={$selection.includes(decoration)}\n          on:mousedown={e => onObjectMousedown(e, decoration)}\n        />\n      {/each}\n\n      {#each visiblePlatforms.filter(o => !o._foreground) as platform}\n        <Platform platform={platform} active={$selection.includes(platform)} \n          on:mousedown={e => onObjectMousedown(e, platform)}\n        />\n      {/each}\n\n      {#each visibleShamanObjects.filter(o => !o._isNail) as shamanObject}\n        <ShamanObject shamanObject={shamanObject} active={$selection.includes(shamanObject)}\n          on:mousedown={e => onObjectMousedown(e, shamanObject)}\n        />\n      {/each}\n\n      {#each visibleForegroundImages as {fullUrl,x,y}}\n      <image class=\"pointer-events-none\"\n        x={x} y={y}\n        href={fullUrl}\n      />\n      {/each}\n\n      {#each visibleDisappearingImages as data}\n      <g class=\"pointer-events-none\">\n        <image \n          x={data.x} y={data.y}\n          href={data.fullUrl}\n        />\n        {#if $highlightedObject === data.index}\n        <rect class=\"selectionArea\" fill=\"none\" \n          x={data.rx} y={data.ry}\n          width={data.rw} height={data.rh}\n        />\n        {/if}\n      </g>\n      {/each}\n\n\n      {#each visibleDecorations.filter(o => o._foreground) as decoration}\n        <Decoration decoration={decoration} active={$selection.includes(decoration)}\n          on:mousedown={e => onObjectMousedown(e, decoration)}\n        />\n      {/each}\n\n      {#if $settings._miceSpawn.type === \"multiple\" && $visibility.basic}\n      <g class=\"pointer-events-none\">\n        {#each $settings._miceSpawn.positions as {x,y}}\n        <Decoration decoration={{ name: \"DS\", _type: \"DS\", _x:x, _y:y, }} />\n        {/each}\n      </g>\n      {/if}\n\n      {#each visiblePlatforms.filter(o => o._foreground) as platform}\n        <Platform platform={platform} active={$selection.includes(platform)} \n          on:mousedown={e => onObjectMousedown(e, platform)}\n        />\n      {/each}\n\n      {#each visibleShamanObjects.filter(o => o._isNail) as shamanObject}\n        <ShamanObject shamanObject={shamanObject} active={$selection.includes(shamanObject)}\n          on:mousedown={e => onObjectMousedown(e, shamanObject)}\n        />\n      {/each}\n\n\n      {#if $showGameGUI}\n      <g class=\"playerView\" transform=\"translate({playerView.x}, {playerView.y})\">\n        <rect width=\"800\" height=\"20\" />\n        <rect y=\"400\" width=\"800\" height=\"200\" />\n      </g>\n      {/if}\n\n      {#if selectionArea}\n      <g >\n        <rect\n          class=\"selectionArea\"\n          x={selectionArea.x1} y={selectionArea.y1}\n          width={selectionArea.x2 - selectionArea.x1} \n          height={selectionArea.y2 - selectionArea.y1} />\n      </g>\n      {/if}\n\n      {#if $creation}\n      <g class=\"\" transform={`translate(${mouseGame.x}, ${mouseGame.y})`}>\n        {#if $creation.objectType === \"platform\"}\n          <g transform=\"translate(10, 20) scale(0.5)\">\n            <Platform platform={$creation.object}/>\n          </g>\n        {:else if $creation.objectType === \"decoration\"}\n          <Decoration decoration={$creation.object}/>\n        {:else if $creation.objectType === \"shamanObject\"}\n          <ShamanObject shamanObject={$creation.object}/>\n        {/if}\n      </g>\n      {/if}\n\n      {#if shiftKeyDown}\n      <g class=\"pointer-events-none\"\n        stroke=\"black\"\n        transform={`translate(${mouseGame.x}, ${mouseGame.y})`}\n      >\n        <line x1=\"-20\" y1=\"0\" x2=\"20\" y2=\"0\"/>\n        <line y1=\"-20\" x1=\"0\" y2=\"20\" x2=\"0\"/>\n      </g>\n      {/if}\n      \n      {#if $highlightedObject === \"miceSpawn\" && $settings._miceSpawn.type === \"random\"}          \n      <g class=\"pointer-events-none\"\n        stroke=\"white\" stroke-width=\"4\" stroke-dasharray=\"8\"\n      >\n        {#if $settings._miceSpawn.axis === \"x\"}\n          <line \n            x1={0} y1={$settings._miceSpawn.value}\n            x2={$settings._width} y2={$settings._miceSpawn.value}\n          />\n        {:else}\n          <line \n            x1={$settings._miceSpawn.value} y1={0} \n            x2={$settings._miceSpawn.value} y2={$settings._height} \n          />\n        {/if}\n      </g>\n      {/if}\n\n    </g>\n  </svg>\n\n  {#if $creation}\n  <div class=\"absolute top-0 right-0 bottom-0 left-0 w-full h-full\"></div>\n  {/if}\n\n  <Footer position={mouseGame} {selectionArea} />\n\n</div>\n\n<style lang=\"text/postcss\">.mapBorder{fill:none;outline:4px dashed rgba(0,0,0,.2)}.playerView rect{fill:rgba(0,0,0,.2)}.playerView{pointer-events:none;width:800px;height:600px;fill:none;outline:4px solid rgba(0,0,0,.2)}.selectionArea{fill:none;stroke:none;outline-offset:-4px;outline:4px dashed hsla(0,0%,100%,.95)}</style>",
    "\n<script>\n  import { tick } from \"svelte\"\n\n  export let value = \"\"\n  export let disabled = false\n  export let center = false\n\n  export let placeholder = \"\"\n  export let sub = \"\"\n\n  export let number = false\n\n\n\n  let currentValue\n\n  let locked = false\n  function lock() {\n    locked = true\n  }\n  function unlock() {\n    locked = false\n  }\n  function pullValue() {\n    if(value !== currentValue)\n      currentValue = value\n  }\n  $: if(!locked) pullValue(value)\n\n  function getCurrentValue() {\n    if(number) {\n      let float = parseFloat(currentValue)\n      return isNaN(float) ? undefined : float\n    }\n    return currentValue\n  }\n\n  $: exportedValue = getCurrentValue(currentValue)\n  $: if(exportedValue !== undefined) value = exportedValue\n\n\n  $: valueIsNumber = !isNaN(parseFloat(currentValue))\n\n\n  let inputElement\n\n  async function onKeydown(e) {\n    if(!number) return\n    if(!valueIsNumber) return\n    if(!(e.key === \"ArrowUp\" || e.key === \"ArrowDown\")) return\n    e.preventDefault()\n    let delta = e.key === \"ArrowUp\" ? 1 : -1\n    let factor = e.ctrlKey ? 100 : e.shiftKey ? 10 : e.altKey ? 0.1 : 1\n    currentValue = parseFloat((parseFloat(currentValue) + delta*factor).toFixed(6))\n    await tick()\n    inputElement.dispatchEvent(new Event(\"input\"))\n  }\n</script>\n\n<div class=\"material-input\" class:disabled={disabled} >\n  <input type=\"text\" disabled={disabled} \n    placeholder={placeholder}\n    class:text-center={center}\n    on:focus={lock} on:blur={unlock} on:change={pullValue} \n    on:focus on:blur on:input on:change on:click on:mousedown on:mouseup\n    bind:this={inputElement} bind:value={currentValue}\n    on:keydown={onKeydown} \n  />\n  {#if sub}\n  <span class=\"absolute top-0 right-0 mr-1 text-xs text-gray-400 italic uptop\">\n    {sub}\n  </span>\n  {/if}\n</div>\n\n<style lang=\"text/postcss\">.uptop{-webkit-transform:translateY(-100%);transform:translateY(-100%);line-height:.8rem}</style>",
    "<script>\n\n  export let disabled = false\n  // export let className\n  \n</script>\n\n<button on:click\n  disabled={disabled}\n  class=\"text-white space border-none outline-none bg-blue-600 rounded-sm select-none {$$props.class || ''}\"\n>\n  <slot></slot>\n</button>\n\n<style type=\"text/postcss\">.space{padding:.25rem .75rem}button[disabled]{opacity:.6;cursor:not-allowed}button:not([disabled]):hover{background-color:#63b3ed}</style>\n",
    "\n<script>\n\n  import { fly } from \"svelte/transition\"\n\n  export let active\n\n  export let title = \"Tooltip\"\n  export let inline = false\n  export let noStyle = false\n  export let noBorder = false\n\n  export let top = false\n  export let bottom = false\n  export let left = false\n  export let right = false\n  export let start = false\n  export let end = false\n\n  left || right || top || (bottom = true)\n\n  let hovering = false\n  \n  $: visible = active === true ? true : active === false ? false : hovering\n\n  $: flyDirectionOptions =\n    left    ? { x:  10 } :\n    right   ? { x: -10 } :\n    top     ? { y:  10 } :\n    bottom  ? { y: -10 } : {}\n  $: flyOptions = {\n    ...flyDirectionOptions,\n    duration: 150,\n  }\n\n  let targetElement\n  let tooltipElement\n\n  $: checkTooltipElement(tooltipElement)\n  function checkTooltipElement(el) {\n    if(!el) return\n    let bbox = el.getBoundingClientRect()\n    if(bbox.top < 0 && top) {\n      top = false\n      bottom = true\n    }\n    if(bbox.bottom > document.body.offsetHeight && bottom) {\n      bottom = false\n      top = true\n    }\n    if(bbox.left < 0 && left) {\n      left = false\n      right = true\n    }\n    if(bbox.right > document.body.offsetWidth && right) {\n      right = false\n      left = true\n    }\n  }\n\n</script>\n\n<div class=\"relative\" class:inline-block={inline} \n  on:mouseenter={() => hovering = true} \n  on:mouseleave={() => hovering = false} \n  bind:this={targetElement}\n>\n  <slot></slot>\n  {#if visible}\n  <div class=\"tooltip\" class:border={!noBorder} class:top class:bottom class:left class:right class:start class:end\n    transition:fly={flyOptions}\n    bind:this={tooltipElement}\n  >\n    <div class:inner={!noStyle}>\n      <slot name=\"tooltip\">\n        <span class=\" pointer-events-all whitespace-no-wrap\">{title}</span>\n      </slot>\n    </div>\n  </div>\n  {/if}\n</div>\n\n\n\n<style lang=\"text/postcss\">.tooltip{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;z-index:30}.tooltip.border{border:5px solid transparent}.inner{border-width:1px;box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);border-radius:.125rem;padding:.25rem .5rem;color:#f7fafc;font-size:.75rem;background:rgba(0,0,0,.8);border-color:#000}.tooltip.bottom{bottom:0;-webkit-transform:translateY(100%);transform:translateY(100%)}.tooltip.top{top:0;-webkit-transform:translateY(-100%);transform:translateY(-100%)}.tooltip.bottom:not(.start):not(.end){left:50%;-webkit-transform:translateY(100%) translateX(-50%);transform:translateY(100%) translateX(-50%)}.tooltip.top:not(.start):not(.end){left:50%;-webkit-transform:translateY(-100%) translateX(-50%);transform:translateY(-100%) translateX(-50%)}.tooltip.bottom.start,.tooltip.top.start{left:0;border-left:none}.tooltip.bottom.end,.tooltip.top.end{right:0;border-right:0}.tooltip.left{left:0;-webkit-transform:translateX(-100%);transform:translateX(-100%)}.tooltip.right{right:0;-webkit-transform:translateX(100%);transform:translateX(100%)}.tooltip.left:not(.start):not(.end){top:50%;-webkit-transform:translateX(-100%) translateY(-50%);transform:translateX(-100%) translateY(-50%)}.tooltip.right:not(.start):not(.end){top:50%;-webkit-transform:translateX(100%) translateY(-50%);transform:translateX(100%) translateY(-50%)}.tooltip.left.start,.tooltip.right.start{top:0;border-top:none}.tooltip.left.end,.tooltip.right.end{bottom:0;border-bottom:none}</style>",
    "\n<script>\n\n  import { slide, fly } from \"svelte/transition\"\n\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import ColorTextInput from \"/components/common/ColorTextInput.svelte\"\n\n  import { \n    \n    highQuality, parkour, showGameGUI, showMapBorder, gridSettings\n  } from \"/stores/stores.js\"\n\n</script>\n\n\n<div class=\"flex\">\n\n  <div class=\"flex-grow flex flex-col\">\n\n    <section>\n      <label class=\"flex items-center\">\n        <input type=\"checkbox\" bind:checked={$highQuality}/>\n        <span class=\"text-sm gray-200 ml-2\">High resolution textures</span>\n      </label>\n    </section>\n\n    <div class=\"mb-2\"></div>\n\n    <section>\n      <label class=\"flex items-center\">\n        <input type=\"checkbox\" bind:checked={$showGameGUI}/>\n        <span class=\"text-sm gray-200 ml-2\">Show game GUI</span>\n      </label>\n    </section>\n    <section>\n      <label class=\"flex items-center\">\n        <input type=\"checkbox\" bind:checked={$showMapBorder}/>\n        <span class=\"text-sm gray-200 ml-2\">Show map border</span>\n      </label>\n    </section>\n\n    <div class=\"mb-2\"></div>\n\n    <section>\n      <label class=\"flex items-center\">\n        <input type=\"checkbox\" bind:checked={$gridSettings.enabled}/>\n        <span class=\"text-sm gray-200 ml-2\">Show grid...</span>\n      </label>\n    </section>\n    {#if $gridSettings.enabled}\n    <div transition:fly={{y:-10, duration: 60}} class=\"border-l-2 pl-3 border-white\">\n      <section>\n        <label>\n          <span>L</span>\n          <TextInput number bind:value={$gridSettings.width} />\n        </label>\n        <label>\n          <span>H</span>\n          <TextInput number bind:value={$gridSettings.height} />\n        </label>\n      </section>\n      <section>\n        <label class=\"\">\n          <span>Grid color</span>\n          <div class=\"color-tile cursor-pointer\" style=\"background: #{$gridSettings.color}\"></div>\n          <ColorTextInput bind:value={$gridSettings.color} />\n        </label>\n      </section>\n    </div>\n    {/if}\n\n    <div class=\"mb-2\"></div>\n\n    <section>\n      <label class=\"flex items-center\">\n        <input type=\"checkbox\" bind:checked={$parkour}/>\n        <span class=\"text-sm gray-200 ml-2\">Show #parkour checkpoints</span>\n      </label>\n    </section>\n\n  </div>\n\n  <!-- <div class=\"ml-2 pl-2 border-l border-gray-200\" >\n    \n  </div> -->\n\n</div>\n\n\n<style>label,section{display:flex;align-items:center}label{transition:.2s;justify-content:space-between}label+label{margin-left:1rem}label>span,small-text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;margin-right:.75rem;font-size:.875rem;color:#e2e8f0}.color-tile{padding:.5rem;margin-right:.5rem;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);border-radius:.25rem}</style>",
    "\n<script>\n\n  import CodeMirror from \"codemirror\"\n  import \"codemirror/lib/codemirror.css\"\n  import \"codemirror/theme/lucario.css\"\n  import \"codemirror/mode/xml/xml.js\"\n\n  import beautify from \"xml-beautifier\"\n\n  import { tick, onMount } from \"svelte\"\n  \n  import { xml } from \"/stores/stores.js\"\n\n  let currentXML = null\n  let prettyXML\n  $: getPrettyXML($xml)\n  function getPrettyXML() {\n    if(currentXML === null || currentXML !== $xml) {\n      prettyXML = beautify($xml, \"  \")\n    }\n  }\n  \n  let textareaElement, cm\n\n  $: if(cm) cm.setValue(prettyXML)\n\n  onMount(() => {\n    cm = CodeMirror.fromTextArea(textareaElement, { \n      lineNumbers: true, \n      mode: \"xml\",\n      theme: \"lucario\",\n    })\n    cm.on(\"change\", cm => {\n      if(cm.getValue() === prettyXML) return\n      $xml = currentXML = cm.getValue().replace(/>[\\t\\n ]+</g, \"><\")\n    })\n  })\n\n</script>\n\n<pre>\n  <code>\n    <textarea \n      bind:this={textareaElement}\n    ></textarea>\n  </code>\n</pre>\n\n<style lang=\"text/postcss\">:global(.CodeMirror){height:70vh}</style>",
    "\n<script>\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import Button from \"/components/common/Button.svelte\"\n\n  let data = [\n    {\n      context: \"Global\",\n      rows: [\n        {\n          inputs: [\"Space\", \"Drag\"],\n          description: \"Move the camera\",\n        },\n        {\n          inputs: [\"Ctrl\", \"Scroll\"],\n          description: \"Zoom in/out\",\n        },\n        {\n          inputs: [\"Click/Drag\"],\n          description: \"Select objects\",\n        },\n        {\n          inputs: [\"Shift\", \"Click/Drag\"],\n          description: \"Select/unselect objects\",\n        },\n        {\n          inputs: [\"Ctrl\", \"A\"],\n          description: \"Select all\",\n        },\n        {\n          inputs: [\"Ctrl\", \"Shift\", \"A\"],\n          description: \"Unselect all\",\n        },\n        {\n          inputs: [\"Escape\"],\n          description: \"Cancel, unselect, reset camera\",\n        },\n        {\n          inputs: [\"Ctrl\", \"Z\"],\n          description: \"Undo last action\",\n        },\n        {\n          inputs: [\"Ctrl\", \"Y\"],\n          description: \"Redo\",\n        },\n        {\n          inputs: [\"Ctrl\", \"Shift\", \"Z\"],\n          description: \"Redo\",\n        },\n      ],\n    },\n\n    {\n      context: \"Selection\",\n      rows: [\n        {\n          inputs: [\"Drag\"],\n          description: \"Move selection\",\n        },\n        {\n          inputs: [\"Arrows\"],\n          description: \"Move selection\",\n        },\n        {\n          inputs: [\"Shift\", \"Arrows\"],\n          description: \"Move selection (±10)\",\n        },\n        {\n          inputs: [\"Ctrl\", \"Arrows\"],\n          description: \"Move selection (±100)\",\n        },\n        {\n          inputs: [\"Scroll\"],\n          description: \"Rotate\",\n        },\n        {\n          inputs: [\"Shift\", \"Scroll\"],\n          description: \"Rotate around cursor\",\n        },\n        {\n          inputs: [\"Alt\", \"Scroll\"],\n          description: \"Rotate slower\",\n        },\n        {\n          inputs: [\"Delete\"],\n          description: \"Delete\",\n        },\n        {\n          inputs: [\"D\"],\n          description: \"Duplicate\",\n        },\n        {\n          inputs: [\"Ctrl\", \"C\"],\n          description: \"Copy\",\n        },\n        {\n          inputs: [\"Ctrl\", \"X\"],\n          description: \"Cut\",\n        },\n        {\n          inputs: [\"Ctrl\", \"V\"],\n          description: \"Paste\",\n        },\n      ],\n    },\n    {\n      context: \"Numbers\",\n      rows: [\n        {\n          inputs: [\"Up/Down\"],\n          description: \"± 1\",\n        },\n        {\n          inputs: [\"Shift\", \"Up/Down\"],\n          description: \"± 10\",\n        },\n        {\n          inputs: [\"Ctrl\", \"Up/Down\"],\n          description: \"± 100\",\n        },\n        {\n          inputs: [\"Alt\", \"Up/Down\"],\n          description: \"± 0.1\",\n        },\n      ]\n    },\n    // {\n    //   context: \"Buttons\",\n    //   rows: [\n    //     {\n    //       inputs: [\"Click\"],\n    //       description: \"± 1\",\n    //     },\n    //     {\n    //       inputs: [\"Shift\", \"Click\"],\n    //       description: \"± 10\",\n    //     },\n    //     {\n    //       inputs: [\"Ctrl\", \"Click\"],\n    //       description: \"± 100\",\n    //     },\n    //     {\n    //       inputs: [\"Alt\", \"Click\"],\n    //       description: \"± 0.1\",\n    //     },\n    //   ]\n    // }\n\n  ]\n\n  let numberValue = 1\n</script>\n\n\n<div class=\"container\">\n  {#each data as {context, rows}}\n  <label class=\"context\">\n    <span class=\"mr-2\">{context}</span>\n    {#if context === \"Numbers\"}\n    <TextInput number bind:value={numberValue} />\n    {:else if context === \"Buttons\"}\n    <Button class=\"text-sm\" on:click={() => numberValue++}>+</Button>\n    {/if}\n  </label>\n  <table class=\"table\">\n    {#each rows as {inputs, description}}\n    <tr class=\"row\">\n      <td class=\"inputs\">\n        {#each inputs as input}\n        <div class=\"input\">{input}</div> \n        {/each}\n      </td>\n      <td class=\"description\">{description}</td>\n    </tr>\n    {/each}\n  </table>\n  {/each}\n</div>\n\n\n\n<style lang=\"text/postcss\">.container{overflow:auto;max-height:70vh}.context:not(:last-child){margin-top:.5rem}.context{font-size:1.125rem;color:#f7fafc;margin-bottom:.5rem;margin-left:.5rem;margin-right:.5rem;display:flex}.row{font-size:.875rem;margin-bottom:.25rem}.inputs{display:flex;justify-content:flex-end}.input{background-color:#edf2f7;border-color:#000;color:#2d3748;border-radius:.125rem;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);padding-left:.5rem;padding-right:.5rem;font-size:.75rem;margin-left:.25rem;margin-right:.25rem}.description{padding-left:1rem;text-align:left}</style>",
    "\n<script>\n  import Icon from \"fa-svelte\"\n  import { faEye } from \"@fortawesome/free-solid-svg-icons/faEye\"\n  import { faEyeSlash } from \"@fortawesome/free-solid-svg-icons/faEyeSlash\"\n  import { faChevronUp } from \"@fortawesome/free-solid-svg-icons/faChevronUp\"\n  import { faSquare } from \"@fortawesome/free-solid-svg-icons/faSquare\"\n  import { faSquare as faSquareOutline } from \"@fortawesome/free-regular-svg-icons/faSquare\"\n\n  import { \n    selection, visibility,\n    platforms, decorations, shamanObjects,\n  } from \"/stores/stores.js\"\n\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n\n  export let which\n  export let title\n  export let collapsed\n  export let grow = false\n  export let quarter = false\n  export let noActions = false\n  export let active\n\n  export let count\n  export let max\n\n  let countClass = \"\"\n  $: if(count !== undefined && max !== undefined) {\n    let ratio = parseInt(count)/parseInt(max)\n    countClass = \n      ratio > 1 ? \"text-red-400 very-bold\" :\n      ratio > 0.75 ? \"text-orange-400\" :\n      ratio > 0.5 ? \"text-yellow-400\" :\n      \"text-green-300\"\n  }\n\n</script>\n\n<div class=\"menu flex flex-col my-1\" \n  class:flex-grow={grow && !collapsed} \n  class:active={active}\n  class:quarter={quarter}\n>\n  <div class=\"flex justify-between items-center cursor-pointer border-b border-white-100\"\n    on:click={() => collapsed = !collapsed}\n  >\n    <div class=\"flex-grow flex justify-between px-1 flex-wrap\">\n      <div class=\"flex text-sm\">\n        <Tooltip bottom start title={collapsed ? \"Expand\" : \"Collapse\"}>\n          <div class=\"icon mr-3\" class:flipped={collapsed}>\n            <Icon icon={faChevronUp} />\n          </div>\n        </Tooltip>\n        <div>{title}</div>\n      </div>\n      {#if !noActions}\n      <div class=\"flex text-sm items-center\">\n        <div class=\"text-xs {countClass}\">\n          {count}/{max}\n        </div>\n        <div class=\"mr-3\"></div>\n        <Tooltip title=\"Unselect all\">\n          <div class=\"icon\" on:click|stopPropagation={() => selection.unselectGroup(which)}>\n            <Icon icon={faSquareOutline} />\n          </div>\n        </Tooltip>\n        <div class=\"mr-1\"></div>\n        <Tooltip title=\"Select all\">\n          <div class=\"icon\" on:click|stopPropagation={() => selection.selectGroup(which)}>\n            <Icon icon={faSquare} />\n          </div>\n        </Tooltip>\n        <div class=\"mr-3\"></div>\n        <Tooltip title=\"Toggle visibility\">\n          <div class=\"icon\" class:text-red-500={!$visibility[which]}\n            on:click|stopPropagation={() => visibility.toggle(which)}\n          >\n            <Icon icon={$visibility[which] ? faEye : faEyeSlash} />\n          </div>\n        </Tooltip>\n      </div>\n      {/if}\n    </div>\n  </div>\n  {#if !collapsed}\n  <slot></slot>\n  {/if}\n</div>\n\n<style lang=\"text/postcss\">.quarter{max-height:25%}.very-bold{font-weight:700;text-shadow:0 0 3px #000}.menu.active{outline:4px dashed #fff}.icon{transition:-webkit-transform 80ms;transition:transform 80ms;transition:transform 80ms,-webkit-transform 80ms}.flipped{-webkit-transform-origin:center;transform-origin:center;-webkit-transform:rotateX(180deg);transform:rotateX(180deg)}</style>",
    "\n<script>\n  import { slide, fly } from \"svelte/transition\"\n\n  import Icon from \"fa-svelte\"\n  import { faUndo } from \"@fortawesome/free-solid-svg-icons/faUndo\"\n  import { faExchangeAlt } from \"@fortawesome/free-solid-svg-icons/faExchangeAlt\"\n  import { faCrosshairs } from \"@fortawesome/free-solid-svg-icons/faCrosshairs\"\n\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import ColorTextInput from \"/components/common/ColorTextInput.svelte\"\n  import Button from \"/components/common/Button.svelte\"\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n\n  import { platforms, decorations, shamanObjects, settings, selection, creation, groundTypePicker, buildXML } from \"/stores/stores.js\"\n  import { encodeObjectData } from \"/xml-utils.js\"\n\n  let stores = [platforms, decorations, shamanObjects]\n\n\n  $: objectTypes = [...new Set($selection.map(o => o._objectType))]\n\n  let multi = {}\n  $: computeMulti($selection)\n\n  function getComputedProperties(object) {\n    return Object.keys(object).filter(key => key[0] === \"_\")\n  }\n\n  function computeMulti() {\n    if(!$selection.length) {\n      return multi = {}\n    }\n\n    if($selection.length === 1) {\n      return multi = $selection[0]\n    }\n\n    multi = {}\n    for(let object of $selection) {\n      for(let prop of getComputedProperties(object)) {\n        if(multi[prop] === undefined) {\n          multi[prop] = object[prop]\n        }\n        else if(multi[prop] !== object[prop]) {\n          multi[prop] = \"\"\n        }\n      }\n    }\n    multi._z = $selection.map(p => p._z).sort((a,b) => a-b).join(\", \")\n    return multi\n  }\n\n  // $: console.log(multi)\n\n\n  function updateObjects() {\n    for(let object of $selection) {\n      for(let prop in multi) {\n        if(object[prop] !== undefined && multi[prop] !== \"\") {\n          object[prop] = multi[prop]\n        }\n      }\n      encodeObjectData(object)\n    }\n    buildXML()\n    for(let store of stores) {\n      store.update(v => v)\n    }\n    $selection = $selection\n  }\n\n  function resetProperty(prop) {\n    if(multi[`_${prop}_default`] === undefined) {\n      throw `Prop ${prop} has no default value`\n    }\n    multi[`_${prop}`] = multi[`_${prop}_default`]\n    updateObjects()\n  }\n\n  function invertLH() {\n    for(let platform of $selection.filter(o => o._objectType === \"platform\")) {\n      let w = platform._width\n      platform._width = platform._height\n      platform._height = w\n    }\n    updateObjects()\n  }\n\n  function adjustZ({shiftKey,ctrlKey}, sign) {\n    let factor = shiftKey ? 10 : ctrlKey ? 100 : 1\n    let deltaZ = sign*factor\n\n    for(let [store,storeList,objectType] of [[platforms,$platforms,\"platform\"],[decorations,$decorations,\"decoration\"],[shamanObjects,$shamanObjects,\"shamanObject\"]]) {\n      if(!objectTypes.includes(objectType)) continue\n      let objects = $selection.filter(({_objectType}) => _objectType === objectType)\n      let newOrder = storeList\n      console.log(objects, storeList)\n      if(deltaZ < 0) {\n        let pp = objects.sort((a,b) => a._z - b._z)\n        let currentZ = -1\n        for(let object of pp) {\n          currentZ = Math.max(currentZ+1, object._z + deltaZ)\n          newOrder.splice(object._z, 1)\n          newOrder = [...newOrder.slice(0,currentZ), object, ...newOrder.slice(currentZ)]\n        }\n      }\n      else {\n        let pp = objects.sort((a,b) => b._z - a._z)\n        let currentZ = storeList.length\n        console.log(\"max insertion index \", currentZ)\n        for(let object of pp) {\n          currentZ = Math.min(currentZ-1, object._z + deltaZ)\n          console.log(\"actual index \", object._z)\n          console.log(\"will insert at index \", currentZ)\n          newOrder.splice(object._z, 1)\n          newOrder = [...newOrder.slice(0,currentZ), object, ...newOrder.slice(currentZ)]\n        }\n      }\n      store.set(newOrder)\n    }\n    \n    buildXML()\n    $selection = $selection\n  }\n\n  function requestGroundType() {\n    groundTypePicker.request(type => {\n      clearGroundTypeRequestTimeout()\n      multi._type = type\n      updateObjects()\n    })\n  }\n  let groundTypeRequestTimeout\n  function cancelGroundTypeRequest() {\n    groundTypeRequestTimeout = setTimeout(() => {\n      groundTypePicker.cancelRequest()\n      groundTypeRequestTimeout = null\n    }, 1000)\n  }\n  function clearGroundTypeRequestTimeout() {\n    if(groundTypeRequestTimeout !== null) {\n      clearTimeout(groundTypeRequestTimeout)\n    }\n  }\n\n  let flyRight = { duration: 50, x: 100 }\n  \n</script>\n\n\n{#if $selection.length} <!-- Global if -->\n\n\n<section class=\"text-sm flex justify-between\">\n  <Tooltip inline title=\"Delete\" bottom>\n    <Button on:click={selection.remove}>Delete</Button></Tooltip>\n  <Tooltip inline title=\"D\" bottom>\n    <Button on:click={selection.duplicate}>Duplicate</Button></Tooltip>\n  <Tooltip inline title=\"Ctrl+C\" bottom>\n    <Button on:click={selection.copy}>Copy</Button></Tooltip>\n</section>\n\n<section>\n  <label for=\"\" class=\"w-1/2\">\n    <div class=\"flex\">\n      <Button on:click={e => adjustZ(e, -1)}>-</Button>\n      <div class=\"flex\">\n        <TextInput number disabled={true} center value={multi._z} />\n      </div>\n      <Button on:click={e => adjustZ(e, +1)}>+</Button>\n    </div>\n  </label>\n  {#if multi._foreground !== undefined}\n  <label transition:fly={flyRight}>\n    <span>Foreground</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._foreground} on:change={updateObjects} />\n  </label>\n  {/if}\n</section>\n\n<div class=\"mb-2\"></div>\n\n\n\n\n<section>\n  <label>\n    <span>X</span>\n    <TextInput number bind:value={multi._x} on:input={updateObjects} />\n  </label>\n  <label>\n    <span>Y</span>\n    <TextInput number bind:value={multi._y} on:input={updateObjects} />\n  </label>\n</section>\n\n{#if objectTypes.includes(\"platform\")}\n<section>\n  <label>\n    <span>L</span>\n    <TextInput number bind:value={multi._width} on:input={updateObjects} />\n  </label>\n  <label class=\"icon\" on:click={invertLH} >\n    <Icon icon={faExchangeAlt} /></label>\n  <label>\n    <span>H</span>\n    <TextInput number bind:value={multi._height} on:input={updateObjects} />\n  </label>\n</section>\n\n<div class=\"mb-2\"></div>\n\n{#if objectTypes.length === 1 && objectTypes[0] === \"platform\"}\n<section>\n  <label>\n    <span class=\"input-text text-sm\">Ground type</span>\n    <TextInput number bind:value={multi._type} on:input={updateObjects} \n      on:blur={cancelGroundTypeRequest} on:focus={clearGroundTypeRequestTimeout}\n    />\n    <div class=\"icon ml-3\" on:click={requestGroundType} >\n      <Icon icon={faCrosshairs} />\n    </div>\n  </label>\n</section>\n{/if}\n\n{#if multi._color !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label class=\"\">\n    <span>Platform color</span>\n    <div class=\"color-tile cursor-pointer\" style=\"background: {multi._displayColor}\"></div>\n    <ColorTextInput bind:value={multi._color} on:input={updateObjects} />\n  </label>\n</section>\n{/if}\n\n<div class=\"mb-2\"></div>\n\n{#if multi._friction !== undefined}\n<section>\n  <label>\n    <span>Friction</span>\n    <TextInput number bind:value={multi._friction} on:input={updateObjects} />\n    <div class=\"icon ml-3\" \n      class:disabled={multi._friction_default === \"\" || multi._friction === multi._friction_default}\n      on:click={() => resetProperty(\"friction\")}\n    ><Icon icon={faUndo} /></div>\n  </label>\n</section>\n<section>\n  <label>\n    <span>Restitution</span>\n    <TextInput number bind:value={multi._restitution} on:input={updateObjects} />\n    <div class=\"icon ml-3\" \n      class:disabled={multi._restitution_default === \"\" || multi._restitution === multi._restitution_default}\n      on:click={() => resetProperty(\"restitution\")}\n    ><Icon icon={faUndo} /></div>\n  </label>\n</section>\n{/if}\n{/if}\n\n{#if multi._rotation !== undefined}\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">Rotation</span>\n    <TextInput number bind:value={multi._rotation} on:input={updateObjects} />\n    <div class=\"icon ml-3\" \n      class:disabled={multi._rotation_default === \"\" || multi._rotation === multi._rotation_default}\n      on:click={() => resetProperty(\"rotation\")}\n    ><Icon icon={faUndo} /></div>\n  </label>\n  {#if multi._dynamic}\n  <label transition:fly={flyRight}>\n    <span class=\"input-text text-sm\">Fixed</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._fixedRotation} on:change={updateObjects} />\n  </label>\n  {/if}\n</section>\n{/if}\n\n{#if multi._friction !== undefined}\n<div class=\"mb-2\"></div>\n\n<section>\n  <label>\n    <span>Collision with mice</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._miceCollision} on:change={updateObjects} />\n  </label>\n</section>\n<section>\n  <label>\n    <span>Collision with grounds</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._groundCollision} on:change={updateObjects} />\n  </label>\n</section>\n\n<div class=\"mb-2\"></div>\n\n<section>\n  <label>\n    <span>Dynamic...</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._dynamic} on:change={updateObjects} />\n  </label>\n</section>\n{#if multi._dynamic}\n<div transition:fly={flyRight} class=\"border-l-2 pl-3 border-white\">\n  <section>\n    <label>\n      <span>Mass</span>\n      <TextInput number bind:value={multi._mass} on:input={updateObjects} />\n    </label>\n  </section>\n  <section>\n    <label>\n      <span>Linear damping</span>\n      <TextInput number bind:value={multi._linearDamping} on:input={updateObjects} />\n    </label>\n  </section>\n  <section>\n    <label>\n      <span>Angular damping</span>\n      <TextInput number bind:value={multi._angularDamping} on:input={updateObjects} />\n    </label>\n  </section>\n</div>\n{/if}\n{/if}\n\n{#if multi._invisible !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">Invisible</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._invisible} on:change={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._vanish !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label>\n    <span>Vanish (milliseconds)</span>\n    <TextInput number bind:value={multi._vanish} on:input={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._nosync !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label>\n    <span>nosync</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._nosync} on:change={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._lua !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">Lua ID</span>\n    <TextInput bind:value={multi._lua} on:input={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._groundImageEnabled !== undefined}\n<div class=\"mb-2\"></div>\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">Use ground image...</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._groundImageEnabled} on:change={updateObjects} />\n  </label>\n</section>\n{#if multi._groundImageEnabled}\n<div transition:fly={flyRight} class=\"border-l-2 pl-3 border-white\">\n  <div class=\"mb-1\"></div>\n  <section>\n    <label>\n      <span class=\"input-text text-sm\">Url</span>\n      <div class=\"rtl-input\">\n        <TextInput placeholder=\"1651b30c284.png\"\n          bind:value={multi._groundImageUrl} on:input={updateObjects} />\n      </div>\n    </label>\n  </section>\n  <section>\n    <label>\n      <span>X</span>\n      <TextInput number bind:value={multi._groundImageX} on:input={updateObjects} />\n    </label>\n    <label>\n      <span>Y</span>\n      <TextInput number bind:value={multi._groundImageY} on:input={updateObjects} />\n    </label>\n  </section>\n</div>\n{/if}\n{/if}\n\n{#if multi._reverse !== undefined}\n<div class=\"mb-2\"></div>\n\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">Flip horizontally</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._reverse} on:change={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._numColors !== undefined && multi._numColors !== 0}\n<div class=\"mb-2\"></div>\n\n<section transition:fly={flyRight} class=\"flex-wrap\">\n  <label>\n    <span>Decoration colors</span>\n  </label>\n  {#each [0,1,2,3,4,5] as i}\n  {#if multi[\"_color\"+i] !== undefined}\n  <section class=\"mt-1\">\n    <label>\n      <div class=\"color-tile cursor-pointer\" style=\"background: {multi[\"_displayColor\"+i]}\"></div>\n      <ColorTextInput bind:value={multi[\"_color\"+i]} on:input={updateObjects} />\n    </label>\n  </section>\n  {/if}\n  {/each}\n</section>\n{/if}\n\n{#if multi._ghost !== undefined}\n<div class=\"mb-2\"></div>\n\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">Ghost object</span>\n    <input class=\"\" type=\"checkbox\" bind:checked={multi._ghost} on:change={updateObjects} />\n  </label>\n</section>\n{/if}\n\n{#if multi._nailPower !== undefined}\n<div class=\"mb-2\"></div>\n\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">Nail rotation power</span>\n    <TextInput number bind:value={multi._nailPower} on:input={updateObjects} />\n  </label>\n</section>\n<section transition:fly={flyRight}>\n  <label>\n    <span class=\"input-text text-sm\">Nail rotation speed</span>\n    <TextInput number bind:value={multi._nailSpeed} on:input={updateObjects} />\n  </label>\n</section>\n{/if}\n\n\n{/if} <!-- Global if-->\n\n\n<style lang=\"text/postcss\">.rtl-input{direction:rtl}.rtl-input[focus-within]{direction:ltr}.rtl-input:focus-within{direction:ltr}section{margin-bottom:.25rem}label,section{display:flex;align-items:center}label{transition:.2s;justify-content:space-between}label:not(:last-child){margin-right:1rem}label>span{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;margin-right:.75rem}.icon,label>span{font-size:.875rem;color:#e2e8f0}.icon{cursor:pointer}.icon.disabled{pointer-events:none;opacity:.4}.color-tile{padding:.75rem;margin-right:.5rem;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);border-radius:.25rem}</style>\n",
    "\n<script>\n  import { slide, fly } from \"svelte/transition\"\n\n  import Icon from \"fa-svelte\"\n  import { faUndo } from \"@fortawesome/free-solid-svg-icons/faUndo\"\n  import { faEye } from \"@fortawesome/free-solid-svg-icons/faEye\"\n  import { faEyeSlash } from \"@fortawesome/free-solid-svg-icons/faEyeSlash\"\n  import { faTrashAlt as faTrash } from \"@fortawesome/free-solid-svg-icons/faTrashAlt\"\n  import { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\"\n  import { faCircle } from \"@fortawesome/free-solid-svg-icons/faCircle\"\n  import { faCheckCircle } from \"@fortawesome/free-solid-svg-icons/faCheckCircle\"\n\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n  import ColorTextInput from \"/components/common/ColorTextInput.svelte\"\n  import Button from \"/components/common/Button.svelte\"\n\n  import ImagesSubMenu from \"/components/ui/ImagesSubMenu.svelte\"\n  import MultipleMiceSpawnSubMenu from \"/components/ui/MultipleMiceSpawnSubMenu.svelte\"\n\n  import { \n    platforms, decorations, shamanObjects, settings, \n    visibility, selection, creation, highlightedObject, buildXML } from \"/stores/stores.js\"\n  import { encodeMapData, mapBooleanProps } from \"/xml-utils.js\"\n\n  $: data = $settings\n\n  function updateSettings() {\n    encodeMapData(data)\n    buildXML()\n    settings.update(v => v)\n  }\n\n  function updateMiceSpawn() {\n    console.log(data._miceSpawn.type, data._miceSpawn)\n    if(data._miceSpawn.type === \"multiple\") {\n      data._miceSpawn.positions = \n        $decorations.filter(({name}) => name === \"DS\")\n        .map(({_x,_y}) => ({x:_x, y:_y}))\n    }\n    else if(data._miceSpawn.type === \"random\") {\n      data._miceSpawn.axis = \"x\"\n      data._miceSpawn.value = 350\n    }\n    else if(data._miceSpawn.type === \"normal\") {\n      if(data._miceSpawn.positions && data._miceSpawn.positions.length) {\n        creation.setFromType(\"decoration\", \"DS\")\n        creation.create(data._miceSpawn.positions[0])\n        $creation = null\n      }\n    }\n\n    encodeMapData(data)\n    buildXML()\n    settings.update(v => v)\n  }\n\n</script>\n\n<div class=\"p-4 bg-gray-700 shadow-lg absolute right-o h-full w-full overflow-y-auto overflow-x-hidden\">\n\n  <div class=\"mb-2\"></div>\n\n  <section>\n    <label>\n      <span>L</span>\n      <TextInput number sub=\"max: {data._width_max}\" bind:value={data._width} on:input={updateSettings} />\n    </label>\n    <label>\n      <span>H</span>\n      <TextInput number sub=\"max: {data._height_max}\" bind:value={data._height} on:input={updateSettings} />\n    </label>\n  </section>\n\n  <div class=\"mb-2\"></div>\n\n  <section>\n    <label>\n      <span>Gravity</span>\n      <TextInput number bind:value={data._gravity} on:input={updateSettings} />\n    </label>\n  </section>\n  <div class=\"mb-1\"></div>\n  <section>\n    <label>\n      <span>Wind</span>\n      <TextInput number bind:value={data._wind} on:input={updateSettings} />\n    </label>\n  </section>\n\n  <div class=\"mb-2\"></div>\n\n  <section>\n    <label>\n      <span>Background</span>\n      <div class=\"material-input\">\n        <select bind:value={data._backgroundImageId} on:change={updateSettings}>\n          <option value=\"-1\">None</option>\n          <option value=\"0\">Daylight</option>\n          <option value=\"1\">Dawn</option>\n          <option value=\"2\">Twilight</option>\n          <option value=\"3\">Full moon</option>\n          <option value=\"4\">Halloween</option>\n          <option value=\"5\">Christmas</option>\n          <option value=\"6\">Valentine</option>\n          <option value=\"7\">Storm clouds</option>\n          <option value=\"8\">Storm clouds 2</option>\n        </select>\n      </div>\n    </label>\n  </section>\n\n  <div class=\"mb-2\"></div>\n\n  <section>\n    <label>\n      <span>Mass of shaman objects</span>\n      <TextInput number bind:value={data._shamanObjectsMass} on:input={updateSettings} />\n    </label>\n  </section>\n\n  <div class=\"mb-2\"></div>\n\n  {#each mapBooleanProps as {name, title}}\n  <section>\n    <label>\n      <span>{title}</span>\n      <input class=\"\" type=\"checkbox\" checked={data[name]} \n        on:change={e => { data[name] = !!e.target.checked, updateSettings()}} />\n    </label>\n  </section>\n  {/each}\n\n  <div class=\"mb-2\"></div>\n\n  <section>\n    <label>\n      <span>Defilante mode...</span>\n      <input class=\"\" type=\"checkbox\" checked={data._defilanteEnabled} \n        on:change={e => { data._defilanteEnabled = !!e.target.checked, updateSettings()}} />\n    </label>\n  </section>\n  {#if data._defilanteEnabled}\n  <div class=\"mt-1\"></div>\n  <div transition:fly={{duration: 80, x:50}} class=\"border-l-2 pl-3 border-white\">\n    <section>\n      <label>\n        <span>Starting speed</span>\n        <span class=\"w-1/3\">\n          <TextInput number bind:value={data._defilanteStartSpeed} on:input={updateSettings} />\n        </span>\n      </label>\n    </section>\n    <section>\n      <label>\n        <span>Acceleration</span>\n        <span class=\"w-1/3\">\n          <TextInput number bind:value={data._defilanteAcceleration} on:input={updateSettings} />\n        </span>\n      </label>\n    </section>\n    <section>\n      <label>\n        <span>Maximum speed</span>\n        <span class=\"w-1/3\">\n          <TextInput number bind:value={data._defilanteMaxSpeed} on:input={updateSettings} />\n        </span>\n      </label>\n    </section>\n    <section>\n      <label>\n        <span>Free scroll</span>\n        <input class=\"\" type=\"checkbox\" checked={data._defilanteFreeScroll} \n          on:change={e => { data._defilanteFreeScroll = !!e.target.checked, updateSettings()}} />\n      </label>\n    </section>\n  </div>\n  {/if}\n\n  <div class=\"mb-2\"></div>\n\n  <div\n    on:mouseenter={() => $highlightedObject = \"miceSpawn\"}\n    on:mouseleave={() => $highlightedObject = null}\n  >\n    <section>\n      <label>\n        <span>Mice spawn</span>\n        <div class=\"material-input\">\n          <select bind:value={data._miceSpawn.type} on:change={updateMiceSpawn}>\n            <option value=\"normal\">Normal</option>\n            <option value=\"multiple\">Multiple</option>\n            <option value=\"random\">Random</option>\n          </select>\n        </div>\n      </label>\n    </section>\n    {#if data._miceSpawn.type === \"multiple\"}\n    <section class=\"flex-col border-l-2 pl-3 border-white mt-1\" transition:fly={{duration: 80, x:50}}>\n      <MultipleMiceSpawnSubMenu />\n    </section>\n\n    {:else if data._miceSpawn.type === \"random\"}\n    <section class=\"flex-col border-l-2 pl-3 border-white mt-1\" transition:fly={{duration: 80, x:50}}>\n      <div class=\"flex w-full\">\n        <label class=\"w-1/2\">\n          <span>Axis</span>\n        </label>\n        <label class=\"w-1/2\">\n          <span>Random</span>\n        </label>\n      </div>\n      <div class=\"flex w-full\">\n        <label class=\"w-1/2\">\n          <span>X</span>\n          {#if data._miceSpawn.axis !== \"x\"}\n          <TextInput number bind:value={data._miceSpawn.value} on:input={updateSettings} />\n          {/if}\n        </label>\n        <label class=\"w-1/2 cursor-pointer\" on:click={() => { data._miceSpawn.axis = \"x\"; updateSettings()}}>\n          <Icon icon={data._miceSpawn.axis === \"x\" ? faCheckCircle : faCircle}/>\n        </label>\n      </div>\n      <div class=\"flex w-full\">\n        <label class=\"w-1/2\">\n          <span>Y</span>\n          {#if data._miceSpawn.axis !== \"y\"}\n          <TextInput number bind:value={data._miceSpawn.value} on:input={updateSettings} />\n          {/if}\n        </label>\n        <label class=\"w-1/2 cursor-pointer\" on:click={() => { data._miceSpawn.axis = \"y\"; updateSettings()}}>\n          <Icon icon={data._miceSpawn.axis === \"y\" ? faCheckCircle : faCircle}/>\n        </label>\n      </div>\n    </section>\n    {/if}\n  </div>\n\n  <div class=\"mb-4\"></div>\n\n  <ImagesSubMenu which=\"backgroundImages\" title=\"Background\"/>\n  <ImagesSubMenu which=\"foregroundImages\" title=\"Foreground\"/>\n  <ImagesSubMenu which=\"disappearingImages\" title=\"Disappearing\"/>\n\n</div>\n\n\n<style lang=\"text/postcss\">.rtl-input{direction:rtl}.rtl-input[focus-within]{direction:ltr}.rtl-input:focus-within{direction:ltr}.image-list{border-left:2px solid #fff;padding-left:.75rem;margin-bottom:.5rem}label,section{display:flex;align-items:center}label{transition:.2s;justify-content:space-between}label:not(:last-child){margin-right:1rem}label>span,small-text{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;margin-right:.75rem}.icon,label>span,small-text{font-size:.875rem;color:#e2e8f0}.icon{cursor:pointer}.icon.disabled{pointer-events:none;opacity:.4}</style>",
    "\n<script context=\"module\">\n\n  let resizeInfo = null\n\n  window.addEventListener(\"mousemove\", resizeMove)\n  window.addEventListener(\"mouseup\", resizeStop)\n  window.addEventListener(\"mouseleave\", resizeStop)\n\n  // 0 1 2\n  // 7   3\n  // 6 5 4\n  function resizeMove(e) {\n    if(!resizeInfo) return\n    let {k, start, platform, platformStart} = resizeInfo\n\n    let rotation = platform._rotation || 0\n\n    let isCircle = platform._typeName === \"circle\"\n\n    let dx = e.clientX - start.x\n    let dy = e.clientY - start.y\n\n    let [rdx,rdy] = rotate(dx, dy, -rotation)\n    if([1,5].includes(k)) rdx = 0\n    if([3,7].includes(k)) rdy = 0\n\n    let sign = { x: 1, y: 1 }\n    if([4,5,6].includes(k)) sign.y = -1\n    if([6,7,0].includes(k)) sign.x = -1\n    if(isCircle) {\n      sign.x /= 2\n      sign.y /= 2\n    }\n\n    let newWidth = platformStart._width   + sign.x*(+rdx)\n    let newHeight = platformStart._height + sign.y*(-rdy)\n    let extraWidth = newWidth < 10 ? 10 - newWidth : 0\n    let extraHeight = newHeight < 10 ? 10 - newHeight : 0\n    platform._width = Math.max(10, newWidth)\n    platform._height = Math.max(10, newHeight)\n\n    let [a,b] = rotate(rdx + sign.x*extraWidth, rdy - sign.y*extraHeight, rotation||0)\n    platform._x = Math.round(platformStart._x + a/2)\n    platform._y = Math.round(platformStart._y + b/2)\n\n    encodePlatformData(platform)\n    platforms.update(v => v)\n    selection.update(v => v)\n    buildXML()\n  }\n\n  function resizeStop() {\n    resizeInfo = null\n  }\n\n</script>\n\n<script>\n\n  import { encodePlatformData } from \"/xml-utils.js\"\n  import { highQuality, platforms, selection, buildXML } from \"/stores/stores.js\"\n\n  export let platform\n  export let active = false\n\n  $: isCircle = platform._typeName === \"circle\"\n\n  function rotate(x, y, angle, cx=0, cy=0) {\n    var radians = (Math.PI / 180) * angle,\n        cos = Math.cos(radians),\n        sin = -Math.sin(radians),\n        nx = (cos * (x - cx)) + (sin * (y - cy)) + cx,\n        ny = (cos * (y - cy)) - (sin * (x - cx)) + cy;\n    return [nx, ny];\n  }\n\n  $: rs = 6\n  // $: rw = rs/2 + platform._width/2\n  // $: rh = rs/2 + platform._height/2\n  $: rw = rs/2 + (isCircle ? platform._width : platform._width/2)\n  $: rh = rs/2 + (isCircle ? platform._width : platform._height/2)\n\n  // Clockwise from top left\n  function resizeStart(e, k) {\n    resizeInfo = { \n      k,\n      start: { x: e.clientX, y: e.clientY },\n      platformStart: Object.assign({}, platform),\n      platform,\n    }\n  }\n\n\n</script>\n\n<g \n  transform=\"translate({platform._x}, {platform._y}) \n             rotate({platform._rotation || 0})\"\n>\n  <g class=\"platform\"\n    on:mousedown on:mousemove on:mouseleave\n  >\n    <g class:opacity-0={platform._invisible}>\n\n      {#if platform._groundImageEnabled}\n        <image \n          x={-platform._width/2 + platform._groundImageX} \n          y={-platform._height/2 + platform._groundImageY}\n          href={platform._groundImageFullUrl}\n        />}\n        <rect\n          x={-platform._width/2} y={-platform._height/2}\n          width={platform._width} height={platform._height}\n          fill=\"none\"\n          class=\"selectable pointer-events-none\"\n          class:active\n        />\n      {:else if platform._typeName === \"circle\"}\n        <circle class=\"selectable\" class:active\n          r={platform._radius}\n          fill={platform._displayColor}\n        />\n      {:else if platform._typeName === \"rectangle\"}\n        <rect class=\"selectable\" class:active\n          x={-platform._width/2} y={-platform._height/2}\n          width={platform._width} height={platform._height}\n          fill={platform._displayColor}\n        />\n      {:else if [\"wood\", \"ice\", \"trampoline\", \"chocolate\", \"cloud\"].includes(platform._typeName)}\n        <image class=\"selectable\" class:active\n          x={-platform._width/2} y={-platform._height/2}\n          width={platform._width} height={platform._height} \n          preserveAspectRatio=\"none\" \n          href=\"grounds/{ platform._typeName }{ $highQuality? \"-high\" : \"\" }.png\"\n        />\n      {:else}\n        <g class=\"selectable\" class:active >\n          <foreignObject\n            x={-platform._width/2} y={-platform._height/2}\n            width={platform._width} height={platform._height} \n          >\n            <div\n              class=\"w-full h-full {platform._typeName !== 'invisible' ? platform._typeName : ''}\"\n              class:sides={platform._width%40===0}\n              class:highQuality={$highQuality}\n            >\n            </div>\n          </foreignObject>\n        </g>\n      {/if}\n\n    </g>\n  </g>\n\n  <g transform=\"translate({-rs/2}, {-rs/2})\" \n    class=\"resize-knobs\" class:active\n  >\n    {#each \n    isCircle ? [[+rw,0,3],[-rw,0,7]] : [\n      [-rw,-rh], [0,-rh], [+rw,-rh], [+rw,0],\n      [+rw,+rh], [0,+rh], [-rw,+rh], [-rw,0],\n    ].map(([x,y], k) => [x,y,k])\n    as [x,y,k]}\n    <rect fill=\"white\" width={rs} height={rs} {x} {y}\n      on:mousedown|stopPropagation|preventDefault={e => resizeStart(e, k)}\n    />\n    {/each}\n  </g>\n\n</g>\n\n\n\n<style lang=\"text/postcss\">.resize-knobs{visibility:hidden;cursor:crosshair}.resize-knobs.active{visibility:visible}.platform circle,.platform rect{transition:fill .1s}.selectable{outline-width:4px;outline-offset:-4px;outline-style:dashed;outline-color:hsla(0,0%,100%,0)}.selectable:hover{cursor:pointer;outline-color:hsla(0,0%,100%,.5)}.selectable.active{outline-color:hsla(0,0%,100%,.95)}.cobweb{background:url(grounds/cobweb.png)}.sand{background:url(grounds/sand.png)}.water{background:url(grounds/water.png)}.highQuality.water{background:url(grounds/water-high.png)}.lava{background:url(grounds/lava.png)}.highQuality.lava{background:url(grounds/lava-high.png)}.earth{background:url(grounds/earth.png)}.highQuality.earth{background:url(grounds/earth-high.png)}.grass{background:url(grounds/grass-top.png) repeat-x,url(grounds/earth.png)}.grass.sides{background:url(grounds/grass-corner.png) no-repeat,url(grounds/grass-corner-flipped.png) no-repeat 100% 0,url(grounds/grass-top.png) repeat-x,url(grounds/earth.png)}.highQuality.grass{background:url(grounds/grass-top.png) repeat-x,url(grounds/earth-high.png)}.highQuality.grass.sides{background:url(grounds/grass-corner.png) no-repeat,url(grounds/grass-corner-flipped.png) no-repeat 100% 0,url(grounds/grass-top.png) repeat-x,url(grounds/earth-high.png)}.grass.sides:before{content:\"\";position:absolute;width:100%;height:100%;top:0;right:0;bottom:0;left:0;top:8px;background:url(grounds/grass-side.png) repeat-y,url(grounds/grass-side-flipped.png) repeat-y 100% 0}.snow{background:url(grounds/snow-top.png) repeat-x,url(grounds/earth.png)}.snow.sides{background:url(grounds/snow-top.png) repeat-x,url(grounds/grass-side.png) repeat-y,url(grounds/grass-side-flipped.png) repeat-y 100% 0,url(grounds/earth.png)}.highQuality.snow{background:url(grounds/snow-top.png) repeat-x,url(grounds/earth-high.png)}.highQuality.snow.sides{background:url(grounds/snow-top.png) repeat-x,url(grounds/grass-side.png) repeat-y,url(grounds/grass-side-flipped.png) repeat-y 100% 0,url(grounds/earth-high.png)}.stone{background:url(grounds/stone-top.png) repeat-x,url(grounds/stone.png)}.stone.sides{background:url(grounds/stone-side.png) repeat-y,url(grounds/stone-side.png) repeat-y 100% 0,url(grounds/stone-top.png) repeat-x,url(grounds/stone.png)}.highQuality.stone{background:url(grounds/stone-top.png) repeat-x,url(grounds/stone-high.png)}.highQuality.stone.sides{background:url(grounds/stone-side.png) repeat-y,url(grounds/stone-side.png) repeat-y 100% 0,url(grounds/stone-top.png) repeat-x,url(grounds/stone-high.png)}</style>",
    "\n<script>\n  import cc from \"color-convert\"\n  import { onMount } from \"svelte\"\n  import { getUniqueId } from \"/utils.js\"\n  import decorationMetadata from \"/decorationMetadata.js\"\n\n  export let decoration\n  export let active\n\n  let instanceId = getUniqueId()\n\n  $: metadata = getDecorationMetadata(decoration)\n  const specialMetadataOffset = {\n    T: { x: 21, y: 31 },\n    F: { x: 23, y: 21 },\n    DS: { x: 26, y: 43 },\n    DC: { x: 26, y: 43 },\n    DC2: { x: 26, y: 43 },\n  }\n  function getDecorationMetadata(decoration) {\n    if(decoration.name === \"P\") {\n      return decorationMetadata[decoration._type]\n    }\n    return { \n      type: decoration._type, \n      filters: [],\n      offset: specialMetadataOffset[decoration._type],\n    }\n  }\n\n  $: filters = getFilters(decoration)\n  function getFilters() {\n    return metadata.filters.map(({name,defaultColor}, index) => {\n      let color = decoration[\"_displayColor\"+index]\n      let matrix = getColorMatrix(color)\n      return { name, matrix }\n    })\n  }\n\n  function withInstancedFilterIds(xml) {\n    for(let {name} of filters) {\n      xml = xml.replace(new RegExp(name, \"g\"), name+\"-\"+instanceId)\n    }\n    return xml\n  }\n\n  $: filtersLength = filters.length\n  $: decorationType = decoration._type\n  \n  let promise\n  $: if(filtersLength)\n      promise = fetch(`decorations/${decorationType}.svg`).then(r => r.text()).then(withInstancedFilterIds)\n\n  function getColorMatrix(hex) {\n    let [r,g,b] = cc.hex.rgb(hex).map(x => x/255)\n    return `\n      1 0 0 0 ${r-0.5}\n      0 1 0 0 ${g-0.5}\n      0 0 1 0 ${b-0.5}\n      0 0 0 1 0`.trim()\n  }\n\n</script>\n\n\n\n\n<g on:mousedown \n  class=\"decoration\" class:active={active} \n  transform=\"translate({decoration._x}, {decoration._y}) {decoration._reverse ? 'scale(-1, 1)' : ''}\"\n>\n  <g transform=\"translate(-{metadata.offset.x}, -{metadata.offset.y})\">\n\n    {#if filters.length}\n\n      {#each filters as filter}\n      <filter id=\"{filter.name}-{instanceId}\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\" filterUnits=\"objectBoundingBox\" primitiveUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\">\n        <feColorMatrix type=\"matrix\" values={filter.matrix} x=\"0%\" y=\"0%\" width=\"100%\" height=\"100%\" in=\"colormatrix\" result=\"colormatrix1\"/>\n      </filter>\n      {/each}\n\n      {#await promise then svg}\n        {@html svg}\n      {/await}\n\n    {:else}\n\n      <image href=\"decorations/{decoration._type}.png\"/>\n\n    {/if}\n\n  </g>\n</g>\n\n<style lang=\"text/postcss\">.decoration *{transition:fill .1s,outline-color 50ms;outline-width:4px;outline-offset:-4px;outline-style:dashed;outline-color:hsla(0,0%,100%,0)}.decoration :hover{cursor:pointer;outline-color:hsla(0,0%,100%,.5)}.decoration.active *{outline-color:hsla(0,0%,100%,.95)}</style>",
    "\n<script>\n\n  import { parkour, shamanObjects, settings } from \"/stores/stores.js\"\n\n  export let shamanObject\n  export let active\n\n  $: spriteData = getSpriteData(shamanObject, $settings)\n  function getSpriteData() {\n    if(!shamanObject._spriteData) return\n    if($settings._defilanteEnabled && shamanObject._spriteData.defilanteVariant) {\n      return shamanObject._spriteData.defilanteVariant\n    }\n    return shamanObject._spriteData\n  }\n\n  function getParkourCheckpointIndex() {\n    return $shamanObjects.filter(o => o._type == \"22\").indexOf(shamanObject) + 1\n  }\n\n</script>\n\n\n<g on:mousedown\n  class=\"platform\" class:active={active} \n  transform=\"translate({shamanObject._x}, {shamanObject._y}) \n             rotate({shamanObject._rotation || 0})\"\n>\n\n  {#if spriteData && spriteData.spritesheet}\n\n  <foreignObject class=\"pointer-events-none\" class:opacity-50={shamanObject._ghost}\n    x={-spriteData.width/2} y={-spriteData.height/2}\n    width={spriteData.width} height={spriteData.height}\n    style=\"background-image: url(shamanObjects/{spriteData.spritesheet}); \n          background-position: {-spriteData.offset.x}px {-spriteData.offset.y}px;\n          background-repeat: no-repeat;\"\n  />\n\n  <foreignObject class=\"selectable\" \n    x={-spriteData.boundingWidth/2} y={-spriteData.boundingHeight/2}\n    style=\"width: {spriteData.boundingWidth}px; height: {spriteData.boundingHeight}px\"\n  />\n\n  {:else if spriteData && spriteData.sprite}\n\n  <image class=\"selectable\" class:opacity-50={shamanObject._ghost}\n    x={-spriteData.width/2} y={-spriteData.height/2}\n    width={spriteData.width} height={spriteData.height}\n    href=\"shamanObjects/{spriteData.sprite}\"\n  />\n\n  {:else}\n\n  <rect class=\"selectable\" class:opacity-50={shamanObject._ghost}\n    x={-20} y={-20}\n    width={40} height={40}\n    fill=\"red\"\n  />\n\n  {/if}\n\n  {#if $parkour && shamanObject._type == \"22\"}\n  <text class=\"pointer-events-none\" y=\"-8\">{getParkourCheckpointIndex()}</text>\n  {/if}\n\n</g>\n\n\n<style lang=\"text/postcss\">.selectable{transition:fill .1s,outline-color 50ms;outline-width:4px;outline-offset:-4px;outline-style:dashed;outline-color:hsla(0,0%,100%,0)}.selectable:hover{cursor:pointer;outline-color:hsla(0,0%,100%,.5)}.active .selectable{outline-color:hsla(0,0%,100%,.95)}text{fill:#000;font:14px sans-serif;text-anchor:middle}</style>",
    "\n<script>\n  import { fly } from \"svelte/transition\"\n\n  import { selection } from \"/stores/stores.js\"\n\n  export let position\n  export let selectionArea\n\n  $: [x,y] = [position.x, position.y].map(v => Math.round(v))\n  let sw, sh\n  $: if(selectionArea) {\n    sw = Math.round(selectionArea.x2-selectionArea.x1)\n    sh = Math.round(selectionArea.y2-selectionArea.y1)\n  }\n\n</script>\n\n<div class=\"absolute z-40 bottom-0 px-4 pointer-events-none flex\">\n\n  <div class=\"section\">\n    <span class=\"text-gray-500 text-xs\">X</span>\n    <span class=\"text-gray-100 w-8 text-right inline-block\">{x}</span>\n    <span class=\"text-gray-500 text-xs ml-2\">Y</span>\n    <span class=\"text-gray-100 w-8 text-right inline-block\">{y}</span>\n  </div>\n\n  {#if $selection.length}\n  <div class=\"ml-4 section\" >\n    <span class=\"text-gray-100\">{$selection.length}</span>\n    <span class=\"text-gray-500 text-xs ml-1\">selected</span>\n  </div>\n  {/if}\n\n  {#if selectionArea}\n  <div class=\"ml-4 section\" >\n    <span class=\"text-gray-500 text-xs\">L</span>\n    <span class=\"text-gray-100 w-8 text-right inline-block\">{sw}</span>\n    <span class=\"text-gray-500 text-xs ml-2\">H</span>\n    <span class=\"text-gray-100 w-8 text-right inline-block\">{sh}</span>\n  </div>\n  {/if}\n\n</div>\n\n<div class=\"right-0 absolute z-40 bottom-0 px-4 flex\">\n\n  <div class=\"section\">\n    <span class=\"text-gray-100\">Miceditor</span>\n    <span class=\"text-gray-500 text-xs ml-1\">v1.0</span>\n    <span class=\"text-gray-500 text-xs ml-2\">by</span>\n    <span class=\"text-gray-100 ml-1\">entibo</span>\n  </div>\n\n</div>\n\n<style lang=\"text/postcss\">.section{background-color:#2d3748;border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding:.25rem .75rem}</style>",
    "<script>\n  import { slide, fly } from \"svelte/transition\"\n\n  import Icon from \"fa-svelte\"\n  import { faEye } from \"@fortawesome/free-solid-svg-icons/faEye\"\n  import { faEyeSlash } from \"@fortawesome/free-solid-svg-icons/faEyeSlash\"\n  import { faTrashAlt as faTrash } from \"@fortawesome/free-solid-svg-icons/faTrashAlt\"\n  import { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\"\n\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n\n  import { settings, visibility, buildXML, highlightedObject } from \"/stores/stores.js\"\n  import { encodeMapData } from \"/xml-utils.js\"\n\n  export let which\n  export let title\n\n  $: data = $settings\n\n  function updateSettings() {\n    encodeMapData(data)\n    buildXML()\n    settings.update(v => v)\n  }\n\n</script>\n\n\n<section class=\"flex-col\">\n  <div class=\"text-sm text-gray-100 w-full flex justify-between\">\n    <span>{title} images</span>\n    <Tooltip inline title=\"Add\">\n      <div class=\"cursor-pointer text-green-500\"\n        on:click={() => {\n          $settings[\"_\"+which].push({url:\"\",x:0,y:0})\n          updateSettings()\n        }}\n      >\n        <Icon icon={faPlus} /></div></Tooltip>\n    <Tooltip inline bottom end title=\"Toggle visibility\">\n      <div class=\"cursor-pointer\" class:text-red-500={!$visibility[which]}\n        on:click={() => visibility.toggle(which)}\n      >\n        <Icon icon={$visibility[which] ? faEye : faEyeSlash} /></div></Tooltip>\n  </div>\n  <div class=\"flex flex-col\">\n    {#each $settings[\"_\"+which] as data, index}\n    <div class=\"indented\">\n\n      <div class=\"flex my-1\">\n        <label>\n          <span>X</span>\n          <TextInput number value={data.x} on:input={e => { data.x = e.target.value, updateSettings()}} />\n        </label>\n        <label>\n          <span>Y</span>\n          <TextInput number value={data.y} on:input={e => { data.y = e.target.value, updateSettings()}} />\n        </label>\n        <Tooltip inline bottom end title=\"Remove\">\n          <div class=\"cursor-pointer text-red-500 text-sm\"\n            on:click|stopPropagation={() => {\n              $settings[\"_\"+which].splice(index, 1)\n              updateSettings()\n            }}\n          >\n            <Icon icon={faTrash} />\n          </div>\n        </Tooltip>\n      </div>\n\n      <div class=\"flex\">\n        <label>\n          <span>Url</span>\n          <div class=\"rtl-input\">\n            <TextInput placeholder=\"x_transformice/x_evt/x_evt_19/svtrixcv/bateau.png\"\n              value={data.url} on:input={e => { data.url = e.target.value, updateSettings()}} />\n          </div>\n        </label>\n      </div>\n\n      {#if which === \"disappearingImages\"}\n      <div class=\"indented mt-1\"\n        on:mouseenter={() => $highlightedObject = data.index}\n        on:mouseleave={() => $highlightedObject = null}\n      >\n        <div class=\"text-xs text-gray-300\">Disappearing rectangle</div>\n        <div class=\"flex\">\n          <label>\n            <span class=\"text-xs\">Left</span>\n            <TextInput number value={data.rx} on:input={e => { data.rx = e.target.value, updateSettings()}} />\n          </label>\n          <label>\n            <span class=\"text-xs\">Top</span>\n            <TextInput number value={data.ry} on:input={e => { data.ry = e.target.value, updateSettings()}} />\n          </label>\n        </div>\n        <div class=\"flex\">\n          <label>\n            <span>L</span>\n            <TextInput number value={data.rw} on:input={e => { data.rw = e.target.value, updateSettings()}} />\n          </label>\n          <label>\n            <span>H</span>\n            <TextInput number value={data.rh} on:input={e => { data.rh = e.target.value, updateSettings()}} />\n          </label>\n        </div>\n      </div>\n      {/if}\n\n    </div>\n    {/each}\n  </div>\n</section>\n\n<style lang=\"text/postcss\">.rtl-input{direction:rtl}.rtl-input[focus-within]{direction:ltr}.rtl-input:focus-within{direction:ltr}.indented{border-left-width:2px;border-color:#fff;padding-left:.75rem;margin-bottom:.5rem}section{margin-bottom:.25rem}label,section{display:flex;align-items:center}label{transition:.2s;justify-content:space-between}label:not(:last-child){margin-right:1rem}label>span{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;margin-right:.75rem;font-size:.875rem;color:#e2e8f0}</style>",
    "<script>\n  import { slide, fly } from \"svelte/transition\"\n\n  import Icon from \"fa-svelte\"\n  import { faEye } from \"@fortawesome/free-solid-svg-icons/faEye\"\n  import { faEyeSlash } from \"@fortawesome/free-solid-svg-icons/faEyeSlash\"\n  import { faTrashAlt as faTrash } from \"@fortawesome/free-solid-svg-icons/faTrashAlt\"\n  import { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\"\n\n  import TextInput from \"/components/common/TextInput.svelte\"\n  import Tooltip from \"/components/common/Tooltip.svelte\"\n\n  import { settings, visibility, buildXML } from \"/stores/stores.js\"\n  import { encodeMapData } from \"/xml-utils.js\"\n\n  function updateSettings() {\n    encodeMapData($settings)\n    buildXML()\n    settings.update(v => v)\n  }\n\n</script>\n\n{#if $settings._miceSpawn.type === \"multiple\" && $settings._miceSpawn.positions !== undefined}\n\n<section class=\"flex-col\">\n  <div class=\"text-sm text-gray-100 w-full flex justify-between\">\n    <span>Positions</span>\n    <Tooltip inline title=\"Add\">\n      <div class=\"cursor-pointer text-green-500\"\n        on:click={() => {\n          $settings._miceSpawn.positions.push({x:400,y:200})\n          updateSettings()\n        }}\n      >\n        <Icon icon={faPlus} /></div></Tooltip>\n    <Tooltip inline bottom end title=\"Toggle visibility\">\n      <div class=\"cursor-pointer\" class:text-red-500={!$visibility.basic}\n        on:click={() => visibility.toggle(\"basic\")}\n      >\n        <Icon icon={$visibility.basic ? faEye : faEyeSlash} /></div></Tooltip>\n  </div>\n  <div class=\"flex flex-col\">\n    {#each $settings._miceSpawn.positions as pos, index}\n    <div class=\"indented flex my-1\">\n      <label>\n        <span>X</span>\n        <TextInput number value={pos.x} on:input={e => { pos.x = e.target.value, updateSettings()}} />\n      </label>\n      <label>\n        <span>Y</span>\n        <TextInput number value={pos.y} on:input={e => { pos.y = e.target.value, updateSettings()}} />\n      </label>\n      <Tooltip inline bottom end title=\"Remove\">\n        <div class=\"cursor-pointer text-red-500 text-sm\"\n          on:click|stopPropagation={() => {\n            $settings._miceSpawn.positions.splice(index, 1)\n            updateSettings()\n          }}\n        >\n          <Icon icon={faTrash} />\n        </div>\n      </Tooltip>\n    </div>\n    {/each}\n  </div>\n</section>\n\n{/if}\n\n\n<style lang=\"text/postcss\">.indented{border-left-width:2px;border-color:#fff;padding-left:.75rem;margin-bottom:.5rem}section{margin-bottom:.25rem}label,section{display:flex;align-items:center}label{transition:.2s;justify-content:space-between}label:not(:last-child){margin-right:1rem}label>span{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;margin-right:.75rem;font-size:.875rem;color:#e2e8f0}</style>",
    "\n<script>\n\n  import cc from \"color-convert\"\n\n  export let value\n\n  let hsv\n  let lastSetValue\n  function setValue(h, s, v) {\n    hsv = [h, s, v]\n    lastSetValue = value = cc.hsv.hex(h, s, v)\n  }\n  $: if(value !== lastSetValue) hsv = cc.hex.hsv(value)\n\n  $: onlyHue = `hsl(${hsv[0]}, 100%, 50%)`\n  $: hStyle = `\n    background: ${onlyHue};\n    left: 50%; \n    transform: translate(-50%, -50%) \n               translateY(${hueHeight*(1-hsv[0]/360)}px);`\n  $: svStyle = `\n    background: #${value}; \n    transform: translate(-50%, -50%) \n               translate(${svWidth*hsv[1]/100}px, ${svHeight*(1-hsv[2]/100)}px);`\n\n  let hueElement, svElement\n  let hueWidth, hueHeight, svWidth, svHeight\n  let movingHue = false, movingSV = false\n  function onHueMousedown(e) {\n    movingHue = true\n    onMousemove(e)\n  }\n  function onSVMousedown(e) {\n    movingSV = true\n    onMousemove(e)\n  }\n  function onMousemove({x,y}) {\n    if(!movingHue && !movingSV) return\n    let [h,s,v] = hsv\n    if(movingHue) {\n      let { top, right, bottom, left, width, height } = hueElement.getBoundingClientRect()\n      let dy = Math.min(1, Math.max(0, (y - top) / height))\n      let h = (1-dy) * 360\n      setValue(h, s, v)\n    }\n    if(movingSV) {\n      let { top, right, bottom, left, width, height } = svElement.getBoundingClientRect()\n      let dx = Math.min(1, Math.max(0, (x - left) / width))\n      let dy = Math.min(1, Math.max(0, (y - top) / height))\n      let s = dx * 100\n      let v = (1-dy) * 100\n      setValue(h, s, v)\n    }\n    hueElement.dispatchEvent(new Event(\"input\", { bubbles: true }))\n  }\n  function onMouseup(e) {\n    movingHue = movingSV = false\n  }\n  \n</script>\n\n<svelte:window\n  on:mousemove={onMousemove}\n  on:mouseup={onMouseup}\n  on:mouseleave={onMouseup}\n/>\n\n<div class=\"flex p-4 h-64\" style=\"width: 14rem;\" on:input >\n  <div class=\"hue-select w-4 mr-4 rounded-sm relative\"\n    on:mousedown={onHueMousedown}\n    bind:this={hueElement}\n    bind:clientWidth={hueWidth}\n    bind:clientHeight={hueHeight}\n  >\n    <div class=\"selector\" style={hStyle} ></div>\n  </div>\n  <div class=\"value-saturation-select relative flex-grow rounded-sm\"\n    style=\"background: {onlyHue};\"\n    on:mousedown={onSVMousedown}\n    bind:this={svElement}\n    bind:clientWidth={svWidth}\n    bind:clientHeight={svHeight}\n  >\n    <div class=\"selector\" style={svStyle} ></div>\n  </div>\n</div>\n\n\n<style lang=\"text/postcss\">.hue-select{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAEWCAYAAACnsf0eAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4wcPEgMV7xXP/AAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAFTSURBVDjLfZFdksMgDIM/q0D35x57/+NtgMb7kMZAN9MXjyRLwpngP8UFQvCF4IbgjiAhKOewjGCMO8LK6TtQbAcN5FaQDe3oC/RKyzvN3vvyui1ot4SqgxrMaHNQD60G6oDaqjX+F0wxQD3opfmiagP0iFsm30vLxXBArGNfqUc9nJ/1GJqBvJyDDPIMsgLaM0jl1IZFQX21sGp7aBaJlJcFgV60WwE9LnxKQakIGkregm4IOqqxxSvKtDnhY7su8Io+6agfWkV+lLZ/iUZFmf5EU7P3uKXNV0FDOZrnx1/e+I3f2FGOP/gdKMcogD4mmtCNHRUcpWO7oFvECqBs6YnSEQPd2Z+JjBYzHg9ZII+FUDlahIotidl8Xpp5PDUBooJoAwnRdkS1WBiieVgcUYdP4XNEM+TVkTXWgn2JbUL0eHegLehI1KDt4mZAeCCzA/0BoHfNUPyhWYUAAAAASUVORK5CYII=\");background-repeat:repeat-x;background-size:contain}.value-saturation-select:before{content:\"\";width:100%;height:100%;position:absolute;border-radius:.125rem;background:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,transparent)}.selector{position:absolute;width:1rem;height:1rem;border-radius:9999px;border-width:2px;border-color:#fff;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06)}</style>"
  ],
  "names": [],
  "mappings": "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"
}